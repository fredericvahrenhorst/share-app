{"version":3,"file":"index.js","names":["c","_c","useModal","React","useAuth","SelectAllStatus","useSelection","useTranslation","ListSelectionButton","UnpublishManyDrawerContent","UnpublishMany","props","$","count","selectAll","selected","toggleAll","t0","t1","_jsx","UnpublishMany_v4","ids","Array","from","keys","onSuccess","AllAvailable","collection","slug","versions","undefined","t","permissions","toggleModal","collectionPermissions","collections","hasPermission","update","drawerSlug","drafts","t2","_jsxs","Fragment","children","onClick"],"sources":["../../../src/elements/UnpublishMany/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig } from 'payload'\n\nimport { useModal } from '@faceless-ui/modal'\nimport React from 'react'\n\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { SelectAllStatus, useSelection } from '../../providers/Selection/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { ListSelectionButton } from '../ListSelection/index.js'\nimport { UnpublishManyDrawerContent } from './DrawerContent.js'\n\nexport type UnpublishManyProps = {\n  collection: ClientCollectionConfig\n}\n\nexport const UnpublishMany: React.FC<UnpublishManyProps> = (props) => {\n  const { count, selectAll, selected, toggleAll } = useSelection()\n\n  return (\n    <UnpublishMany_v4\n      {...props}\n      count={count}\n      ids={Array.from(selected.keys())}\n      onSuccess={() => toggleAll(false)}\n      selectAll={selectAll === SelectAllStatus.AllAvailable}\n    />\n  )\n}\n\nexport const UnpublishMany_v4: React.FC<\n  {\n    count: number\n    ids: (number | string)[]\n    onSuccess?: () => void\n    selectAll: boolean\n  } & UnpublishManyProps\n> = (props) => {\n  const {\n    collection,\n    collection: { slug, versions } = {},\n    count,\n    ids,\n    onSuccess,\n    selectAll,\n  } = props\n\n  const { t } = useTranslation()\n  const { permissions } = useAuth()\n  const { toggleModal } = useModal()\n\n  const collectionPermissions = permissions?.collections?.[slug]\n  const hasPermission = collectionPermissions?.update\n\n  const drawerSlug = `unpublish-${slug}`\n\n  if (!versions?.drafts || count === 0 || !hasPermission) {\n    return null\n  }\n\n  return (\n    <React.Fragment>\n      <ListSelectionButton\n        aria-label={t('version:unpublish')}\n        onClick={() => {\n          toggleModal(drawerSlug)\n        }}\n      >\n        {t('version:unpublish')}\n      </ListSelectionButton>\n      <UnpublishManyDrawerContent\n        collection={collection}\n        drawerSlug={drawerSlug}\n        ids={ids}\n        onSuccess={onSuccess}\n        selectAll={selectAll}\n      />\n    </React.Fragment>\n  )\n}\n"],"mappings":"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","ignoreList":[]}