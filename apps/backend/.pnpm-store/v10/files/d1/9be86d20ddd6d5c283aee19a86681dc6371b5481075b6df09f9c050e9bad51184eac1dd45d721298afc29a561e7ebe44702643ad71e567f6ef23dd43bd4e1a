"use client";import{a as Ce,c as ko,d as _o,e as To}from"./chunk-3BY5IZJD.js";import{a as at}from"./chunk-DBWINSQN.js";import{a as st,b as At,c as Ke}from"./chunk-FSKAVN4P.js";import{a as xe}from"./chunk-INBEEENE.js";import{a as ha}from"./chunk-F26IQ5RE.js";import{a as ce,b as Ot,d as Pr,e as Br,f as ga,g as xa,i as Ca,k as ba,l as ka}from"./chunk-KZKGNMS3.js";import{a as fa,b as j}from"./chunk-BZZVLW4U.js";function ee(t){return{items:t,key:"basic",label:({i18n:e})=>e.t("lexical:general:slashMenuBasicGroupLabel")}}import{$isElementNode as Re,$isRangeSelection as Ft,FORMAT_ELEMENT_COMMAND as Pt}from"lexical";import{jsx as wo,jsxs as _a}from"react/jsx-runtime";import"react";var Hr=()=>_a("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[wo("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),wo("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),wo("path",{d:"M5 15H15",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as Eo,jsxs as Ta}from"react/jsx-runtime";import"react";var jr=()=>Ta("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Eo("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Eo("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Eo("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as No,jsxs as wa}from"react/jsx-runtime";import"react";var $t=()=>wa("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[No("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),No("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),No("path",{d:"M2.5 15H12.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as So,jsxs as Ea}from"react/jsx-runtime";import"react";var Ur=()=>Ea("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[So("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),So("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),So("path",{d:"M7.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});var y=t=>o=>{let r={clientFeatureProps:o};if(typeof t=="function")r.feature=({config:n,featureClientImportMap:l,featureClientSchemaMap:i,featureProviderMap:s,field:c,resolvedFeatures:u,schemaPath:d,unSanitizedEditorConfig:a})=>{let p=t({config:n,featureClientImportMap:l,featureClientSchemaMap:i,featureProviderMap:s,field:c,props:o,resolvedFeatures:u,schemaPath:d,unSanitizedEditorConfig:a});return p.sanitizedClientFeatureProps===null&&(p.sanitizedClientFeatureProps=o),p};else{let n={...t};n.sanitizedClientFeatureProps=o,r.feature=n}return r};var Gr=t=>({type:"dropdown",ChildComponent:$t,items:t,key:"align",order:30});var Wr=[Gr([{ChildComponent:$t,isActive:({selection:t})=>{if(!Ft(t))return!1;for(let e of t.getNodes()){if(Re(e)&&e.getFormatType()==="left")continue;let o=e.getParent();if(!(Re(o)&&o.getFormatType()==="left"))return!1}return!0},key:"alignLeft",label:({i18n:t})=>t.t("lexical:align:alignLeftLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Pt,"left")},order:1},{ChildComponent:Hr,isActive:({selection:t})=>{if(!Ft(t))return!1;for(let e of t.getNodes()){if(Re(e)&&e.getFormatType()==="center")continue;let o=e.getParent();if(!(Re(o)&&o.getFormatType()==="center"))return!1}return!0},key:"alignCenter",label:({i18n:t})=>t.t("lexical:align:alignCenterLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Pt,"center")},order:2},{ChildComponent:Ur,isActive:({selection:t})=>{if(!Ft(t))return!1;for(let e of t.getNodes()){if(Re(e)&&e.getFormatType()==="right")continue;let o=e.getParent();if(!(Re(o)&&o.getFormatType()==="right"))return!1}return!0},key:"alignRight",label:({i18n:t})=>t.t("lexical:align:alignRightLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Pt,"right")},order:3},{ChildComponent:jr,isActive:({selection:t})=>{if(!Ft(t))return!1;for(let e of t.getNodes()){if(Re(e)&&e.getFormatType()==="justify")continue;let o=e.getParent();if(!(Re(o)&&o.getFormatType()==="justify"))return!1}return!0},key:"alignJustify",label:({i18n:t})=>t.t("lexical:align:alignJustifyLabel"),onSelect:({editor:t})=>{t.dispatchCommand(Pt,"justify")},order:4}])],Na=y({toolbarFixed:{groups:Wr},toolbarInline:{groups:Wr}});import{$createQuoteNode as Yr,$isQuoteNode as zr,QuoteNode as ya}from"@lexical/rich-text";import{$setBlocksType as qr}from"@lexical/selection";import{$getSelection as Qr,$isRangeSelection as Ia}from"lexical";import{jsx as Vr}from"react/jsx-runtime";import"react";var Lo=()=>Vr("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Vr("path",{d:"M13.5353 10.5725C13.5353 9.47709 11.0456 9.99991 11.0456 7.85883C11.0456 6.46464 12.1162 5.61816 13.361 5.61816C14.805 5.61816 16 6.86298 16 8.92937C16 11.2945 14.4564 13.7841 11.1203 14.3816L10.8216 13.1368C12.888 12.4895 13.5353 11.4937 13.5353 10.5725ZM6.71369 10.5725C6.71369 9.47709 4.22407 9.99991 4.22407 7.85883C4.22407 6.46464 5.29461 5.61816 6.53942 5.61816C7.9834 5.61816 9.17842 6.86298 9.17842 8.92937C9.17842 11.2945 7.63485 13.7841 4.29876 14.3816L4 13.1368C6.06639 12.4895 6.71369 11.4937 6.71369 10.5725Z",fill:"currentColor"})});import{jsx as Kr}from"react/jsx-runtime";import"react";var ct=()=>Kr("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Kr("path",{d:"M11.708 14.5H7.79785V13.9414H8.01367C9.00391 13.9414 9.15625 13.9033 9.15625 13.6113V6.70508H8.07715C6.82031 6.70508 6.73145 7.08594 6.28711 8.67285H5.80469L5.91895 6.12109H13.5869L13.7012 8.67285H13.2188C12.7744 7.08594 12.6855 6.70508 11.4287 6.70508H10.3496V13.6113C10.3496 13.9033 10.502 13.9414 11.4922 13.9414H11.708V14.5Z",fill:"currentColor"})});var le=t=>({type:"dropdown",ChildComponent:ct,items:t,key:"text",order:25});import{$createQuoteNode as Sa,$isQuoteNode as Jr,QuoteNode as La}from"@lexical/rich-text";var Xr={type:"element",dependencies:[La],export:(t,e)=>{if(!Jr(t))return null;let o=e(t).split(`
`),r=[];for(let n of o)r.push("> "+n);return r.join(`
`)},regExp:/^>\s/,replace:(t,e,o,r)=>{if(r){let l=t.getPreviousSibling();if(Jr(l)){l.splice(l.getChildrenSize(),0,[...e]),l.select(0,0),t.remove();return}}let n=Sa();n.append(...e),t.replace(n),n.select(0,0)}};var Zr=[le([{ChildComponent:Lo,isActive:({selection:t})=>{if(!Ia(t))return!1;for(let e of t.getNodes())if(!zr(e)&&!zr(e.getParent()))return!1;return!0},key:"blockquote",label:({i18n:t})=>t.t("lexical:blockquote:label"),onSelect:({editor:t})=>{t.update(()=>{let e=Qr();qr(e,()=>Yr())})},order:20}])],Ra=y({markdownTransformers:[Xr],nodes:[ya],slashMenu:{groups:[ee([{Icon:Lo,key:"blockquote",keywords:["quote","blockquote"],label:({i18n:t})=>t.t("lexical:blockquote:label"),onSelect:({editor:t})=>{t.update(()=>{let e=Qr();qr(e,()=>Yr())})}}])]},toolbarFixed:{groups:Zr},toolbarInline:{groups:Zr}});import{getTranslation as Kt}from"@payloadcms/translations";import{jsx as yo,jsxs as va}from"react/jsx-runtime";import"react";var Bt=()=>va("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[yo("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"8",y:"5"}),yo("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"5",y:"11"}),yo("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"11",y:"11"})]});import{jsx as en}from"react/jsx-runtime";import"react";var Ht=()=>en("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:en("path",{clipRule:"evenodd",d:"M5.33333 6.5C5.11232 6.5 4.90036 6.5878 4.74408 6.74408C4.5878 6.90036 4.5 7.11232 4.5 7.33333V12.1667C4.5 12.3877 4.5878 12.5996 4.74408 12.7559C4.90036 12.9122 5.11232 13 5.33333 13H14.6667C14.8877 13 15.0996 12.9122 15.2559 12.7559C15.4122 12.5996 15.5 12.3877 15.5 12.1667V11.6667C15.5 11.3905 15.7239 11.1667 16 11.1667C16.2761 11.1667 16.5 11.3905 16.5 11.6667V12.1667C16.5 12.6529 16.3068 13.1192 15.963 13.463C15.6192 13.8068 15.1529 14 14.6667 14H5.33333C4.8471 14 4.38079 13.8068 4.03697 13.463C3.69315 13.1192 3.5 12.6529 3.5 12.1667V7.33333C3.5 6.8471 3.69315 6.38079 4.03697 6.03697C4.38079 5.69315 4.8471 5.5 5.33333 5.5H10.3333C10.6095 5.5 10.8333 5.72386 10.8333 6C10.8333 6.27614 10.6095 6.5 10.3333 6.5H5.33333ZM13 6.5C12.7239 6.5 12.5 6.27614 12.5 6C12.5 5.72386 12.7239 5.5 13 5.5H16C16.2761 5.5 16.5 5.72386 16.5 6V9C16.5 9.27614 16.2761 9.5 16 9.5C15.7239 9.5 15.5 9.27614 15.5 9V7.20711L13.3536 9.35355C13.1583 9.54882 12.8417 9.54882 12.6464 9.35355C12.4512 9.15829 12.4512 8.84171 12.6464 8.64645L14.7929 6.5H13ZM6.16699 8.33325C6.16699 8.05711 6.39085 7.83325 6.66699 7.83325H11.0003C11.2765 7.83325 11.5003 8.05711 11.5003 8.33325C11.5003 8.60939 11.2765 8.83325 11.0003 8.83325H6.66699C6.39085 8.83325 6.16699 8.60939 6.16699 8.33325ZM6.16699 10.9999C6.16699 10.7238 6.39085 10.4999 6.66699 10.4999H13.3337C13.6098 10.4999 13.8337 10.7238 13.8337 10.9999C13.8337 11.2761 13.6098 11.4999 13.3337 11.4999H6.66699C6.39085 11.4999 6.16699 11.2761 6.16699 10.9999Z",fill:"currentColor",fillRule:"evenodd"})});import{jsx as Ma}from"react/jsx-runtime";import"react";function jt(t,e){return t?()=>Ma("img",{alt:e??"Block Image",className:"lexical-block-custom-image",src:t,style:{maxHeight:20,maxWidth:20}}):Bt}import{jsx as ac}from"react/jsx-runtime";import cc from"bson-objectid";import"react";import{DecoratorBlockNode as Da}from"@lexical/react/LexicalDecoratorBlockNode.js";import Aa from"bson-objectid";var ut=class extends Da{__cacheBuster;__fields;constructor({cacheBuster:e,fields:o,format:r,key:n}){super(r,n),this.__fields=o,this.__cacheBuster=e||0}static clone(e){return new this({cacheBuster:e.__cacheBuster,fields:e.__fields,format:e.__format,key:e.__key})}static getType(){return"block"}static importDOM(){return{}}static importJSON(e){e.version===1&&(e={...e,fields:{...e.fields.data},version:2});let o=Oa(e.fields);return o.setFormat(e.format),o}static isInline(){return!1}decorate(e,o){return null}exportDOM(){let e=document.createElement("div"),o=document.createTextNode(this.getTextContent());return e.append(o),{element:e}}exportJSON(){return{...super.exportJSON(),type:"block",fields:this.getFields(),version:2}}getCacheBuster(){return this.getLatest().__cacheBuster}getFields(){return this.getLatest().__fields}getTextContent(){return"Block Field"}setFields(e,o){let r=this.getWritable();r.__fields=e,o||r.__cacheBuster++}};function Oa(t){return new ut({fields:{...t,id:t?.id||new Aa.default().toHexString()}})}import{jsx as z,jsxs as dt,Fragment as Ua}from"react/jsx-runtime";import{Button as nn,Collapsible as Ga,Drawer as Wa,EditDepthProvider as Va,ErrorPill as Ka,Form as Ja,formatDrawerSlug as Xa,FormSubmit as za,Pill as Za,RenderFields as Ya,SectionTitle as qa,useConfig as Qa,useDocumentForm as ec,useDocumentInfo as ln,useEditDepth as tc,useFormSubmitted as oc,useServerFunctions as rc,useTranslation as nc}from"@payloadcms/ui";import{abortAndIgnore as Io}from"@payloadcms/ui/shared";import{deepCopyObjectSimpleWithoutReactComponents as Gt,reduceFieldsToValues as sn}from"payload/shared";import mt,{useCallback as Ro,useEffect as vo,useMemo as pt,useRef as Mo}from"react";import{useLexicalComposerContext as lc}from"@lexical/react/LexicalComposerContext";import{getTranslation as ic}from"@payloadcms/translations";import{$getNodeByKey as Wt}from"lexical";import{v4 as sc}from"uuid";import{c as $a}from"react/compiler-runtime";import{jsx as Ut,jsxs as Fa}from"react/jsx-runtime";import{RenderFields as Pa,useFormSubmitted as Ba}from"@payloadcms/ui";import Ha,{createContext as ja}from"react";var tn=ja({initialState:!1}),Oe=()=>Ha.use(tn),on=t=>{let e=$a(13),{BlockDrawer:o,Collapsible:r,CustomBlock:n,EditButton:l,errorCount:i,formSchema:s,initialState:c,nodeKey:u,RemoveButton:d}=t,p=Ba()&&i>0,m,f;e[0]!==r||e[1]!==i||e[2]!==p?(f=b=>Ut(r,{editButton:b.editButton,errorCount:i,fieldHasErrors:p,Label:b.Label,removeButton:b.removeButton,children:b.children}),e[0]=r,e[1]=i,e[2]=p,e[3]=f):f=e[3],m=f;let h=m,x;return e[4]!==o||e[5]!==h||e[6]!==n||e[7]!==l||e[8]!==d||e[9]!==s||e[10]!==c||e[11]!==u?(x=n?Fa(tn,{value:{BlockCollapsible:h,EditButton:l,initialState:c,nodeKey:u,RemoveButton:d},children:[n,Ut(o,{})]}):Ut(h,{children:Ut(Pa,{fields:s,forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:"",permissions:!0})}),e[4]=o,e[5]=h,e[6]=n,e[7]=l,e[8]=d,e[9]=s,e[10]=c,e[11]=u,e[12]=x):x=e[12],x};function rn({fields:t}){for(let e in t){let o=t[e];Array.isArray(o?.rows)&&"value"in o&&(o.disableFormData=!0)}return t}var de="lexical-block",an=t=>{let{cacheBuster:e,formData:o,nodeKey:r}=t,n=oc(),{id:l,collectionSlug:i,globalSlug:s}=ln(),{fieldProps:{featureClientSchemaMap:c,field:u,initialLexicalFormState:d,permissions:a,readOnly:p,schemaPath:m},uuid:f}=j(),{fields:h}=ec(),x=Mo(new AbortController),b=tc(),[N,D]=mt.useState(0),{config:k}=Qa(),_=Xa({slug:`lexical-blocks-create-${f}-${o.id}`,depth:b}),{toggleDrawer:g}=xe(_),{getDocPreferences:S,setDocFieldPreferences:M}=ln(),[O]=lc(),{getFormState:F}=rc(),I=`${m}.lexical_internal_feature.blocks.lexical_blocks.${o.blockType}.fields`,[T,C]=mt.useState(()=>d?.[o.id]?.formState?{...d?.[o.id]?.formState,blockName:{initialValue:o.blockName,passesCondition:!0,valid:!0,value:o.blockName}}:!1),E=Mo(!1),R=Mo(e);vo(()=>{E.current?(R.current!==e&&C(!1),R.current=e):E.current=!0},[e]);let[L,v]=mt.useState(T?._components?.customComponents?.BlockLabel),[w,$]=mt.useState(T?._components?.customComponents?.Block);vo(()=>{let G=new AbortController;return o&&!T&&(async()=>{let{state:J}=await F({id:l,collectionSlug:i,data:o,docPermissions:{fields:!0},docPreferences:await S(),documentFormState:Gt(h),globalSlug:s,initialBlockData:o,operation:"update",renderAllFields:!0,schemaPath:I,signal:G.signal});if(J){J.blockName={initialValue:o.blockName,passesCondition:!0,valid:!0,value:o.blockName};let Q=sn(Gt(J),!0);O.update(()=>{let X=Wt(r);if(X&&ft(X)){let ae=Q;ae.blockType=o.blockType,X.setFields(ae,!0)}}),C(J),v(J._components?.customComponents?.BlockLabel),$(J._components?.customComponents?.Block)}})(),()=>{Io(G)}},[F,I,l,o,O,r,T,i,s,S,h]);let[H,W]=mt.useState(d?.[o.id]?.collapsed??!1),Y=`${m}.lexical_internal_feature.blocks.lexical_blocks.${o.blockType}`,V=c.blocks?.[Y]?.[0],U=V.blockReferences?typeof V?.blockReferences?.[0]=="string"?k.blocksMap[V?.blockReferences?.[0]]:V?.blockReferences?.[0]:V?.blocks?.[0],{i18n:oe,t:ue}=nc(),q=Ro(async({formState:G,submit:fe})=>{Io(x.current);let J=new AbortController;x.current=J;let{state:Q}=await F({id:l,collectionSlug:i,docPermissions:{fields:!0},docPreferences:await S(),documentFormState:Gt(h),formState:G,globalSlug:s,initialBlockFormState:G,operation:"update",renderAllFields:!!fe,schemaPath:I,signal:J.signal});if(!Q)return G;G.blockName&&(Q.blockName=G.blockName);let X=sn(rn({fields:Gt(Q)}),!0);if(setTimeout(()=>{O.update(()=>{let ae=Wt(r);if(ae&&ft(ae)){let Ve=X;Ve.blockType=o.blockType,ae.setFields(Ve,!0)}})},0),fe){v(Q._components?.customComponents?.BlockLabel),$(Q._components?.customComponents?.Block);let ae=0;for(let Ve of Object.values(Q))Ve?.valid===!1&&ae++;D(ae)}return Q},[F,l,i,S,s,I,o.blockType,h,O,r]);vo(()=>()=>{Io(x.current)},[]);let K=Ro(()=>{O.update(()=>{Wt(r)?.remove()})},[O,r]),re=U?.labels?.singular?ic(U.labels.singular,oe):U?.slug,ne=Ro(G=>{S().then(fe=>{let Q=fe?.fields?.[u.name]?.collapsed,X=Q&&Q?.length?Q:[];G?X.includes(o.id)||X.push(o.id):X.includes(o.id)&&X.splice(X.indexOf(o.id),1),M(u.name,{collapsed:X,hello:"hi"})})},[S,u.name,M,o.id]),se=pt(()=>()=>z(nn,{buttonStyle:"icon-label",className:`${de}__editButton`,disabled:p,el:"button",icon:"edit",onClick:G=>(G.preventDefault(),G.stopPropagation(),g(),!1),onMouseDown:G=>{G.preventDefault()},round:!0,size:"small",tooltip:ue("lexical:blocks:inlineBlocks:edit",{label:re})}),[re,p,ue,g]),Ae=pt(()=>()=>z(nn,{buttonStyle:"icon-label",className:`${de}__removeButton`,disabled:u?.admin?.readOnly||!1,icon:"x",onClick:G=>{G.preventDefault(),K()},round:!0,tooltip:"Remove Block"}),[u?.admin?.readOnly,K]),it=pt(()=>({children:G,disableBlockName:fe,editButton:J,errorCount:Q,fieldHasErrors:X,Label:ae,removeButton:Ve})=>z("div",{className:de+" "+de+"-"+o.blockType,children:z(Ga,{className:[`${de}__row`,X?`${de}__row--has-errors`:`${de}__row--no-errors`].join(" "),collapsibleStyle:X?"error":"default",header:dt("div",{className:`${de}__block-header`,children:[ae??L?ae??L:dt("div",{children:[z(Za,{className:`${de}__block-pill ${de}__block-pill-${o?.blockType}`,pillStyle:"white",size:"small",children:re??o?.blockType}),!fe&&!U?.admin?.disableBlockName&&z(qa,{path:"blockName",readOnly:u?.admin?.readOnly||!1}),X&&z(Ka,{count:Q??0,i18n:oe,withMessage:!0})]}),dt("div",{children:[w&&J!==!1||!w&&J?z(se,{}):null,Ve!==!1&&O.isEditable()?z(Ae,{}):null]})]}),isCollapsed:H,onToggle:Fr=>{ne(Fr),W(Fr)},children:G},0)}),[w,L,se,Ae,re,U?.admin?.disableBlockName,O,o.blockType,oe,H,ne,u?.admin?.readOnly]),$r=pt(()=>()=>z(Va,{children:z(Wa,{className:"",slug:_,title:ue(`lexical:blocks:inlineBlocks:${o?.id?"edit":"create"}`,{label:re??ue("lexical:blocks:inlineBlocks:label")}),children:T?dt(Ua,{children:[z(Ya,{fields:U?.fields??[],forceRender:!0,parentIndexPath:"",parentPath:"",parentSchemaPath:I,permissions:!0,readOnly:!1}),z(za,{programmaticSubmit:!0,children:ue("fields:saveChanges")})]}):null})}),[T,_,re,ue,U?.fields,I,a]),pa=pt(()=>T?z(Ja,{beforeSubmit:[async({formState:G})=>await q({formState:G,submit:!0})],el:"div",fields:U?.fields??[],initialState:T,onChange:[q],onSubmit:(G,fe)=>{fe.blockType=o.blockType,O.update(()=>{let J=Wt(r);J&&ft(J)&&J.setFields(fe,!0)}),g()},submitted:n,uuid:sc(),children:z(on,{baseClass:de,BlockDrawer:$r,Collapsible:it,CustomBlock:w,EditButton:se,errorCount:N,formSchema:U?.fields??[],initialState:T,nodeKey:r,RemoveButton:Ae})}):null,[it,$r,w,U?.fields,Ae,se,O,N,g,U?.fields,T,r,q,n]);return U?pa:z(it,{disableBlockName:!0,fieldHasErrors:!0,children:dt("div",{className:"lexical-block-not-found",children:["Error: Block '",o.blockType,"' not found in the config but exists in the lexical data"]})})};var be=class extends ut{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importJSON(e){e.version===1&&(e={...e,fields:{...e.fields.data},version:2});let o=Vt(e.fields);return o.setFormat(e.format),o}decorate(e,o){return ac(an,{cacheBuster:this.getCacheBuster(),formData:this.getFields(),nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function Vt(t){return new be({fields:{...t,id:t?.id||new cc.default().toHexString()}})}function ft(t){return t instanceof be}import{createCommand as cn}from"lexical";var Je=cn("INSERT_BLOCK_COMMAND"),Xe=cn("INSERT_INLINE_BLOCK_COMMAND");import{c as uc}from"react/compiler-runtime";import{useLexicalComposerContext as dc}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as mc,$wrapNodeInElement as pc,mergeRegister as fc}from"@lexical/utils";import{formatDrawerSlug as hc,useEditDepth as gc}from"@payloadcms/ui";import{$createParagraphNode as xc,$getNodeByKey as Cc,$getPreviousSelection as bc,$getSelection as kc,$insertNodes as _c,$isParagraphNode as Tc,$isRangeSelection as wc,$isRootOrShadowRoot as Ec,COMMAND_PRIORITY_EDITOR as un}from"lexical";import{useEffect as Nc,useState as Sc}from"react";var dn=()=>{let t=uc(12),[e]=dc(),[o,r]=Sc(null),{setCreatedInlineBlock:n,uuid:l}=j(),i=gc(),s="lexical-inlineBlocks-create-"+l,c;t[0]!==i||t[1]!==s?(c=hc({slug:s,depth:i}),t[0]=i,t[1]=s,t[2]=c):c=t[2];let u=c,{toggleDrawer:d}=xe(u,!0),a;t[3]!==e||t[4]!==n||t[5]!==o?(a=()=>{if(!e.hasNodes([be]))throw new Error("BlocksPlugin: BlocksNode not registered on editor");return fc(e.registerCommand(Je,m=>(e.update(()=>{let f=kc()||bc();if(wc(f)){let h=Vt(m),{focus:x}=f,b=x.getNode();mc(h),Tc(b)&&!b.__first&&b.remove()}}),!0),un),e.registerCommand(Xe,m=>{if(o){let h=Cc(o);return!h||!To(h)?!1:(h.setFields(m),r(null),!0)}let f=_o(m);return n?.(f),_c([f]),Ec(f.getParentOrThrow())&&pc(f,xc).selectEnd(),!0},un))},t[3]=e,t[4]=n,t[5]=o,t[6]=a):a=t[6];let p;return t[7]!==e||t[8]!==n||t[9]!==o||t[10]!==d?(p=[e,n,o,d],t[7]=e,t[8]=n,t[9]=o,t[10]=d,t[11]=p):p=t[11],Nc(a,p),null};var Lc=y(({config:t,featureClientSchemaMap:e,props:o,schemaPath:r})=>{let n=`${r}.lexical_internal_feature.blocks.lexical_blocks`,l=`${r}.lexical_internal_feature.blocks.lexical_inline_blocks`,i=e.blocks;if(!i)return{};let s=Object.entries(i).filter(([a])=>a.startsWith(n+".")&&!a.replace(n+".","").includes(".")).map(([,a])=>a[0]),c=Object.entries(i).filter(([a])=>a.startsWith(l+".")&&!a.replace(l+".","").includes(".")).map(([,a])=>a[0]),u=s.map(a=>a.blockReferences?typeof a.blockReferences[0]=="string"?t.blocksMap[a.blockReferences[0]]:a.blockReferences[0]:a.blocks[0]).filter(a=>a!==void 0),d=c.map(a=>a.blockReferences?typeof a.blockReferences[0]=="string"?t.blocksMap[a.blockReferences[0]]:a.blockReferences[0]:a.blocks[0]).filter(a=>a!==void 0);return{nodes:[be,ko],plugins:[{Component:dn,position:"normal"}],sanitizedClientFeatureProps:o,slashMenu:{groups:[u?.length?{items:u.map(a=>({Icon:jt(a.imageURL,a.imageAltText),key:"block-"+a.slug,keywords:["block","blocks",a.slug],label:({i18n:p})=>a?.labels?.singular?Kt(a.labels.singular,p):a?.slug,onSelect:({editor:p})=>{p.dispatchCommand(Je,{blockName:"",blockType:a.slug})}})),key:"blocks",label:({i18n:a})=>a.t("lexical:blocks:label")}:null,d?.length?{items:d.map(a=>({Icon:Ht,key:"inlineBlocks-"+a.slug,keywords:["inlineBlock","inline block",a.slug],label:({i18n:p})=>a?.labels?.singular?Kt(a.labels.singular,p):a?.slug,onSelect:({editor:p})=>{p.dispatchCommand(Xe,{blockName:"",blockType:a.slug})}})),key:"inlineBlocks",label:({i18n:a})=>a.t("lexical:blocks:inlineBlocks:label")}:null].filter(Boolean)},toolbarFixed:{groups:[u.length?{type:"dropdown",ChildComponent:Bt,items:u.map((a,p)=>({ChildComponent:jt(a.imageURL,a.imageAltText),isActive:void 0,key:"block-"+a.slug,label:({i18n:m})=>a?.labels?.singular?Kt(a.labels.singular,m):a?.slug,onSelect:({editor:m})=>{m.dispatchCommand(Je,{blockName:"",blockType:a.slug})},order:p})),key:"blocks",order:20}:null,d?.length?{type:"dropdown",ChildComponent:Ht,items:d.map((a,p)=>({ChildComponent:a.imageURL?jt(a.imageURL,a.imageAltText):Ht,isActive:void 0,key:"inlineBlock-"+a.slug,label:({i18n:m})=>a?.labels?.singular?Kt(a.labels.singular,m):a?.slug,onSelect:({editor:m})=>{m.dispatchCommand(Xe,{blockName:"",blockType:a.slug})},order:p})),key:"inlineBlocks",order:25}:null].filter(Boolean)}}});import{c as Rc}from"react/compiler-runtime";import{jsx as Fe,jsxs as $o}from"react/jsx-runtime";import{useLexicalComposerContext as vc}from"@lexical/react/LexicalComposerContext.js";import{$createParagraphNode as Mc,$createTextNode as Dc,$getRoot as Ac,getDOMSelection as Do}from"lexical";import*as gn from"react";import{useCallback as $e,useEffect as Ao,useLayoutEffect as pn,useRef as Oo,useState as Jt}from"react";var yc=ce&&"documentMode"in document?document.documentMode:null,mn=ce&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),t2=ce&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),o2=ce&&"InputEvent"in window&&!yc?"getTargetRanges"in new window.InputEvent("input"):!1,r2=ce&&/Version\/[\d.].*Safari/.test(navigator.userAgent),n2=ce&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,l2=ce&&/Android/.test(navigator.userAgent),i2=ce&&/Win/.test(navigator.platform),Ic=ce&&/^(?=.*Chrome).*/i.test(navigator.userAgent),s2=ce&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Ic;var Oc=t=>{let e=document.createElement("textarea");e.value=t||"",e.style.position="absolute",e.style.opacity="0",document.body?.appendChild(e),e.focus(),e.select();try{let o=document.execCommand("copy");console.log(o)}catch(o){console.error(o)}document.body?.removeChild(e)},$c=(t,e)=>{let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e||"")),o.setAttribute("download",t),o.style.display="none",document.body?.appendChild(o),o.click(),document.body?.removeChild(o)},Fc=t=>{let o=((r,n)=>{switch(r){case"click":return`      await page.mouse.click(${n.x}, ${n.y});`;case"keydown":return`      await page.keyboard.keydown('${n}');`;case"keyup":return`      await page.keyboard.keyup('${n}');`;case"press":return`      await page.keyboard.press('${n}');`;case"selectAll":return"      await selectAll(page);";case"snapshot":return`      await assertHTMLSnapshot(page);
      await assertSelection(page, {
        anchorPath: [${n.anchorPath.toString()}],
        anchorOffset: ${n.anchorOffset},
        focusPath: [${n.focusPath.toString()}],
        focusOffset: ${n.focusOffset},
      });
`;case"type":return`      await page.keyboard.type('${n}');`;default:return""}})(t.name,t.value);switch(t.count){case 1:return o;case 2:return[o,o].join(`
`);default:return`      await repeat(${t.count}, async () => {
  ${o}
      );`}};function Pc(t){return t.key.toLowerCase()==="a"&&(mn?t.metaKey:t.ctrlKey)}function Bc(t){let{anchorNode:e,focusNode:o}=t,{anchorOffset:r,focusOffset:n}=t;return r!==0&&r--,n!==0&&n--,{anchorNode:e,anchorOffset:r,focusNode:o,focusOffset:n}}function fn(t,e){let o=t,r=[];for(;o!==e;)o!=null&&r.unshift(Array.from(o?.parentNode?.childNodes??[]).indexOf(o)),o=o?.parentNode;return r}var hn=new Set(["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Backspace","Delete","Enter","Escape"]);function Hc(t){let[e,o]=Jt([]),[r,n]=Jt(!1),[,l]=Jt(""),[i,s]=Jt(""),c=Oo(null),u=Oo(!1),d=Oo(null),a=$e(()=>t,[t]),p=$e(()=>{let k=t.getRootElement(),_=Do(t._window);return k==null||_==null||_.anchorNode==null||_.focusNode==null||!k.contains(_.anchorNode)||!k.contains(_.focusNode)?null:`
import {
  initializeE2E,
  assertHTMLSnapshot,
  assertSelection,
  repeat,
} from '../utils';
import {selectAll} from '../keyboardShortcuts';
import { RangeSelection } from 'lexical';
import { NodeSelection } from 'lexical';

describe('Test case', () => {
  initializeE2E((e2e) => {
    it('Should pass this test', async () => {
      const {page} = e2e;

      await page.focus('div[contenteditable="true"]');
${e.map(Fc).join(`
`)}
    });
});
    `},[t,e]),m=$e((k,_)=>{o(g=>{let S=e.length-1,M=e[S];if(M&&M.name===k){if(k==="type")return[...e.slice(0,S),{...M,value:M.value+_}];if(M.value===_)return[...e.slice(0,S),{...M,count:M.count+1}]}return[...g,{name:k,count:1,value:_}]})},[e,o]);pn(()=>{let k=g=>{if(!r)return;let S=g.key;Pc(g)?m("selectAll",""):hn.has(S)?m("press",g.key):[...S].length>1?m("keydown",g.key):m("type",g.key)},_=g=>{if(!r)return;let S=g.key;!hn.has(S)&&[...S].length>1&&m("keyup",g.key)};return t.registerRootListener((g,S)=>{S!==null&&(S.removeEventListener("keydown",k),S.removeEventListener("keyup",_)),g!==null&&(g.addEventListener("keydown",k),g.addEventListener("keyup",_))})},[t,r,m]),pn(()=>{d.current&&d.current.scrollTo(0,d.current.scrollHeight)},[p]),Ao(()=>{if(e){let k=p();k!==null&&s(k),d.current&&d.current.scrollTo(0,d.current.scrollHeight)}},[p,e]),Ao(()=>t.registerUpdateListener(({dirtyElements:_,dirtyLeaves:g,editorState:S})=>{if(!r)return;let M=S._selection,O=c.current,F=u.current;if(O!==M){if(g.size===0&&_.size===0&&!F){let T=Do(t._window);if(T&&(T.anchorNode==null||T.focusNode==null))return}c.current=M}u.current=!1;let I=p();I!==null&&s(I)}),[t,p,r,m]),Ao(()=>r?t.registerUpdateListener(()=>{let _=t.getRootElement();_!==null&&l(_?.innerHTML)}):void 0,[t,r]);let f=$e(k=>{r||(k.update(()=>{let _=Ac();_.clear();let g=Dc();_.append(Mc().append(g)),g.select()}),o([])),n(_=>!_)},[r]),h=$e(()=>{if(!r)return;let k=Do(t._window);if(k===null||k.anchorNode==null||k.focusNode==null)return;let{anchorNode:_,anchorOffset:g,focusNode:S,focusOffset:M}=Bc(k),O=a().getRootElement(),F;_!==null&&(F=fn(_,O));let I;S!==null&&(I=fn(S,O)),m("snapshot",{anchorNode:_,anchorOffset:g,anchorPath:F,focusNode:S,focusOffset:M,focusPath:I})},[m,r,a]),x=$e(()=>{Oc(p())},[p]),b=$e(()=>{$c("test.js",p())},[p]);return[Fe("button",{className:`editor-dev-button ${r?"active":""}`,id:"test-recorder-button",onClick:k=>{f(a()),k.preventDefault()},title:r?"Disable test recorder":"Enable test recorder",type:"button",children:r?"Disable test recorder":"Enable test recorder"}),r?$o("div",{className:"test-recorder-output",children:[$o("div",{className:"test-recorder-toolbar",children:[Fe("button",{className:"test-recorder-button",id:"test-recorder-button-snapshot",onClick:k=>{h(),k.preventDefault()},title:"Insert snapshot",type:"button",children:"Insert Snapshot"}),Fe("button",{className:"test-recorder-button",id:"test-recorder-button-copy",onClick:k=>{x(),k.preventDefault()},title:"Copy to clipboard",type:"button",children:"Copy"}),Fe("button",{className:"test-recorder-button",id:"test-recorder-button-download",onClick:k=>{b(),k.preventDefault()},title:"Download as a file",type:"button",children:"Download"})]}),Fe("pre",{id:"test-recorder",ref:d,children:i})]}):null]}var xn=()=>{let t=Rc(3),[e]=vc(),[o,r]=Hc(e),n;return t[0]!==o||t[1]!==r?(n=$o(gn.Fragment,{children:[Fe("p",{children:"HI"}),o,r,Fe("p",{children:"DONE"})]}),t[0]=o,t[1]=r,t[2]=n):n=t[2],n};var jc=y({plugins:[{Component:xn,position:"bottom"}]});import{c as Uc}from"react/compiler-runtime";import{jsx as Gc}from"react/jsx-runtime";import{useLexicalComposerContext as Wc}from"@lexical/react/LexicalComposerContext.js";import{TreeView as Vc}from"@lexical/react/LexicalTreeView.js";import"react";var Cn=()=>{let t=Uc(2),[e]=Wc(),o;return t[0]!==e?(o=Gc(Vc,{editor:e,timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",treeTypeButtonClassName:"debug-treetype-button",viewClassName:"tree-view-output"}),t[0]=e,t[1]=o):o=t[1],o};var Kc=y({plugins:[{Component:Cn,position:"bottom"}]});import{$isTableSelection as Jc}from"@lexical/table";import{$isRangeSelection as Xc,FORMAT_TEXT_COMMAND as zc}from"lexical";import{jsx as bn}from"react/jsx-runtime";import"react";var kn=()=>bn("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:bn("path",{d:"M10.6772 15H6.27017V5.718H10.4172C12.6792 5.718 13.8492 6.602 13.8492 8.292C13.8492 9.098 13.1992 9.982 12.4712 10.216C13.3812 10.476 14.1742 11.256 14.1742 12.322C14.1742 14.09 12.9002 15 10.6772 15ZM8.46717 9.501H10.3262C11.3012 9.501 11.7042 9.046 11.7042 8.409C11.7042 7.72 11.2362 7.317 10.3392 7.317H8.46717V9.501ZM8.46717 11.061V13.401H10.4822C11.4702 13.401 11.9642 12.959 11.9642 12.218C11.9642 11.49 11.4702 11.061 10.4822 11.061H8.46717Z",fill:"currentColor"})});var te=t=>({type:"buttons",items:t,key:"format",order:40});var _n={type:"text-format",format:["bold","italic"],tag:"***"},Tn={type:"text-format",format:["bold","italic"],intraword:!1,tag:"___"},wn={type:"text-format",format:["bold"],tag:"**"},En={type:"text-format",format:["bold"],intraword:!1,tag:"__"};var Nn=[te([{ChildComponent:kn,isActive:({selection:t})=>Xc(t)||Jc(t)?t.hasFormat("bold"):!1,key:"bold",onSelect:({editor:t})=>{t.dispatchCommand(zc,"bold")},order:1}])],Zc=y(({featureProviderMap:t})=>{let e=[wn,En];return t.get("italic")&&e.push(Tn,_n),{enableFormats:["bold"],markdownTransformers:e,toolbarFixed:{groups:Nn},toolbarInline:{groups:Nn}}});import{$isTableSelection as qc}from"@lexical/table";import{$isRangeSelection as Qc,FORMAT_TEXT_COMMAND as eu}from"lexical";import{jsx as Sn,jsxs as Yc}from"react/jsx-runtime";import"react";var Ln=()=>Yc("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Sn("path",{d:"M7.76465 6L3.76465 10L7.76465 14",stroke:"currentColor"}),Sn("path",{d:"M12.2354 6L16.2354 10L12.2354 14",stroke:"currentColor"})]});var yn={type:"text-format",format:["code"],tag:"`"};var In=[te([{ChildComponent:Ln,isActive:({selection:t})=>Qc(t)||qc(t)?t.hasFormat("code"):!1,key:"inlineCode",onSelect:({editor:t})=>{t.dispatchCommand(eu,"code")},order:7}])],tu=y({enableFormats:["code"],markdownTransformers:[yn],toolbarFixed:{groups:In},toolbarInline:{groups:In}});import{$isTableSelection as ou}from"@lexical/table";import{$isRangeSelection as ru,FORMAT_TEXT_COMMAND as nu}from"lexical";import{jsx as Rn}from"react/jsx-runtime";import"react";var vn=()=>Rn("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Rn("path",{d:"M11.311 14.2969L11.0327 15H6.18408L6.4624 14.2969C7.54639 14.2969 7.70752 14.209 7.83936 13.8721L10.8423 6.45996C10.8716 6.38672 10.8862 6.32812 10.8862 6.26953C10.8862 6.09375 10.6519 6.03516 9.80225 6.03516L10.0952 5.33203H14.9438L14.6509 6.03516C13.5669 6.03516 13.4204 6.12305 13.2886 6.45996L10.2856 13.8721C10.2563 13.9453 10.2271 14.0039 10.2271 14.0625C10.2271 14.2383 10.4614 14.2969 11.311 14.2969Z",fill:"currentColor"})});var Mn={type:"text-format",format:["italic"],tag:"*"},Dn={type:"text-format",format:["italic"],intraword:!1,tag:"_"};var An=[te([{ChildComponent:vn,isActive:({selection:t})=>ru(t)||ou(t)?t.hasFormat("italic"):!1,key:"italic",onSelect:({editor:t})=>{t.dispatchCommand(nu,"italic")},order:2}])],lu=y({enableFormats:["italic"],markdownTransformers:[Mn,Dn],toolbarFixed:{groups:An},toolbarInline:{groups:An}});import{$isTableSelection as su}from"@lexical/table";import{$isRangeSelection as au,FORMAT_TEXT_COMMAND as cu}from"lexical";import{jsx as On,jsxs as iu}from"react/jsx-runtime";import"react";var $n=()=>iu("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[On("path",{d:"M5.50756 12.76H7.42756C7.56256 14.215 8.82256 14.71 10.1576 14.71C11.4326 14.71 12.4226 14.14 12.4226 13.06C12.4226 12.28 11.9576 11.845 10.6676 11.605L8.70256 11.245C7.12756 10.96 5.85256 10.21 5.85256 8.335C5.85256 6.43 7.53256 5.11 9.87256 5.11C12.4226 5.11 13.9526 6.22 14.1626 8.23H12.2876C12.1526 7.18 11.2226 6.595 9.88756 6.595C8.59756 6.595 7.78756 7.27 7.78756 8.215C7.78756 9.1 8.34256 9.385 9.49756 9.61L11.5676 10.015C13.3226 10.345 14.3726 11.215 14.3726 12.94C14.3726 14.89 12.5876 16.18 10.2176 16.18C7.66756 16.18 5.70256 15.115 5.50756 12.76Z",fill:"currentColor"}),On("path",{d:"M4.99756 11.44H15.0026V12.19H4.99756V11.44Z",fill:"currentColor"})]});var Fn={type:"text-format",format:["strikethrough"],tag:"~~"};var Pn=[te([{ChildComponent:$n,isActive:({selection:t})=>au(t)||su(t)?t.hasFormat("strikethrough"):!1,key:"strikethrough",onSelect:({editor:t})=>{t.dispatchCommand(cu,"strikethrough")},order:4}])],uu=y({enableFormats:["strikethrough"],markdownTransformers:[Fn],toolbarFixed:{groups:Pn},toolbarInline:{groups:Pn}});import{$isTableSelection as du}from"@lexical/table";import{$isRangeSelection as mu,FORMAT_TEXT_COMMAND as pu}from"lexical";import{jsx as Bn}from"react/jsx-runtime";import"react";var Hn=()=>Bn("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Bn("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 13.258C16.7768 14.155 16.1398 14.532 15.2038 15C14.5538 15.325 14.2808 15.546 14.2418 15.78H16.7898V16.82H12.7208V16.339C12.7208 15.286 13.5918 14.675 14.3588 14.233C15.0868 13.83 15.4378 13.635 15.4378 13.232C15.4378 12.894 15.2038 12.686 14.8268 12.686C14.3848 12.686 14.1248 13.024 14.1118 13.427H12.7468C12.8248 12.426 13.5528 11.633 14.8398 11.633C15.9448 11.633 16.7768 12.257 16.7768 13.258Z",fill:"currentColor"})});var jn=[te([{ChildComponent:Hn,isActive:({selection:t})=>mu(t)||du(t)?t.hasFormat("subscript"):!1,key:"subscript",onSelect:({editor:t})=>{t.dispatchCommand(pu,"subscript")},order:5}])],fu=y({enableFormats:["subscript"],toolbarFixed:{groups:jn},toolbarInline:{groups:jn}});import{$isTableSelection as hu}from"@lexical/table";import{$isRangeSelection as gu,FORMAT_TEXT_COMMAND as xu}from"lexical";import{jsx as Un}from"react/jsx-runtime";import"react";var Gn=()=>Un("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Un("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 7.252C16.7768 8.149 16.1398 8.526 15.2038 8.994C14.5538 9.319 14.2808 9.54 14.2418 9.774H16.7898V10.814H12.7208V10.333C12.7208 9.28 13.5918 8.669 14.3588 8.227C15.0868 7.824 15.4378 7.629 15.4378 7.226C15.4378 6.888 15.2038 6.68 14.8268 6.68C14.3848 6.68 14.1248 7.018 14.1118 7.421H12.7468C12.8248 6.42 13.5528 5.627 14.8398 5.627C15.9448 5.627 16.7768 6.251 16.7768 7.252Z",fill:"currentColor"})});var Wn=[te([{ChildComponent:Gn,isActive:({selection:t})=>gu(t)||hu(t)?t.hasFormat("superscript"):!1,key:"superscript",onSelect:({editor:t})=>{t.dispatchCommand(xu,"superscript")},order:6}])],Cu=y({enableFormats:["superscript"],toolbarFixed:{groups:Wn},toolbarInline:{groups:Wn}});import{$isTableSelection as ku}from"@lexical/table";import{$isRangeSelection as _u,FORMAT_TEXT_COMMAND as Tu}from"lexical";import{jsx as Vn,jsxs as bu}from"react/jsx-runtime";import"react";var Kn=()=>bu("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Vn("path",{d:"M13.9656 11.256C13.9656 13.791 12.5096 15.156 10.0006 15.156C7.50461 15.156 6.03561 13.791 6.03561 11.23V5.718H7.76461V11.243C7.76461 12.868 8.50561 13.778 10.0006 13.778C11.4956 13.778 12.2496 12.868 12.2496 11.243V5.718H13.9656V11.256Z",fill:"currentColor"}),Vn("path",{d:"M5.09961 16.3H14.9016V16.95H5.09961V16.3Z",fill:"currentColor"})]});var Jn=[te([{ChildComponent:Kn,isActive:({selection:t})=>_u(t)||ku(t)?t.hasFormat("underline"):!1,key:"underline",onSelect:({editor:t})=>{t.dispatchCommand(Tu,"underline")},order:3}])],wu=y({enableFormats:["underline"],toolbarFixed:{groups:Jn},toolbarInline:{groups:Jn}});import{jsx as Bo}from"react/jsx-runtime";import{jsx as Eu}from"react/jsx-runtime";function Nu(t){return t.replace(/-([a-z])/g,(e,o)=>o.toUpperCase())}var Xt=({css:t})=>{let e=t?Object.fromEntries(Object.entries(t).map(([o,r])=>[Nu(o),r])):{};return Eu("span",{style:{...e,alignItems:"center",borderRadius:"4px",display:"flex",fontSize:"16px",height:"20px",justifyContent:"center",width:"20px"},children:"A"})};import{useLexicalComposerContext as Su}from"@lexical/react/LexicalComposerContext";import{$forEachSelectedTextNode as Lu}from"@lexical/selection";import{$getNodeByKey as yu,$getState as Iu,$setState as Ru,createState as vu,TextNode as Mu}from"lexical";import{useEffect as Du}from"react";var Fo=new Map;function Xn(t){for(let e in t){let o=t[e],r=vu(e,{parse:n=>typeof n=="string"&&Object.keys(o).includes(n)?n:void 0});Fo.set(e,{stateConfig:r,stateValues:o})}}function Po(t,e,o){t.update(()=>{Lu(r=>{let n=Fo.get(e);if(!n)throw new Error(`State config for ${e} not found`);Ru(r,n.stateConfig,o)})})}function zn(){let[t]=Su();return Du(()=>t.registerMutationListener(Mu,e=>{t.getEditorState().read(()=>{for(let[o,r]of e){if(r==="destroyed")continue;let n=yu(o),l=t.getElementByKey(o);if(!n||!l)continue;let i=Object.create(null);Fo.forEach((s,c)=>{let u=Iu(n,s.stateConfig);if(!u){delete l.dataset[c];return}l.dataset[c]=u;let d=s.stateValues[u]?.css;d&&Object.assign(i,d)}),l.style.cssText="",Object.assign(l.style,i)}})}),[t]),null}var Zn=t=>{let e=[];for(let r in t.state){let n=t.state[r];for(let l in n){let i=n[l];e.push({ChildComponent:()=>Bo(Xt,{css:i.css}),key:l,label:i.label,onSelect:({editor:s})=>{Po(s,r,l)}})}}return[{type:"dropdown",ChildComponent:()=>Bo(Xt,{css:{color:"var(--theme-elevation-600)"}}),items:[...[{ChildComponent:()=>Bo(Xt,{}),key:"clear-style",label:"Default style",onSelect:({editor:r})=>{for(let n in t.state)Po(r,n,void 0)},order:1}],...e],key:"textState",order:30}]},Au=y(({props:t})=>(Xn(t.state),{plugins:[{Component:zn,position:"normal"}],toolbarFixed:{groups:Zn(t)},toolbarInline:{groups:Zn(t)}}));import{$createHeadingNode as Pu,$isHeadingNode as ul,HeadingNode as Bu}from"@lexical/rich-text";import{$setBlocksType as Hu}from"@lexical/selection";import{$getSelection as ju,$isRangeSelection as Uu}from"lexical";import{jsx as Yn}from"react/jsx-runtime";import"react";var qn=()=>Yn("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Yn("path",{d:"M4.639 13.5V7.074H6.196V9.648H9.076V7.074H10.642V13.5H9.076V10.836H6.196V13.5H4.639ZM11.5656 9.045V8.019C12.6636 8.019 13.1316 7.731 13.2846 7.065H14.4006V13.5H12.8436V9.045H11.5656Z",fill:"currentColor"})});import{jsx as Qn}from"react/jsx-runtime";import"react";var el=()=>Qn("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:Qn("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM15.9796 8.973C15.9796 10.116 15.1696 10.656 14.0356 11.232C13.2256 11.646 12.8206 11.943 12.7846 12.294H15.9886V13.5H11.0566V12.951C11.0566 11.601 12.1636 10.845 13.1176 10.287C14.0356 9.756 14.5126 9.486 14.5126 8.946C14.5126 8.46 14.2156 8.145 13.6306 8.145C13.0186 8.145 12.6586 8.613 12.6226 9.198H11.1196C11.2186 7.947 12.1006 6.966 13.6396 6.966C15.0346 6.966 15.9796 7.785 15.9796 8.973Z",fill:"currentColor"})});import{jsx as tl}from"react/jsx-runtime";import"react";var ol=()=>tl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:tl("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM16.1146 11.745C16.1146 12.744 15.2236 13.608 13.6126 13.608C12.0736 13.608 11.0926 12.762 10.9846 11.547H12.4696C12.5146 12.114 13.0006 12.456 13.6126 12.456C14.2876 12.456 14.6746 12.132 14.6746 11.619C14.6746 11.061 14.2426 10.836 13.6216 10.836H12.9826V9.738H13.6036C14.1526 9.738 14.5486 9.486 14.5486 8.937C14.5486 8.46 14.2156 8.127 13.6486 8.127C13.0366 8.127 12.6586 8.514 12.6226 9.045H11.1916C11.2726 7.929 12.1276 6.966 13.6666 6.966C15.1876 6.966 15.9706 7.848 15.9706 8.865C15.9706 9.603 15.5026 10.143 14.8186 10.269C15.6196 10.404 16.1146 10.971 16.1146 11.745Z",fill:"currentColor"})});import{jsx as rl}from"react/jsx-runtime";import"react";var nl=()=>rl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:rl("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM15.1736 7.074V10.854H16.3706V12.033H15.1736V13.5H13.6796V12.033H10.5116V10.845L13.4996 7.074H15.1736ZM13.6796 8.46L11.8256 10.854H13.6796V8.46Z",fill:"currentColor"})});import{jsx as ll}from"react/jsx-runtime";import"react";var il=()=>ll("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:ll("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.1576 10.269C12.6896 10.269 12.3746 10.494 12.2216 10.737H10.8176L11.1956 7.074H15.2546V8.28H12.3206L12.1856 9.549C12.4016 9.351 12.8516 9.126 13.4636 9.126C14.7866 9.126 15.6596 10.053 15.6596 11.358C15.6596 12.609 14.7326 13.608 13.1756 13.608C11.5826 13.608 10.6556 12.753 10.5566 11.511H12.1136C12.1586 12.06 12.5456 12.465 13.1576 12.465C13.8236 12.465 14.1746 11.97 14.1746 11.376C14.1746 10.764 13.8416 10.269 13.1576 10.269Z",fill:"currentColor"})});import{jsx as sl}from"react/jsx-runtime";import"react";var al=()=>sl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:sl("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.3646 8.127C12.5456 8.127 12.0416 8.937 12.0416 9.999C12.3296 9.54 12.8246 9.207 13.5536 9.207C14.8586 9.207 15.8036 10.134 15.8036 11.376C15.8036 12.645 14.8226 13.608 13.3196 13.608C11.7266 13.608 10.6196 12.393 10.6196 10.395C10.6196 8.316 11.7716 6.966 13.4186 6.966C14.7056 6.966 15.5786 7.749 15.7316 8.829H14.3186C14.2016 8.415 13.9226 8.127 13.3646 8.127ZM13.3106 12.51C13.9586 12.51 14.3816 12.042 14.3816 11.385C14.3816 10.737 13.9586 10.278 13.3106 10.278C12.6536 10.278 12.2126 10.737 12.2126 11.385C12.2126 12.042 12.6536 12.51 13.3106 12.51Z",fill:"currentColor"})});import{$createHeadingNode as Ou,$isHeadingNode as $u,HeadingNode as Fu}from"@lexical/rich-text";var Ho=t=>(e,o,r)=>{let n=t(r);n&&(n.append(...o),e.replace(n),n.select(0,0))};var cl=t=>{let o=`^(${t.map(n=>Number(n.slice(1))).map(n=>`#{${n}}`).join("|")})\\s`,r=new RegExp(o);return{type:"element",dependencies:[Fu],export:(n,l)=>{if(!$u(n))return null;let i=Number(n.getTag().slice(1));return"#".repeat(i)+" "+l(n)},regExp:r,replace:Ho(n=>{let l="h"+n[1]?.length;return Ou(l)})}};var dl=t=>{let e=ju();Hu(e,()=>Pu(t))},ml={h1:qn,h2:el,h3:ol,h4:nl,h5:il,h6:al},Gu=y(({props:t})=>{let{enabledHeadingSizes:e=["h1","h2","h3","h4","h5","h6"]}=t,o=[le(e.map((r,n)=>({ChildComponent:ml[r],isActive:({selection:l})=>{if(!Uu(l))return!1;for(let i of l.getNodes()){if(ul(i)&&i.getTag()===r)continue;let s=i.getParent();if(!(ul(s)&&s.getTag()===r))return!1}return!0},key:r,label:({i18n:l})=>l.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:l})=>{l.update(()=>{dl(r)})},order:n+2})))];return{markdownTransformers:[cl(e)],nodes:[Bu],sanitizedClientFeatureProps:t,slashMenu:{groups:e?.length?[ee(e.map(r=>({Icon:ml[r],key:`heading-${r.charAt(1)}`,keywords:["heading",r],label:({i18n:n})=>n.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:n})=>{n.update(()=>{dl(r)})}})))]:[]},toolbarFixed:{groups:e?.length?o:[]},toolbarInline:{groups:e?.length?o:[]}}});import{$isNodeSelection as ld}from"lexical";import{jsx as pl}from"react/jsx-runtime";import"react";var jo=()=>pl("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:pl("rect",{fill:"currentColor",height:"1",width:"12",x:"4",y:"9.5"})});import{jsx as fl,jsxs as Wu}from"react/jsx-runtime";import"react";var hl=()=>Wu("svg",{fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[fl("path",{d:"M5 10h10",stroke:"currentColor"}),fl("path",{d:"M10 15V5",stroke:"currentColor"})]});var ke=t=>({type:"dropdown",ChildComponent:hl,items:t,key:"add",order:10});import{addClassNamesToElement as Vu}from"@lexical/utils";import{$applyNodeReplacement as Ku,createCommand as Ju,DecoratorNode as Xu}from"lexical";var gt=Ju("INSERT_HORIZONTAL_RULE_COMMAND"),ht=class extends Xu{static clone(e){return new this(e.__key)}static getType(){return"horizontalrule"}static importDOM(){return{hr:()=>({conversion:zu,priority:0})}}static importJSON(e){return gl()}createDOM(e){let o=document.createElement("hr");return Vu(o,e.theme.hr),o}decorate(){return null}exportDOM(){return{element:document.createElement("hr")}}exportJSON(){return{type:"horizontalrule",version:1}}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function zu(){return{node:gl()}}function gl(){return Ku(new ht)}import{$applyNodeReplacement as Zu}from"lexical";import"react";var ve=class extends ht{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importJSON(e){return xt()}decorate(){return null}exportJSON(){return super.exportJSON()}};function xt(){return Zu(new ve)}function zt(t){return t instanceof ve}var xl={type:"element",dependencies:[ve],export:(t,e)=>zt(t)?"---":null,regExp:/^---\s*$/,replace:t=>{let e=xt();e&&t.replace(e)}};import{c as Yu}from"react/compiler-runtime";import{useLexicalComposerContext as qu}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as Qu}from"@lexical/utils";import{$getSelection as ed,$isRangeSelection as td,COMMAND_PRIORITY_EDITOR as od}from"lexical";import{useEffect as rd}from"react";var Cl=()=>{let t=Yu(3),[e]=qu(),o,r;return t[0]!==e?(o=()=>e.registerCommand(gt,nd,od),r=[e],t[0]=e,t[1]=o,t[2]=r):(o=t[1],r=t[2]),rd(o,r),null};function nd(t){let e=ed();if(!td(e))return!1;if(e.focus.getNode()!==null){let r=xt();Qu(r)}return!0}var id=y({markdownTransformers:[xl],nodes:[ve],plugins:[{Component:Cl,position:"normal"}],slashMenu:{groups:[ee([{Icon:jo,key:"horizontalRule",keywords:["hr","horizontal rule","line","separator"],label:({i18n:t})=>t.t("lexical:horizontalRule:label"),onSelect:({editor:t})=>{t.dispatchCommand(gt,void 0)}}])]},toolbarFixed:{groups:[ke([{ChildComponent:jo,isActive:({selection:t})=>{if(!ld(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return zt(e)},key:"horizontalRule",label:({i18n:t})=>t.t("lexical:horizontalRule:label"),onSelect:({editor:t})=>{t.dispatchCommand(gt,void 0)}}])]}});import{$findMatchingParent as yl}from"@lexical/utils";import{$isElementNode as bd,INDENT_CONTENT_COMMAND as kd,OUTDENT_CONTENT_COMMAND as _d}from"lexical";import{jsx as Zt,jsxs as sd}from"react/jsx-runtime";import"react";var bl=()=>sd("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Zt("path",{d:"M2.5 5H10.5",stroke:"currentColor",strokeWidth:"1.5"}),Zt("path",{d:"M2.5 10H10.5",stroke:"currentColor",strokeWidth:"1.5"}),Zt("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"}),Zt("path",{d:"M12.25 7.25L17.25 3.75V10.75L12.25 7.25Z",fill:"currentColor"})]});import{jsx as Yt,jsxs as ad}from"react/jsx-runtime";import"react";var kl=()=>ad("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Yt("path",{d:"M17.5 5H9.5",stroke:"currentColor",strokeWidth:"1.5"}),Yt("path",{d:"M17.5 10H9.5",stroke:"currentColor",strokeWidth:"1.5"}),Yt("path",{d:"M17.5 15H2.5",stroke:"currentColor",strokeWidth:"1.5"}),Yt("path",{d:"M7.75 7.25L2.75 3.75V10.75L7.75 7.25Z",fill:"currentColor"})]});import{jsx as cd}from"react/jsx-runtime";import{useLexicalComposerContext as ud}from"@lexical/react/LexicalComposerContext";import{TabIndentationPlugin as dd}from"@lexical/react/LexicalTabIndentationPlugin";import{$findMatchingParent as md,mergeRegister as _l}from"@lexical/utils";import{$getSelection as pd,$isElementNode as Nl,$isRangeSelection as fd,COMMAND_PRIORITY_LOW as Tl,INDENT_CONTENT_COMMAND as wl,KEY_TAB_COMMAND as hd,OUTDENT_CONTENT_COMMAND as gd,TabNode as xd}from"lexical";import{useEffect as El}from"react";var Sl=({clientProps:t})=>{let[e]=ud(),{disabledNodes:o,disableTabNode:r}=t;return El(()=>{if(!(!e||!o?.length))return _l(e.registerCommand(wl,()=>Cd(n=>{if(!o.includes(n.getType())){let l=n.getIndent();n.setIndent(l+1)}}),Tl),e.registerUpdateListener(({dirtyElements:n,editorState:l})=>{e.update(()=>{for(let[i]of n){let s=l._nodeMap.get(i);Nl(s)&&o.includes(s.getType())&&s.getIndent()>0&&s.setIndent(0)}})}))},[e,o]),El(()=>{if(!(!e||!r))return _l(e.registerCommand(hd,n=>(n.preventDefault(),e.dispatchCommand(n.shiftKey?gd:wl,void 0)),Tl),e.registerNodeTransform(xd,n=>{n.remove()}))},[e,r]),cd(dd,{})};function Cd(t){let e=pd();if(!fd(e))return!1;let o=new Set,r=e.getNodes();for(let n=0;n<r.length;n++){let l=r[n],i=l.getKey();if(o.has(i))continue;let s=md(l,u=>Nl(u)&&!u.isInline());if(s===null)continue;let c=s.getKey();s.canIndent()&&!o.has(c)&&(o.add(c),t(s))}return o.size>0}var Ll=t=>({type:"buttons",items:t,key:"indent",order:35});var Il=({disabledNodes:t})=>[Ll([{ChildComponent:bl,isActive:()=>!1,isEnabled:({selection:e})=>{let o=e?.getNodes()??[],r=n=>Rl(n)&&n.getIndent()>0;return o.some(n=>r(n)||!!yl(n,r))},key:"indentDecrease",label:({i18n:e})=>e.t("lexical:indent:decreaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(_d,void 0)},order:1},{ChildComponent:kl,isActive:()=>!1,isEnabled:({selection:e})=>{let o=e?.getNodes()??[],r=n=>Rl(n)&&!(t??[]).includes(n.getType());return o.some(n=>r(n)||!!yl(n,r))},key:"indentIncrease",label:({i18n:e})=>e.t("lexical:indent:increaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(kd,void 0)},order:2}])],Td=y(({props:t})=>{let e=t.disabledNodes??[];return{plugins:[{Component:Sl,position:"normal"}],sanitizedClientFeatureProps:t,toolbarFixed:{groups:Il({disabledNodes:e})},toolbarInline:{groups:Il({disabledNodes:e})}}}),Rl=t=>bd(t)&&t.canIndent();import{$findMatchingParent as Am}from"@lexical/utils";import{$getSelection as Zo,$isRangeSelection as si}from"lexical";import{jsx as vl}from"react/jsx-runtime";import"react";var Ml=()=>vl("svg",{"aria-hidden":"true",className:"icon",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:vl("path",{d:"M8.5 11.5L11.5 8.5M8.5 7L9.625 5.875C10.868 4.633 12.882 4.633 14.125 5.875C15.368 7.118 15.368 9.133 14.125 10.375L13 11.5M7 8.5L5.746 9.754C4.56 10.94 4.519 12.85 5.652 14.087C6.814 15.354 8.78 15.449 10.058 14.298L11.5 13",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})});import{$isAtNodeEnd as Dl}from"@lexical/selection";function ze(t){let{anchor:e}=t,{focus:o}=t,r=t.anchor.getNode(),n=t.focus.getNode();return r===n?r:t.isBackward()?Dl(o)?r:n:Dl(e)?r:n}var Uo=t=>({type:"buttons",items:t,key:"features",order:50});import{$createTextNode as Dd}from"lexical";import{addClassNamesToElement as wd,isHTMLAnchorElement as Ed}from"@lexical/utils";import Vo from"bson-objectid";import{$applyNodeReplacement as Nd,$createTextNode as Al,$getSelection as Sd,$isElementNode as Ol,$isRangeSelection as Wo,createCommand as Ld,ElementNode as yd}from"lexical";var Id=new Set(["http:","https:","mailto:","sms:","tel:"]),ie=class t extends yd{__fields;__id;constructor({id:e,fields:o={linkType:"custom",newTab:!1},key:r}){super(r),this.__fields=o,this.__id=e}static clone(e){return new t({id:e.__id,fields:e.__fields,key:e.__key})}static getType(){return"link"}static importDOM(){return{a:e=>({conversion:Rd,priority:1})}}static importJSON(e){let o=_e({}).updateFromJSON(e);return e.version===1&&typeof e.fields?.doc?.value=="object"&&e.fields?.doc?.value?.id&&(e.fields.doc.value=e.fields.doc.value.id,e.version=2),e.version===2&&!e.id&&(e.id=new Vo.default().toHexString(),e.version=3),o}canBeEmpty(){return!1}canInsertTextAfter(){return!1}canInsertTextBefore(){return!1}createDOM(e){let o=document.createElement("a");return this.__fields?.linkType==="custom"&&(o.href=this.sanitizeUrl(this.__fields.url??"")),(this.__fields?.newTab??!1)&&(o.target="_blank"),this.__fields?.newTab===!0&&this.__fields?.linkType==="custom"&&(o.rel=Go(o.rel,"add","noopener")),wd(o,e.theme.link),o}exportJSON(){let e=this.getFields();e?.linkType==="internal"?delete e.url:e?.linkType==="custom"&&delete e.doc;let o={...super.exportJSON(),type:"link",fields:e,version:3},r=this.getID();return r&&(o.id=r),o}extractWithChild(e,o,r){if(!Wo(o))return!1;let n=o.anchor.getNode(),l=o.focus.getNode();return this.isParentOf(n)&&this.isParentOf(l)&&o.getTextContent().length>0}getFields(){return this.getLatest().__fields}getID(){return this.getLatest().__id}insertNewAfter(e,o=!0){let r=this.getParentOrThrow().insertNewAfter(e,o);if(Ol(r)){let n=_e({fields:this.__fields});return r.append(n),n}return null}isInline(){return!0}sanitizeUrl(e){try{let o=new URL(e);if(!Id.has(o.protocol))return"about:blank"}catch{return"https://"}return e}setFields(e){let o=this.getWritable();return o.__fields=e,o}setID(e){let o=this.getWritable();return o.__id=e,o}updateDOM(e,o,r){let n=this.__fields?.url,l=this.__fields?.newTab;return n!=null&&n!==e.__fields?.url&&this.__fields?.linkType==="custom"&&(o.href=n),this.__fields?.linkType==="internal"&&e.__fields?.linkType==="custom"&&o.removeAttribute("href"),o.rel==null&&(o.rel=""),l!==e.__fields?.newTab&&(l??!1?(o.target="_blank",this.__fields?.linkType==="custom"&&(o.rel=Go(o.rel,"add","noopener"))):(o.removeAttribute("target"),o.rel=Go(o.rel,"remove","noopener"))),!1}updateFromJSON(e){return super.updateFromJSON(e).setFields(e.fields).setID(e.id)}};function Rd(t){let e=null;if(Ed(t)){let o=t.textContent;o!==null&&o!==""&&(e=_e({id:new Vo.default().toHexString(),fields:{doc:null,linkType:"custom",newTab:t.getAttribute("target")==="_blank",url:t.getAttribute("href")??""}}))}return{node:e}}function _e({id:t,fields:e}){return Nd(new ie({id:t??new Vo.default().toHexString(),fields:e}))}function Z(t){return t instanceof ie}var he=Ld("TOGGLE_LINK_COMMAND");function Ko(t){let e=Sd();if(!Wo(e)&&(t===null||!t.selectedNodes?.length))return;let o=Wo(e)?e.extract():t===null?[]:t.selectedNodes;if(t===null){o?.forEach(l=>{let i=l.getParent();Z(i)&&(i.getChildren().forEach(c=>{i.insertBefore(c)}),i.remove())});return}if(o?.length===1){let l=o[0],i=Z(l)?l:vd(l);if(i!==null){i.setFields(t.fields),t.text!=null&&t.text!==i.getTextContent()&&(i.append(Al(t.text)),i.getChildren().forEach(s=>{s!==i.getLastChild()&&s.remove()}));return}}let r=null,n=null;o?.forEach(l=>{let i=l.getParent();if(!(i===n||i===null||Ol(l)&&!l.isInline())){if(Z(i)){n=i,i.setFields(t.fields),t.text!=null&&t.text!==i.getTextContent()&&(i.append(Al(t.text)),i.getChildren().forEach(s=>{s!==i.getLastChild()&&s.remove()}));return}if(i.is(r)||(r=i,n=_e({fields:t.fields}),Z(i)?l.getPreviousSibling()===null?i.insertBefore(n):i.insertAfter(n):l.insertBefore(n)),Z(l)){if(l.is(n))return;if(n!==null){let s=l.getChildren();n.append(...s)}l.remove();return}n!==null&&n.append(l)}})}function vd(t){return Md(t,e=>Z(e))}function Md(t,e){let o=t;for(;o!==null&&(o=o.getParent(),!(o===null||e(o))););return o}function Go(t,e,o){let r,n=`${t}`;if(e==="add"){if(n.includes(o)){let l=new RegExp(o,"g");n=n.replace(l,"").trim()}n=n.trim(),r=n.length===0?`${o}`:`${n} ${o}`}else{let l=new RegExp(o,"g");r=n.replace(l,"").trim()}return r}var $l={type:"text-match",dependencies:[ie],export:(t,e)=>{if(!Z(t))return null;let o=t,{url:r}=o.getFields();return`[${e(o)}](${r})`},importRegExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)/,regExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)$/,replace:(t,e)=>{let[,o,r]=e,n=_e({fields:{doc:null,linkType:"custom",newTab:!1,url:r}}),l=Dd(o);return l.setFormat(t.getFormat()),n.append(l),t.replace(n),l},trigger:")"};import{$applyNodeReplacement as Ad,$isElementNode as Od}from"lexical";var Te=class t extends ie{static clone(e){return new t({id:"",fields:e.__fields,key:e.__key})}static getType(){return"autolink"}static importDOM(){return null}static importJSON(e){let o=Ct({}).updateFromJSON(e);return e.version===1&&typeof e.fields?.doc?.value=="object"&&e.fields?.doc?.value?.id&&(e.fields.doc.value=e.fields.doc.value.id,e.version=2),o}exportJSON(){let e=super.exportJSON();return{type:"autolink",children:e.children,direction:e.direction,fields:e.fields,format:e.format,indent:e.indent,version:2}}insertNewAfter(e,o=!0){let r=this.getParentOrThrow().insertNewAfter(e,o);if(Od(r)){let n=Ct({fields:this.__fields});return r.append(n),n}return null}updateFromJSON(e){return super.updateFromJSON(e).setFields(e.fields)}};function Ct({fields:t}){return Ad(new Te({id:"",fields:t}))}function we(t){return t instanceof Te}import{c as $d}from"react/compiler-runtime";import{useLexicalComposerContext as Fd}from"@lexical/react/LexicalComposerContext.js";import{mergeRegister as Pd}from"@lexical/utils";import{$createTextNode as Fl,$getSelection as Bd,$isElementNode as Bl,$isLineBreakNode as Hl,$isNodeSelection as Hd,$isRangeSelection as jd,$isTextNode as bt,TextNode as Ud}from"lexical";import{useEffect as Gd}from"react";function Pl(t,e=o=>o){return o=>{let r=t.exec(o);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:e(r[0])}}}function jl(t,e){for(let o of e){let r=o(t);if(r!=null)return r}return null}var Wd=/[.,;\s]/;function Qt(t){return t!==void 0&&Wd.test(t)}function Ul(t){return Qt(t[t.length-1])}function Xo(t){return Qt(t[0])}function Vd(t,e){return e?/^\.[a-z]{2,}/i.test(t):/^\.[a-z0-9]+/i.test(t)}function Gl(t){let e=t.getPreviousSibling();return Bl(e)&&(e=e.getLastDescendant()),e===null||Hl(e)||bt(e)&&Ul(e.getTextContent())}function Wl(t){let e=t.getNextSibling();return Bl(e)&&(e=e.getFirstDescendant()),e===null||Hl(e)||bt(e)&&Xo(e.getTextContent())}function Kd(t,e,o,r){return(t>0?Qt(o[t-1]):Gl(r[0]))?e<o.length?Qt(o[e]):Wl(r[r.length-1]):!1}function Jd(t,e,o){let r=[],n=[],l=[],i=0,s=0,c=[...t];for(;c.length>0;){let u=c[0],a=u.getTextContent().length,p=s;s+a<=e?(r.push(u),i+=a):p>=o?l.push(u):n.push(u),s+=a,c.shift()}return[i,r,n,l]}function Xd(t,e,o,r){let n={linkType:"custom",url:r.url,...r.fields},l=Ct({fields:n});if(t.length===1){let i=t[0],s;if(e===0?[s]=i.splitText(o):[,s]=i.splitText(e,o),s){let c=Fl(r.text);c.setFormat(s.getFormat()),c.setDetail(s.getDetail()),c.setStyle(s.getStyle()),l.append(c),s.replace(l)}return i}else if(t.length>1){let i=t[0],s=i.getTextContent().length,c;e===0?c=i:[,c]=i.splitText(e);let u=[],d;if(t.forEach(a=>{let m=a.getTextContent().length,f=s,h=s+m;if(f<o)if(h<=o)u.push(a);else{let[x,b]=a.splitText(o-f);x&&u.push(x),d=b}s+=m}),c){let a=Bd(),p=a?a.getNodes().find(bt):void 0,m=Fl(c.getTextContent());return m.setFormat(c.getFormat()),m.setDetail(c.getDetail()),m.setStyle(c.getStyle()),l.append(m,...u),p&&p===c&&(jd(a)?m.select(a.anchor.offset,a.focus.offset):Hd(a)&&m.select(0,m.getTextContent().length)),c.replace(l),d}}}function zd(t,e,o){let r=[...t],n=r.map(c=>c.getTextContent()).join(""),l=n,i,s=0;for(;(i=jl(l,e))!=null&&i!==null;){let c=i.index,u=i.length,d=c+u;if(Kd(s+c,s+d,n,r)){let[p,,m,f]=Jd(r,s+c,s+d),h=s+c-p,x=s+d-p,b=Xd(m,h,x,i);r=b?[b,...f]:f,o(i.url,null),s=0}else s+=d;l=l.substring(d)}}function Jo(t,e,o){let r=t.getChildren(),n=r.length;for(let c=0;c<n;c++){let u=r[c];if(!bt(u)||!u.isSimpleText()){qt(t),o(null,t.getFields()?.url??null);return}}let l=t.getTextContent(),i=jl(l,e);if(i===null||i.text!==l){qt(t),o(null,t.getFields()?.url??null);return}if(!Gl(t)||!Wl(t)){qt(t),o(null,t.getFields()?.url??null);return}let s=t.getFields()?.url;if(s!==i?.url){let c=t.getFields();c.url=i?.url,t.setFields(c),o(i.url,s??null)}}function Zd(t,e,o){let r=t.getPreviousSibling(),n=t.getNextSibling(),l=t.getTextContent();if(we(r)){let i=r.getFields()?.url?r.getFields()?.url?.startsWith("mailto:")??!1:!1;(!Xo(l)||Vd(l,i))&&(r.append(t),Jo(r,e,o),o(null,r.getFields()?.url??null))}we(n)&&!Ul(l)&&(qt(n),Jo(n,e,o),o(null,n.getFields()?.url??null))}function qt(t){let e=t.getChildren(),o=e.length;for(let r=o-1;r>=0;r--)t.insertAfter(e[r]);return t.remove(),e.map(r=>r.getLatest())}function Yd(t){let e=[t],o=t.getNextSibling();for(;o!==null&&bt(o)&&o.isSimpleText()&&(e.push(o),!/\s/.test(o.getTextContent()));)o=o.getNextSibling();return e}function qd(t,e,o){let r=$d(5),n,l;r[0]!==t||r[1]!==e||r[2]!==o?(n=()=>{if(!t.hasNodes([Te]))throw new Error("LexicalAutoLinkPlugin: AutoLinkNode not registered on editor");let i=(s,c)=>{o?.(s,c)};return Pd(t.registerNodeTransform(Ud,s=>{let c=s.getParentOrThrow(),u=s.getPreviousSibling();if(we(c))Jo(c,e,i);else if(!Z(c)){if(s.isSimpleText()&&(Xo(s.getTextContent())||!we(u))){let d=Yd(s);zd(d,e,i)}Zd(s,e,i)}}))},l=[t,e,o],r[0]=t,r[1]=e,r[2]=o,r[3]=n,r[4]=l):(n=r[3],l=r[4]),Gd(n,l)}var Qd=/((https?:\/\/(www\.)?)|(www\.))[-\w@:%.+~#=]{1,256}\.[a-zA-Z\d()]{1,6}\b([-\w()@:%+.~#?&/=]*)(?<![-.+():%])/,em=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-z\-\d]+\.)+[a-z]{2,}))/i,tm=[Pl(Qd,t=>t.startsWith("http")?t:`https://${t}`),Pl(em,t=>`mailto:${t}`)],Vl=()=>{let[t]=Fd();return qd(t,tm),null};import{jsx as om}from"react/jsx-runtime";import{ClickableLinkPlugin as rm}from"@lexical/react/LexicalClickableLinkPlugin.js";import"react";var Kl=()=>om(rm,{});import{jsx as _m}from"react/jsx-runtime";import"react";import{createPortal as Tm}from"react-dom";import{jsx as Ee,jsxs as kt,Fragment as lm}from"react/jsx-runtime";import{useLexicalComposerContext as im}from"@lexical/react/LexicalComposerContext.js";import{$findMatchingParent as Jl,mergeRegister as Xl}from"@lexical/utils";import{getTranslation as zo}from"@payloadcms/translations";import{CloseMenuIcon as sm,EditIcon as am,ExternalLinkIcon as zl,formatDrawerSlug as cm,useConfig as um,useEditDepth as dm,useLocale as mm,useTranslation as pm}from"@payloadcms/ui";import{requests as fm}from"@payloadcms/ui/shared";import{$getSelection as Zl,$isLineBreakNode as hm,$isRangeSelection as Yl,COMMAND_PRIORITY_HIGH as gm,COMMAND_PRIORITY_LOW as ql,getDOMSelection as xm,KEY_ESCAPE_COMMAND as Cm,SELECTION_CHANGE_COMMAND as bm}from"lexical";import Ql,{useCallback as ei,useEffect as oo,useRef as km,useState as Pe}from"react";function eo(t,e,o,r=10,n=5){let l=o.parentElement;if(t===null||l==null){e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)";return}let i=e.getBoundingClientRect(),s=o.getBoundingClientRect(),c=l.getBoundingClientRect(),u=t.top-r,d=t.left-n;u<c.top&&(u+=i.height+t.height+r*2),d+i.width>c.right&&(d=c.right-i.width-n),u-=s.top,d-=s.left,e.style.opacity="1",e.style.transform=`translate(${d}px, ${u}px)`}import{createCommand as nm}from"lexical";var to=nm("TOGGLE_LINK_WITH_MODAL_COMMAND");function ti(t){t.preventDefault()}function oi({anchorElem:t}){let[e]=im(),[o,r]=Pe(),n=km(null),[l,i]=Pe(null),[s,c]=Pe(null),{fieldProps:{schemaPath:u},uuid:d}=j(),{config:a,getEntityConfig:p}=um(),{i18n:m,t:f}=pm(),[h,x]=Pe(),b=dm(),[N,D]=Pe(!1),[k,_]=Pe([]),g=mm(),[S,M]=Pe(!1),O=cm({slug:"lexical-rich-text-link-"+d,depth:b}),{toggleDrawer:F}=xe(O),I=ei(()=>{D(!1),n&&n.current&&(n.current.style.opacity="0",n.current.style.transform="translate(-10000px, -10000px)"),M(!1),i(null),c(null),_([]),x(void 0)},[D,i,c,_]),T=ei(()=>{let C=Zl(),E;if(!Yl(C)||!C){I();return}let R=ze(C);E=e.getElementByKey(R.getKey())?.getBoundingClientRect();let L=Jl(R,Z),v=C.getNodes().filter(V=>!hm(V)).find(V=>{let U=Jl(V,Z);return L&&!L.is(U)||U&&!U.is(L)});if(L==null||v){I();return}r(L);let w=L.getFields(),$={...w,id:L.getID(),text:L.getTextContent()};if(w?.linkType==="custom")i(w?.url??null),c(null);else{i(`${a.routes.admin==="/"?"":a.routes.admin}/collections/${w?.doc?.relationTo}/${w?.doc?.value}`);let V=w?.doc?.relationTo?p({collectionSlug:w?.doc?.relationTo}):void 0;if(!V)c(w?.label?String(w?.label):null),i(w?.url?String(w?.url):null);else{let U=typeof w.doc?.value=="object"?w.doc.value.id:w.doc?.value,oe=w.doc?.relationTo;if(!U||!oe)throw new Error("Focus link parent is missing doc.value or doc.relationTo");let ue=f("fields:linkedTo",{label:`${zo(V.labels.singular,m)} - ${f("lexical:link:loadingWithEllipsis",m)}`}).replace(/<[^>]*>?/g,"");c(ue),fm.get(`${a.serverURL}${a.routes.api}/${oe}/${U}`,{headers:{"Accept-Language":m.language},params:{depth:0,locale:g?.code}}).then(async q=>{if(!q.ok)throw new Error(`HTTP error! Status: ${q.status}`);let K=await q.json(),re=V?.admin?.useAsTitle||"id",ne=K[re],se=f("fields:linkedTo",{label:`${zo(V.labels.singular,m)} - ${ne}`}).replace(/<[^>]*>?/g,"");c(se)}).catch(()=>{let q=f("fields:linkedTo",{label:`${zo(V.labels.singular,m)} - ${f("general:untitled",m)} - ID: ${U}`}).replace(/<[^>]*>?/g,"");c(q)})}}x($),D(!0),_(C?C?.getNodes():[]),we(L)?M(!0):M(!1);let H=n.current,W=xm(e._window),{activeElement:Y}=document;if(H===null)return;let We=e.getRootElement();return W!==null&&We!==null&&We.contains(W.anchorNode)?(E||(E=W.getRangeAt(0).getBoundingClientRect()),E!=null&&(E.y+=40,eo(E,H,t))):(Y==null||Y.className!=="link-input")&&(We!==null&&eo(null,H,t),i(null),c(null)),!0},[e,I,a.routes.admin,a.routes.api,a.serverURL,p,f,m,g?.code,t]);return oo(()=>Xl(e.registerCommand(to,C=>(e.dispatchCommand(he,C),T(),F(),!0),ql)),[e,T,F,O]),oo(()=>{let C=t.parentElement,E=()=>{e.getEditorState().read(()=>{T()})};return window.addEventListener("resize",E),C?.addEventListener("scroll",E),()=>{window.removeEventListener("resize",E),C?.removeEventListener("scroll",E)}},[t.parentElement,e,T]),oo(()=>Xl(e.registerUpdateListener(({editorState:C})=>{C.read(()=>{T()})}),e.registerCommand(bm,()=>(T(),!0),ql),e.registerCommand(Cm,()=>N?(I(),!0):!1,gm)),[e,T,N,I]),oo(()=>{e.getEditorState().read(()=>{T()})},[e,T]),kt(Ql.Fragment,{children:[Ee("div",{className:"link-editor",ref:n,children:kt("div",{className:"link-input",children:[l&&l.length>0?kt("a",{href:l,rel:"noopener noreferrer",target:"_blank",children:[o?.__fields.newTab?Ee(zl,{}):null,s!=null&&s.length>0?s:l]}):s!=null&&s.length>0?kt(lm,{children:[o?.__fields.newTab?Ee(zl,{}):null,Ee("span",{className:"link-input__label-pure",children:s})]}):null,e.isEditable()&&kt(Ql.Fragment,{children:[Ee("button",{"aria-label":"Edit link",className:"link-edit",onClick:C=>{C.preventDefault(),F()},onMouseDown:ti,tabIndex:0,type:"button",children:Ee(am,{})}),!S&&Ee("button",{"aria-label":"Remove link",className:"link-trash",onClick:()=>{e.dispatchCommand(he,null)},onMouseDown:ti,tabIndex:0,type:"button",children:Ee(sm,{})})]})]})}),Ee(st,{className:"lexical-link-edit-drawer",data:h,drawerSlug:O,drawerTitle:f("fields:editLink"),featureKey:"link",handleDrawerSubmit:(C,E)=>{let R=E,L={...R};delete L.text,e.update(()=>{let v=Zl(),w=null;if(Yl(v)?w=ze(v).getParent():k.length&&(w=k[0]?.getParent()??null),w&&we(w)){let $=_e({fields:L});w.replace($,!0)}}),e.dispatchCommand(he,{fields:L,selectedNodes:k,text:R.text})},schemaPath:u,schemaPathSuffix:"fields"})]})}var ri=t=>{let{anchorElem:e=document.body}=t;return Tm(_m(oi,{anchorElem:e}),e)};import{c as Nm}from"react/compiler-runtime";import{useLexicalComposerContext as Sm}from"@lexical/react/LexicalComposerContext.js";import{mergeRegister as Lm}from"@lexical/utils";import{$getSelection as ym,$isElementNode as Im,$isRangeSelection as Rm,COMMAND_PRIORITY_LOW as li,PASTE_COMMAND as vm}from"lexical";import{useEffect as Mm}from"react";var wm=/^(?:[a-zA-Z][a-zA-Z\d+.-]*:(?:\/\/)?(?:[-;:&=+$,\w]+@)?[A-Za-z\d]+(?:\.[A-Za-z\d]+)+|www\.[A-Za-z\d]+(?:\.[A-Za-z\d]+)+|(?:tel|mailto):[\w+.-]+)(?:\/[+~%/\w-]*)?(?:\?[-;&=%\w]*)?(?:#\w+)?$/,Em=/^(?:\/[\w\-./]*(?:#\w[\w-]*)?|#[\w\-]+)$/;function ni(t){if(!t)return!1;if(t==="https://"||wm.test(t)||Em.test(t))return!0;try{return new URL(t),!0}catch{}return!1}var ii=t=>{let e=Nm(5),{clientProps:o}=t,[r]=Sm(),n,l;return e[0]!==o.defaultLinkType||e[1]!==o.defaultLinkURL||e[2]!==r?(n=()=>{if(!r.hasNodes([ie]))throw new Error("LinkPlugin: LinkNode not registered on editor");return Lm(r.registerCommand(he,i=>i===null?(Ko(null),!0):(i.fields?.linkType||(i.fields.linkType=o.defaultLinkType),i.fields?.url||(i.fields.url=o.defaultLinkURL),Ko(i),!0),li),r.registerCommand(vm,i=>{let s=ym();if(!Rm(s)||s.isCollapsed()||!(i instanceof ClipboardEvent)||i.clipboardData==null)return!1;let c=i.clipboardData.getData("text");if(!ni(c))return!1;if(!s.getNodes().some(Dm)){let u={doc:null,linkType:"custom",newTab:!1,url:c};return r.dispatchCommand(he,{fields:u,text:null}),i.preventDefault(),!0}return!1},li))},l=[o.defaultLinkType,o.defaultLinkURL,r],e[0]=o.defaultLinkType,e[1]=o.defaultLinkURL,e[2]=r,e[3]=n,e[4]=l):(n=e[3],l=e[4]),Mm(n,l),null};function Dm(t){return Im(t)}var ai=[Uo([{ChildComponent:Ml,isActive:({selection:t})=>{if(si(t)){let e=ze(t);return Am(e,Z)!=null}return!1},isEnabled:({selection:t})=>!!(si(t)&&Zo()?.getTextContent()?.length),key:"link",label:({i18n:t})=>t.t("lexical:link:label"),onSelect:({editor:t,isActive:e})=>{if(e)t.dispatchCommand(he,null);else{let o,r=[];if(t.getEditorState().read(()=>{o=Zo()?.getTextContent(),r=Zo()?.getNodes()??[]}),!o?.length)return;let n={doc:null};t.dispatchCommand(to,{fields:n,selectedNodes:r,text:o})}},order:1}])],Om=y(({props:t})=>({markdownTransformers:[$l],nodes:[ie,t?.disableAutoLinks===!0?null:Te].filter(Boolean),plugins:[{Component:ii,position:"normal"},t?.disableAutoLinks===!0||t?.disableAutoLinks==="creationOnly"?null:{Component:Vl,position:"normal"},{Component:Kl,position:"normal"},{Component:ri,position:"floatingAnchorElem"}].filter(Boolean),sanitizedClientFeatureProps:t,toolbarFixed:{groups:ai},toolbarInline:{groups:ai}}));import{$isListNode as Qo,INSERT_CHECK_LIST_COMMAND as fi,ListItemNode as Jm,ListNode as Xm}from"@lexical/list";import{$isRangeSelection as zm}from"lexical";import{jsx as ci,jsxs as $m}from"react/jsx-runtime";import"react";var Yo=()=>$m("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[ci("rect",{height:"13",rx:"1.5",stroke:"currentColor",width:"13",x:"3.5",y:"3.5"}),ci("path",{d:"M7 10L9 12.5L13 7.5",stroke:"currentColor",strokeWidth:"1.5"})]});import{jsx as Fm}from"react/jsx-runtime";import{ListPlugin as Pm}from"@lexical/react/LexicalListPlugin.js";import"react";var Ze=()=>Fm(Pm,{});function Ye(t){return{items:t,key:"lists",label:({i18n:e})=>e.t("lexical:general:slashMenuListGroupLabel")}}import{$isListNode as Um,ListItemNode as Gm,ListNode as Wm}from"@lexical/list";import{$createListItemNode as Bm,$createListNode as Hm,$isListItemNode as jm,$isListNode as qo}from"@lexical/list";var ui=4,qe=t=>(e,o,r)=>{let n=e.getPreviousSibling(),l=e.getNextSibling(),i=Bm(t==="check"?r[3]==="x":void 0);if(qo(l)&&l.getListType()===t){let c=l.getFirstChild();c!==null?c.insertBefore(i):l.append(i),e.remove()}else if(qo(n)&&n.getListType()===t)n.append(i),e.remove();else{let c=Hm(t,t==="number"?Number(r[2]):void 0);c.append(i),e.replace(c)}i.append(...o),i.select(0,0);let s=Math.floor(r[1].length/ui);s&&i.setIndent(s)},Be=(t,e,o)=>{let r=[],n=t.getChildren(),l=0;for(let i of n)if(jm(i)){if(i.getChildrenSize()===1){let d=i.getFirstChild();if(qo(d)){r.push(Be(d,e,o+1));continue}}let s=" ".repeat(o*ui),c=t.getListType(),u=c==="number"?`${t.getStart()+l}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(s+u+e(i)),l++}return r.join(`
`)};var di={type:"element",dependencies:[Wm,Gm],export:(t,e)=>Um(t)?Be(t,e,0):null,regExp:/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,replace:qe("check")};import{jsx as Vm}from"react/jsx-runtime";import{CheckListPlugin as Km}from"@lexical/react/LexicalCheckListPlugin.js";import"react";var mi=()=>Vm(Km,{});var pi=[le([{ChildComponent:Yo,isActive:({selection:t})=>{if(!zm(t))return!1;for(let e of t.getNodes()){if(Qo(e)&&e.getListType()==="check")continue;let o=e.getParent();if(Qo(o)&&o.getListType()==="check")continue;let r=o?.getParent();if(!(Qo(r)&&r.getListType()==="check"))return!1}return!0},key:"checklist",label:({i18n:t})=>t.t("lexical:checklist:label"),onSelect:({editor:t})=>{t.dispatchCommand(fi,void 0)},order:12}])],Zm=y(({featureProviderMap:t})=>{let e=[{Component:mi,position:"normal"}];return!t.has("unorderedList")&&!t.has("orderedList")&&e.push({Component:Ze,position:"normal"}),{markdownTransformers:[di],nodes:t.has("unorderedList")||t.has("orderedList")?[]:[Xm,Jm],plugins:e,slashMenu:{groups:[Ye([{Icon:Yo,key:"checklist",keywords:["check list","check","checklist","cl"],label:({i18n:o})=>o.t("lexical:checklist:label"),onSelect:({editor:o})=>{o.dispatchCommand(fi,void 0)}}])]},toolbarFixed:{groups:pi},toolbarInline:{groups:pi}}});import{$isListNode as tr,INSERT_ORDERED_LIST_COMMAND as xi,ListItemNode as tp,ListNode as op}from"@lexical/list";import{$isRangeSelection as rp}from"lexical";import{jsx as _t,jsxs as Ym}from"react/jsx-runtime";import"react";var er=()=>Ym("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[_t("path",{d:"M5.89284 12.479C5.89284 13.368 5.26284 13.788 4.38084 14.236C3.75084 14.558 3.43584 14.789 3.40784 15.062H5.89984V16H2.06384V15.573C2.06384 14.523 2.92484 13.935 3.66684 13.501C4.38084 13.088 4.75184 12.878 4.75184 12.458C4.75184 12.08 4.52084 11.835 4.06584 11.835C3.58984 11.835 3.30984 12.199 3.28184 12.654H2.11284C2.18984 11.681 2.87584 10.918 4.07284 10.918C5.15784 10.918 5.89284 11.555 5.89284 12.479Z",fill:"currentColor"}),_t("path",{d:"M2.68608 4.535V3.737C3.54008 3.737 3.90408 3.513 4.02308 2.995H4.89108V8H3.68008L3.68008 4.535H2.68608Z",fill:"currentColor"}),_t("path",{d:"M8 15L17 15",stroke:"currentColor",strokeWidth:"1.5"}),_t("path",{d:"M8 10L17 10",stroke:"currentColor",strokeWidth:"1.5"}),_t("path",{d:"M8 5L17 5",stroke:"currentColor",strokeWidth:"1.5"})]});import{$isListNode as qm,ListItemNode as Qm,ListNode as ep}from"@lexical/list";var hi={type:"element",dependencies:[ep,Qm],export:(t,e)=>qm(t)?Be(t,e,0):null,regExp:/^(\s*)(\d+)\.\s/,replace:qe("number")};var gi=[le([{ChildComponent:er,isActive:({selection:t})=>{if(!rp(t))return!1;for(let e of t.getNodes()){if(tr(e)&&e.getListType()==="number")continue;let o=e.getParent();if(tr(o)&&o.getListType()==="number")continue;let r=o?.getParent();if(!(tr(r)&&r.getListType()==="number"))return!1}return!0},key:"orderedList",label:({i18n:t})=>t.t("lexical:orderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(xi,void 0)},order:10}])],np=y(({featureProviderMap:t})=>({markdownTransformers:[hi],nodes:t.has("orderedList")?[]:[op,tp],plugins:t.has("orderedList")?[]:[{Component:Ze,position:"normal"}],slashMenu:{groups:[Ye([{Icon:er,key:"orderedList",keywords:["ordered list","ol"],label:({i18n:e})=>e.t("lexical:orderedList:label"),onSelect:({editor:e})=>{e.dispatchCommand(xi,void 0)}}])]},toolbarFixed:{groups:gi},toolbarInline:{groups:gi}}));import{$isListNode as rr,INSERT_UNORDERED_LIST_COMMAND as ki,ListItemNode as cp,ListNode as up}from"@lexical/list";import{$isRangeSelection as dp}from"lexical";import{jsx as Qe,jsxs as lp}from"react/jsx-runtime";import"react";var or=()=>lp("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[Qe("circle",{cx:"4",cy:"5",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("circle",{cx:"4",cy:"10",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("circle",{cx:"4",cy:"15",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),Qe("path",{d:"M17 5H7",stroke:"currentColor",strokeWidth:"1.5"}),Qe("path",{d:"M17 10H7",stroke:"currentColor",strokeWidth:"1.5"}),Qe("path",{d:"M17 15H7",stroke:"currentColor",strokeWidth:"1.5"})]});import{$isListNode as ip,ListItemNode as sp,ListNode as ap}from"@lexical/list";var Ci={type:"element",dependencies:[ap,sp],export:(t,e)=>ip(t)?Be(t,e,0):null,regExp:/^(\s*)[-*+]\s/,replace:qe("bullet")};var bi=[le([{ChildComponent:or,isActive:({selection:t})=>{if(!dp(t))return!1;for(let e of t.getNodes()){if(rr(e)&&e.getListType()==="bullet")continue;let o=e.getParent();if(rr(o)&&o.getListType()==="bullet")continue;let r=o?.getParent();if(!(rr(r)&&r.getListType()==="bullet"))return!1}return!0},key:"unorderedList",label:({i18n:t})=>t.t("lexical:unorderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(ki,void 0)},order:11}])],mp=y({markdownTransformers:[Ci],nodes:[up,cp],plugins:[{Component:Ze,position:"normal"}],slashMenu:{groups:[Ye([{Icon:or,key:"unorderedList",keywords:["unordered list","ul"],label:({i18n:t})=>t.t("lexical:unorderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(ki,void 0)}}])]},toolbarFixed:{groups:bi},toolbarInline:{groups:bi}});import{jsx as pp}from"react/jsx-runtime";import{addClassNamesToElement as fp}from"@lexical/utils";import{DecoratorNode as hp}from"lexical";import*as _i from"react";var gp=_i.lazy(()=>import("./Component-MBLHTKDK.js").then(t=>({default:t.UnknownConvertedNodeComponent}))),Tt=class t extends hp{__data;constructor({data:e,key:o}){super(o),this.__data=e}static clone(e){return new t({data:e.__data,key:e.__key})}static getType(){return"unknownConverted"}static importJSON(e){return xp({data:e.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(e){let o=document.createElement("span");return fp(o,"unknownConverted"),o}decorate(){return pp(gp,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(e,o){return!1}};function xp({data:t}){return new Tt({data:t})}var Cp=y(()=>({nodes:[Tt]}));import{jsx as bp}from"react/jsx-runtime";import{addClassNamesToElement as kp}from"@lexical/utils";import{DecoratorNode as _p}from"lexical";import*as Ti from"react";var Tp=Ti.lazy(()=>import("./Component-DOSSWC76.js").then(t=>({default:t.UnknownConvertedNodeComponent}))),wt=class t extends _p{__data;constructor({data:e,key:o}){super(o),this.__data=e}static clone(e){return new t({data:e.__data,key:e.__key})}static getType(){return"unknownConverted"}static importJSON(e){return wp({data:e.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(e){let o=document.createElement("span");return kp(o,"unknownConverted"),o}decorate(){return bp(Tp,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(e,o){return!1}};function wp({data:t}){return new wt({data:t})}var Ep=y(()=>({nodes:[wt]}));import{$setBlocksType as Ni}from"@lexical/selection";import{$createParagraphNode as Si,$getSelection as Li,$isParagraphNode as wi,$isRangeSelection as Np}from"lexical";var Ei=[le([{ChildComponent:ct,isActive:({selection:t})=>{if(!Np(t))return!1;for(let e of t.getNodes())if(!wi(e)&&!wi(e.getParent()))return!1;return!0},key:"paragraph",label:({i18n:t})=>t.t("lexical:paragraph:label2"),onSelect:({editor:t})=>{t.update(()=>{let e=Li();Ni(e,()=>Si())})},order:1}])],Sp=y({slashMenu:{groups:[ee([{Icon:ct,key:"paragraph",keywords:["normal","paragraph","p","text"],label:({i18n:t})=>t.t("lexical:paragraph:label"),onSelect:({editor:t})=>{t.update(()=>{let e=Li();Ni(e,()=>Si())})}}])]},toolbarFixed:{groups:Ei},toolbarInline:{groups:Ei}});import{c as Jp}from"react/compiler-runtime";import{jsx as Xp}from"react/jsx-runtime";import{useLexicalComposerContext as zp}from"@lexical/react/LexicalComposerContext";import{useEffect as Zp,useState as Yp}from"react";import{jsx as Ki,Fragment as Kp}from"react/jsx-runtime";import"react";import{jsx as Lp}from"react/jsx-runtime";var yi={quote:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Lp("blockquote",{children:o})}};import{jsx as yp}from"react/jsx-runtime";var Ii={heading:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.tag;return yp(r,{children:o})}};import{jsx as Ip}from"react/jsx-runtime";var Ri={horizontalrule:Ip("hr",{})};import{jsx as Rp}from"react/jsx-runtime";var vi={linebreak:Rp("br",{})};import{jsx as Mi}from"react/jsx-runtime";var Di=({internalDocToHref:t})=>({autolink:({node:e,nodesToJSX:o})=>{let r=o({nodes:e.children}),n=e.fields.newTab?"noopener noreferrer":void 0,l=e.fields.newTab?"_blank":void 0;return Mi("a",{href:e.fields.url,rel:n,target:l,children:r})},link:({node:e,nodesToJSX:o})=>{let r=o({nodes:e.children}),n=e.fields.newTab?"noopener noreferrer":void 0,l=e.fields.newTab?"_blank":void 0,i=e.fields.url??"";return e.fields.linkType==="internal"&&(t?i=t({linkNode:e}):(console.error("Lexical => JSX converter: Link converter: found internal link, but internalDocToHref is not provided"),i="#")),Mi("a",{href:i,rel:n,target:l,children:r})}});import{jsx as et,jsxs as vp,Fragment as Mp}from"react/jsx-runtime";import{v4 as Dp}from"uuid";var Ai={list:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.tag;return et(r,{className:`list-${t?.listType}`,children:o})},listitem:({node:t,nodesToJSX:e,parent:o})=>{let r=t.children.some(l=>l.type==="list"),n=e({nodes:t.children});if("listType"in o&&o?.listType==="check"){let l=Dp();return et("li",{"aria-checked":t.checked?"true":"false",className:`list-item-checkbox${t.checked?" list-item-checkbox-checked":" list-item-checkbox-unchecked"}${r?" nestedListItem":""}`,role:"checkbox",style:{listStyleType:"none"},tabIndex:-1,value:t?.value,children:r?n:vp(Mp,{children:[et("input",{checked:t.checked,id:l,readOnly:!0,type:"checkbox"}),et("label",{htmlFor:l,children:n}),et("br",{})]})})}else return et("li",{className:`${r?"nestedListItem":""}`,style:r?{listStyleType:"none"}:void 0,value:t?.value,children:n})}};import{jsx as nr}from"react/jsx-runtime";var Oi={paragraph:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return o?.length?nr("p",{children:o}):nr("p",{children:nr("br",{})})}};var $i={tab:"	"};import{jsx as Et}from"react/jsx-runtime";var Fi={table:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Et("div",{className:"lexical-table-container",children:Et("table",{className:"lexical-table",style:{borderCollapse:"collapse"},children:Et("tbody",{children:o})})})},tablecell:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children}),r=t.headerState>0?"th":"td",n=`lexical-table-cell-header-${t.headerState}`,l={backgroundColor:t.backgroundColor||void 0,border:"1px solid #ccc",padding:"8px"},i=t.colSpan&&t.colSpan>1?t.colSpan:void 0,s=t.rowSpan&&t.rowSpan>1?t.rowSpan:void 0;return Et(r,{className:`lexical-table-cell ${n}`,colSpan:i,rowSpan:s,style:l,children:o})},tablerow:({node:t,nodesToJSX:e})=>{let o=e({nodes:t.children});return Et("tr",{className:"lexical-table-row",children:o})}};import{jsx as He}from"react/jsx-runtime";import"react";var A={DOM_ELEMENT_TYPE:1,DOM_TEXT_TYPE:3,NO_DIRTY_NODES:0,HAS_DIRTY_NODES:1,FULL_RECONCILE:2,IS_NORMAL:0,IS_TOKEN:1,IS_SEGMENTED:2,IS_INERT:3,IS_BOLD:1,IS_ITALIC:2,IS_STRIKETHROUGH:4,IS_UNDERLINE:8,IS_CODE:16,IS_SUBSCRIPT:32,IS_SUPERSCRIPT:64,IS_HIGHLIGHT:128,IS_DIRECTIONLESS:1,IS_UNMERGEABLE:2,IS_ALIGN_LEFT:1,IS_ALIGN_CENTER:2,IS_ALIGN_RIGHT:3,IS_ALIGN_JUSTIFY:4,IS_ALIGN_START:5,IS_ALIGN_END:6},Ap=A.IS_BOLD|A.IS_ITALIC|A.IS_STRIKETHROUGH|A.IS_UNDERLINE|A.IS_CODE|A.IS_SUBSCRIPT|A.IS_SUPERSCRIPT|A.IS_HIGHLIGHT,Op="\xA0",$p=`

`,Pi="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Bi="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",Fp=new RegExp("^[^"+Bi+"]*["+Pi+"]"),Pp=new RegExp("^[^"+Pi+"]*["+Bi+"]"),Bp={bold:A.IS_BOLD,code:A.IS_CODE,highlight:A.IS_HIGHLIGHT,italic:A.IS_ITALIC,strikethrough:A.IS_STRIKETHROUGH,subscript:A.IS_SUBSCRIPT,superscript:A.IS_SUPERSCRIPT,underline:A.IS_UNDERLINE},Hp={directionless:A.IS_DIRECTIONLESS,unmergeable:A.IS_UNMERGEABLE},jp={center:A.IS_ALIGN_CENTER,end:A.IS_ALIGN_END,justify:A.IS_ALIGN_JUSTIFY,left:A.IS_ALIGN_LEFT,right:A.IS_ALIGN_RIGHT,start:A.IS_ALIGN_START},Up={[A.IS_ALIGN_CENTER]:"center",[A.IS_ALIGN_END]:"end",[A.IS_ALIGN_JUSTIFY]:"justify",[A.IS_ALIGN_LEFT]:"left",[A.IS_ALIGN_RIGHT]:"right",[A.IS_ALIGN_START]:"start"},Gp={normal:A.IS_NORMAL,segmented:A.IS_SEGMENTED,token:A.IS_TOKEN},Wp={[A.IS_NORMAL]:"normal",[A.IS_SEGMENTED]:"segmented",[A.IS_TOKEN]:"token"};var Hi={text:({node:t})=>{let e=t.text;return t.format&A.IS_BOLD&&(e=He("strong",{children:e})),t.format&A.IS_ITALIC&&(e=He("em",{children:e})),t.format&A.IS_STRIKETHROUGH&&(e=He("span",{style:{textDecoration:"line-through"},children:e})),t.format&A.IS_UNDERLINE&&(e=He("span",{style:{textDecoration:"underline"},children:e})),t.format&A.IS_CODE&&(e=He("code",{children:e})),t.format&A.IS_SUBSCRIPT&&(e=He("sub",{children:e})),t.format&A.IS_SUPERSCRIPT&&(e=He("sup",{children:e})),e}};import{jsx as Nt}from"react/jsx-runtime";var ji={upload:({node:t})=>{let e=t;if(typeof e.value!="object")return null;let o=e.value,r=o.url;if(!o.mimeType.startsWith("image"))return Nt("a",{href:r,rel:"noopener noreferrer",children:o.filename});if(!o.sizes||!Object.keys(o.sizes).length)return Nt("img",{alt:o.filename,height:o.height,src:r,width:o.width});let n=[];for(let l in o.sizes){let i=o.sizes[l];if(!i||!i.width||!i.height||!i.mimeType||!i.filesize||!i.filename||!i.url)continue;let s=i?.url;n.push(Nt("source",{media:`(max-width: ${i.width}px)`,srcSet:s,type:i.mimeType},l))}return n.push(Nt("img",{alt:o?.filename,height:o?.height,src:r,width:o?.width},"image")),Nt("picture",{children:n})}};var tt={...Oi,...Hi,...vi,...yi,...Fi,...Ii,...Ri,...Ai,...Di({}),...ji,...$i};import{jsx as Gi,Fragment as Vp}from"react/jsx-runtime";import lr from"react";function Ui(t){let e=!!t?.root?.children?.length,o=!1;if(t?.root?.children?.length===1&&t?.root?.children[0]?.type==="paragraph"){let r=t?.root?.children[0];if(!r?.children||r?.children?.length===0)o=!0;else if(r?.children?.length===1){let n=r?.children[0];n?.type==="text"&&(n?.text?.length||(o=!0))}}return!(!e||o)}function Wi({converters:t,data:e,disableIndent:o,disableTextAlign:r}){return Ui(e)?Vi({converters:t,disableIndent:o,disableTextAlign:r,nodes:e?.root?.children,parent:e?.root}):Gi(Vp,{})}function Vi({converters:t,disableIndent:e,disableTextAlign:o,nodes:r,parent:n}){let l=t.unknown;return r.map((s,c)=>{let u;s.type==="block"?(u=t?.blocks?.[s?.fields?.blockType],!u&&!l&&console.error(`Lexical => JSX converter: Blocks converter: found ${s?.fields?.blockType} block, but no converter is provided`)):s.type==="inlineBlock"?(u=t?.inlineBlocks?.[s?.fields?.blockType],!u&&!l&&console.error(`Lexical => JSX converter: Inline Blocks converter: found ${s?.fields?.blockType} inline block, but no converter is provided`)):u=t[s.type];try{!u&&l&&(u=l);let d;u?d=typeof u=="function"?u({childIndex:c,converters:t,node:s,nodesToJSX:m=>Vi({converters:m.converters??t,disableIndent:m.disableIndent??e,disableTextAlign:m.disableTextAlign??o,nodes:m.nodes,parent:m.parent??{...s,parent:n}}),parent:n}):u:d=Gi("span",{children:"unknown node"},c);let a={};if(!o&&(!Array.isArray(o)||!o?.includes(s.type))&&"format"in s&&s.format)switch(s.format){case"center":a.textAlign="center";break;case"end":a.textAlign="right";break;case"justify":a.textAlign="justify";break;case"left":break;case"right":a.textAlign="right";break;case"start":a.textAlign="left";break}if(!e&&(!Array.isArray(e)||!e?.includes(s.type))&&"indent"in s&&s.indent&&s.type!=="listitem"&&(a.paddingInlineStart=`${Number(s.indent)*2}em`),lr.isValidElement(d)){if(a.textAlign||a.paddingInlineStart){let p={...a,...d?.props?.style??{}};return lr.cloneElement(d,{key:c,style:p})}return lr.cloneElement(d,{key:c})}return d}catch(d){return console.error("Error converting lexical node to JSX:",d,"node:",s),null}}).filter(Boolean)}var ir=({className:t,converters:e,data:o,disableContainer:r,disableIndent:n,disableTextAlign:l})=>{if(!o)return null;let i={};e?typeof e=="function"?i=e({defaultConverters:tt}):i=e:i=tt;let s=o&&!Array.isArray(o)&&typeof o=="object"&&"root"in o&&Wi({converters:i,data:o,disableIndent:n,disableTextAlign:l});return r?Ki(Kp,{children:s}):Ki("div",{className:t??"payload-richtext",children:s})};function Ji(){let t=Jp(7),[e]=zp(),o;t[0]!==e?(o=e.getEditorState().toJSON(),t[0]=e,t[1]=o):o=t[1];let[r,n]=Yp(o),l,i;t[2]!==e?(l=()=>e.registerUpdateListener(c=>{let{editorState:u}=c;n(u.toJSON())}),i=[e],t[2]=e,t[3]=l,t[4]=i):(l=t[3],i=t[4]),Zp(l,i);let s;return t[5]!==r?(s=Xp(ir,{converters:tt,data:r}),t[5]=r,t[6]=s):s=t[6],s}var qp=y({plugins:[{Component:Ji,position:"bottom"}]});var B={amber:{50:"oklch(0.987 0.022 95.277)",100:"oklch(0.962 0.059 95.617)",200:"oklch(0.924 0.12 95.746)",300:"oklch(0.879 0.169 91.605)",400:"oklch(0.828 0.189 84.429)",500:"oklch(0.769 0.188 70.08)",600:"oklch(0.666 0.179 58.318)",700:"oklch(0.555 0.163 48.998)",800:"oklch(0.473 0.137 46.201)",900:"oklch(0.414 0.112 45.904)",950:"oklch(0.279 0.077 45.635)"},black:"#000",blue:{50:"oklch(0.97 0.014 254.604)",100:"oklch(0.932 0.032 255.585)",200:"oklch(0.882 0.059 254.128)",300:"oklch(0.809 0.105 251.813)",400:"oklch(0.707 0.165 254.624)",500:"oklch(0.623 0.214 259.815)",600:"oklch(0.546 0.245 262.881)",700:"oklch(0.488 0.243 264.376)",800:"oklch(0.424 0.199 265.638)",900:"oklch(0.379 0.146 265.522)",950:"oklch(0.282 0.091 267.935)"},current:"currentColor",cyan:{50:"oklch(0.984 0.019 200.873)",100:"oklch(0.956 0.045 203.388)",200:"oklch(0.917 0.08 205.041)",300:"oklch(0.865 0.127 207.078)",400:"oklch(0.789 0.154 211.53)",500:"oklch(0.715 0.143 215.221)",600:"oklch(0.609 0.126 221.723)",700:"oklch(0.52 0.105 223.128)",800:"oklch(0.45 0.085 224.283)",900:"oklch(0.398 0.07 227.392)",950:"oklch(0.302 0.056 229.695)"},emerald:{50:"oklch(0.979 0.021 166.113)",100:"oklch(0.95 0.052 163.051)",200:"oklch(0.905 0.093 164.15)",300:"oklch(0.845 0.143 164.978)",400:"oklch(0.765 0.177 163.223)",500:"oklch(0.696 0.17 162.48)",600:"oklch(0.596 0.145 163.225)",700:"oklch(0.508 0.118 165.612)",800:"oklch(0.432 0.095 166.913)",900:"oklch(0.378 0.077 168.94)",950:"oklch(0.262 0.051 172.552)"},fuchsia:{50:"oklch(0.977 0.017 320.058)",100:"oklch(0.952 0.037 318.852)",200:"oklch(0.903 0.076 319.62)",300:"oklch(0.833 0.145 321.434)",400:"oklch(0.74 0.238 322.16)",500:"oklch(0.667 0.295 322.15)",600:"oklch(0.591 0.293 322.896)",700:"oklch(0.518 0.253 323.949)",800:"oklch(0.452 0.211 324.591)",900:"oklch(0.401 0.17 325.612)",950:"oklch(0.293 0.136 325.661)"},gray:{50:"oklch(0.985 0.002 247.839)",100:"oklch(0.967 0.003 264.542)",200:"oklch(0.928 0.006 264.531)",300:"oklch(0.872 0.01 258.338)",400:"oklch(0.707 0.022 261.325)",500:"oklch(0.551 0.027 264.364)",600:"oklch(0.446 0.03 256.802)",700:"oklch(0.373 0.034 259.733)",800:"oklch(0.278 0.033 256.848)",900:"oklch(0.21 0.034 264.665)",950:"oklch(0.13 0.028 261.692)"},green:{50:"oklch(0.982 0.018 155.826)",100:"oklch(0.962 0.044 156.743)",200:"oklch(0.925 0.084 155.995)",300:"oklch(0.871 0.15 154.449)",400:"oklch(0.792 0.209 151.711)",500:"oklch(0.723 0.219 149.579)",600:"oklch(0.627 0.194 149.214)",700:"oklch(0.527 0.154 150.069)",800:"oklch(0.448 0.119 151.328)",900:"oklch(0.393 0.095 152.535)",950:"oklch(0.266 0.065 152.934)"},indigo:{50:"oklch(0.962 0.018 272.314)",100:"oklch(0.93 0.034 272.788)",200:"oklch(0.87 0.065 274.039)",300:"oklch(0.785 0.115 274.713)",400:"oklch(0.673 0.182 276.935)",500:"oklch(0.585 0.233 277.117)",600:"oklch(0.511 0.262 276.966)",700:"oklch(0.457 0.24 277.023)",800:"oklch(0.398 0.195 277.366)",900:"oklch(0.359 0.144 278.697)",950:"oklch(0.257 0.09 281.288)"},inherit:"inherit",lime:{50:"oklch(0.986 0.031 120.757)",100:"oklch(0.967 0.067 122.328)",200:"oklch(0.938 0.127 124.321)",300:"oklch(0.897 0.196 126.665)",400:"oklch(0.841 0.238 128.85)",500:"oklch(0.768 0.233 130.85)",600:"oklch(0.648 0.2 131.684)",700:"oklch(0.532 0.157 131.589)",800:"oklch(0.453 0.124 130.933)",900:"oklch(0.405 0.101 131.063)",950:"oklch(0.274 0.072 132.109)"},neutral:{50:"oklch(0.985 0 0)",100:"oklch(0.97 0 0)",200:"oklch(0.922 0 0)",300:"oklch(0.87 0 0)",400:"oklch(0.708 0 0)",500:"oklch(0.556 0 0)",600:"oklch(0.439 0 0)",700:"oklch(0.371 0 0)",800:"oklch(0.269 0 0)",900:"oklch(0.205 0 0)",950:"oklch(0.145 0 0)"},orange:{50:"oklch(0.98 0.016 73.684)",100:"oklch(0.954 0.038 75.164)",200:"oklch(0.901 0.076 70.697)",300:"oklch(0.837 0.128 66.29)",400:"oklch(0.75 0.183 55.934)",500:"oklch(0.705 0.213 47.604)",600:"oklch(0.646 0.222 41.116)",700:"oklch(0.553 0.195 38.402)",800:"oklch(0.47 0.157 37.304)",900:"oklch(0.408 0.123 38.172)",950:"oklch(0.266 0.079 36.259)"},pink:{50:"oklch(0.971 0.014 343.198)",100:"oklch(0.948 0.028 342.258)",200:"oklch(0.899 0.061 343.231)",300:"oklch(0.823 0.12 346.018)",400:"oklch(0.718 0.202 349.761)",500:"oklch(0.656 0.241 354.308)",600:"oklch(0.592 0.249 0.584)",700:"oklch(0.525 0.223 3.958)",800:"oklch(0.459 0.187 3.815)",900:"oklch(0.408 0.153 2.432)",950:"oklch(0.284 0.109 3.907)"},purple:{50:"oklch(0.977 0.014 308.299)",100:"oklch(0.946 0.033 307.174)",200:"oklch(0.902 0.063 306.703)",300:"oklch(0.827 0.119 306.383)",400:"oklch(0.714 0.203 305.504)",500:"oklch(0.627 0.265 303.9)",600:"oklch(0.558 0.288 302.321)",700:"oklch(0.496 0.265 301.924)",800:"oklch(0.438 0.218 303.724)",900:"oklch(0.381 0.176 304.987)",950:"oklch(0.291 0.149 302.717)"},red:{50:"oklch(0.971 0.013 17.38)",100:"oklch(0.936 0.032 17.717)",200:"oklch(0.885 0.062 18.334)",300:"oklch(0.808 0.114 19.571)",400:"oklch(0.704 0.191 22.216)",500:"oklch(0.637 0.237 25.331)",600:"oklch(0.577 0.245 27.325)",700:"oklch(0.505 0.213 27.518)",800:"oklch(0.444 0.177 26.899)",900:"oklch(0.396 0.141 25.723)",950:"oklch(0.258 0.092 26.042)"},rose:{50:"oklch(0.969 0.015 12.422)",100:"oklch(0.941 0.03 12.58)",200:"oklch(0.892 0.058 10.001)",300:"oklch(0.81 0.117 11.638)",400:"oklch(0.712 0.194 13.428)",500:"oklch(0.645 0.246 16.439)",600:"oklch(0.586 0.253 17.585)",700:"oklch(0.514 0.222 16.935)",800:"oklch(0.455 0.188 13.697)",900:"oklch(0.41 0.159 10.272)",950:"oklch(0.271 0.105 12.094)"},sky:{50:"oklch(0.977 0.013 236.62)",100:"oklch(0.951 0.026 236.824)",200:"oklch(0.901 0.058 230.902)",300:"oklch(0.828 0.111 230.318)",400:"oklch(0.746 0.16 232.661)",500:"oklch(0.685 0.169 237.323)",600:"oklch(0.588 0.158 241.966)",700:"oklch(0.5 0.134 242.749)",800:"oklch(0.443 0.11 240.79)",900:"oklch(0.391 0.09 240.876)",950:"oklch(0.293 0.066 243.157)"},slate:{50:"oklch(0.984 0.003 247.858)",100:"oklch(0.968 0.007 247.896)",200:"oklch(0.929 0.013 255.508)",300:"oklch(0.869 0.022 252.894)",400:"oklch(0.704 0.04 256.788)",500:"oklch(0.554 0.046 257.417)",600:"oklch(0.446 0.043 257.281)",700:"oklch(0.372 0.044 257.287)",800:"oklch(0.279 0.041 260.031)",900:"oklch(0.208 0.042 265.755)",950:"oklch(0.129 0.042 264.695)"},stone:{50:"oklch(0.985 0.001 106.423)",100:"oklch(0.97 0.001 106.424)",200:"oklch(0.923 0.003 48.717)",300:"oklch(0.869 0.005 56.366)",400:"oklch(0.709 0.01 56.259)",500:"oklch(0.553 0.013 58.071)",600:"oklch(0.444 0.011 73.639)",700:"oklch(0.374 0.01 67.558)",800:"oklch(0.268 0.007 34.298)",900:"oklch(0.216 0.006 56.043)",950:"oklch(0.147 0.004 49.25)"},teal:{50:"oklch(0.984 0.014 180.72)",100:"oklch(0.953 0.051 180.801)",200:"oklch(0.91 0.096 180.426)",300:"oklch(0.855 0.138 181.071)",400:"oklch(0.777 0.152 181.912)",500:"oklch(0.704 0.14 182.503)",600:"oklch(0.6 0.118 184.704)",700:"oklch(0.511 0.096 186.391)",800:"oklch(0.437 0.078 188.216)",900:"oklch(0.386 0.063 188.416)",950:"oklch(0.277 0.046 192.524)"},transparent:"transparent",violet:{50:"oklch(0.969 0.016 293.756)",100:"oklch(0.943 0.029 294.588)",200:"oklch(0.894 0.057 293.283)",300:"oklch(0.811 0.111 293.571)",400:"oklch(0.702 0.183 293.541)",500:"oklch(0.606 0.25 292.717)",600:"oklch(0.541 0.281 293.009)",700:"oklch(0.491 0.27 292.581)",800:"oklch(0.432 0.232 292.759)",900:"oklch(0.38 0.189 293.745)",950:"oklch(0.283 0.141 291.089)"},white:"#fff",yellow:{50:"oklch(0.987 0.026 102.212)",100:"oklch(0.973 0.071 103.193)",200:"oklch(0.945 0.129 101.54)",300:"oklch(0.905 0.182 98.111)",400:"oklch(0.852 0.199 91.936)",500:"oklch(0.795 0.184 86.047)",600:"oklch(0.681 0.162 75.834)",700:"oklch(0.554 0.135 66.442)",800:"oklch(0.476 0.114 61.907)",900:"oklch(0.421 0.095 57.708)",950:"oklch(0.286 0.066 53.813)"},zinc:{50:"oklch(0.985 0 0)",100:"oklch(0.967 0.001 286.375)",200:"oklch(0.92 0.004 286.32)",300:"oklch(0.871 0.006 286.286)",400:"oklch(0.705 0.015 286.067)",500:"oklch(0.552 0.016 285.938)",600:"oklch(0.442 0.017 285.786)",700:"oklch(0.37 0.013 285.805)",800:"oklch(0.274 0.006 286.033)",900:"oklch(0.21 0.006 285.885)",950:"oklch(0.141 0.005 285.823)"}},Qp={text:{"text-red":{css:{color:`light-dark(${B.red[600]}, ${B.red[400]})`},label:"Red"},"text-orange":{css:{color:`light-dark(${B.orange[600]}, ${B.orange[400]})`},label:"Orange"},"text-yellow":{css:{color:`light-dark(${B.yellow[700]}, ${B.yellow[300]})`},label:"Yellow"},"text-green":{css:{color:`light-dark(${B.green[700]}, ${B.green[400]})`},label:"Green"},"text-blue":{css:{color:`light-dark(${B.blue[600]}, ${B.blue[400]})`},label:"Blue"},"text-purple":{css:{color:`light-dark(${B.purple[600]}, ${B.purple[400]})`},label:"Purple"},"text-pink":{css:{color:`light-dark(${B.pink[600]}, ${B.pink[400]})`},label:"Pink"}},background:{"bg-red":{css:{"background-color":`light-dark(${B.red[400]}, ${B.red[600]})`},label:"Red"},"bg-orange":{css:{"background-color":`light-dark(${B.orange[400]}, ${B.orange[600]})`},label:"Orange"},"bg-yellow":{css:{"background-color":`light-dark(${B.yellow[300]}, ${B.yellow[700]})`},label:"Yellow"},"bg-green":{css:{"background-color":`light-dark(${B.green[400]}, ${B.green[700]})`},label:"Green"},"bg-blue":{css:{"background-color":`light-dark(${B.blue[400]}, ${B.blue[600]})`},label:"Blue"},"bg-purple":{css:{"background-color":`light-dark(${B.purple[400]}, ${B.purple[600]})`},label:"Purple"},"bg-pink":{css:{"background-color":`light-dark(${B.pink[400]}, ${B.pink[600]})`},label:"Pink"}}};import{$isNodeSelection as Pf}from"lexical";import{jsx as St,jsxs as ef}from"react/jsx-runtime";import"react";var sr=()=>ef("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[St("g",{clipPath:"url(#clip0_4397_10817)",children:St("path",{d:"M7.75 12.25L15.25 4.75M15.25 4.75H11.5M15.25 4.75V8.5M13 11.5V13.75C13 14.5784 12.3284 15.25 11.5 15.25H6.25C5.42157 15.25 4.75 14.5784 4.75 13.75V8.5C4.75 7.67157 5.42157 7 6.25 7H8.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})}),St("defs",{children:St("clipPath",{id:"clip0_4397_10817",children:St("rect",{fill:"currentColor",height:"12",transform:"translate(4 4)",width:"12"})})})]});import{jsx as rf}from"react/jsx-runtime";import*as zi from"react";import{DecoratorBlockNode as tf}from"@lexical/react/LexicalDecoratorBlockNode.js";function of(t){let e=t.getAttribute("data-lexical-relationship-id"),o=t.getAttribute("data-lexical-relationship-relationTo");return e!=null&&o!=null?{node:Xi({relationTo:o,value:e})}:null}var Lt=class extends tf{__data;constructor({data:e,format:o,key:r}){super(o,r),this.__data=e}static clone(e){return new this({data:e.__data,format:e.__format,key:e.__key})}static getType(){return"relationship"}static importDOM(){return{div:e=>!e.hasAttribute("data-lexical-relationship-relationTo")||!e.hasAttribute("data-lexical-relationship-id")?null:{conversion:of,priority:2}}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id);let o={relationTo:e.relationTo,value:e.value},r=Xi(o);return r.setFormat(e.format),r}static isInline(){return!1}decorate(e,o){return null}exportDOM(){let e=document.createElement("div");e.setAttribute("data-lexical-relationship-id",String(typeof this.__data?.value=="object"?this.__data?.value?.id:this.__data?.value)),e.setAttribute("data-lexical-relationship-relationTo",this.__data?.relationTo);let o=document.createTextNode(this.getTextContent());return e.append(o),{element:e}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"relationship",version:2}}getData(){return this.getLatest().__data}getTextContent(){return`${this.__data?.relationTo} relation to ${typeof this.__data?.value=="object"?this.__data?.value?.id:this.__data?.value}`}setData(e){let o=this.getWritable();o.__data=e}};function Xi(t){return new Lt({data:t})}var nf=zi.lazy(()=>import("./RelationshipComponent-APF3CN47.js").then(t=>({default:t.RelationshipComponent})));function lf(t){let e=t.getAttribute("data-lexical-relationship-id"),o=t.getAttribute("data-lexical-relationship-relationTo");return e!=null&&o!=null?{node:je({relationTo:o,value:e})}:null}var Ne=class extends Lt{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importDOM(){return{div:e=>!e.hasAttribute("data-lexical-relationship-relationTo")||!e.hasAttribute("data-lexical-relationship-id")?null:{conversion:lf,priority:2}}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id);let o={relationTo:e.relationTo,value:e.value},r=je(o);return r.setFormat(e.format),r}decorate(e,o){return rf(nf,{className:o.theme.relationship??"LexicalEditorTheme__relationship",data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function je(t){return new Ne({data:t})}function ar(t){return t instanceof Ne}import{c as Ef}from"react/compiler-runtime";import{jsx as Nf}from"react/jsx-runtime";import{useLexicalComposerContext as Sf}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as Lf}from"@lexical/utils";import{useConfig as yf}from"@payloadcms/ui";import{$getPreviousSelection as If,$getSelection as Rf,$isParagraphNode as vf,$isRangeSelection as Mf,COMMAND_PRIORITY_EDITOR as Df,createCommand as Af}from"lexical";import{useEffect as Of}from"react";import{c as Cf}from"react/compiler-runtime";import{jsx as ro}from"react/jsx-runtime";import{useLexicalComposerContext as bf}from"@lexical/react/LexicalComposerContext.js";import{$getNodeByKey as kf,COMMAND_PRIORITY_EDITOR as _f}from"lexical";import{useEffect as Tf,useState as qi}from"react";import{c as sf}from"react/compiler-runtime";import{jsx as af}from"react/jsx-runtime";import{useLexicalComposerContext as cf}from"@lexical/react/LexicalComposerContext";import{useListDrawer as uf,useModal as df}from"@payloadcms/ui";import{$getNodeByKey as Zi,$getPreviousSelection as mf,$getRoot as pf,$getSelection as ff,$isRangeSelection as hf,$setSelection as gf}from"lexical";import{useEffect as xf,useState as Yi}from"react";var yt=t=>{let e=sf(23),[o]=cf(),[r,n]=Yi(null),[l,i]=Yi(!1),[s,c,u]=uf(t),{closeDrawer:d,drawerSlug:a,isDrawerOpen:p,openDrawer:m}=u,{modalState:f}=df(),h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{let F=ff()??mf();n(F)},e[0]=h):h=e[0];let x=h,b;e[1]!==o||e[2]!==r?(b=()=>{r&&o.update(()=>{if(hf(r)){let{anchor:F,focus:I}=r;Zi(F.key)&&Zi(I.key)&&gf(r.clone())}else pf().selectEnd()},{discrete:!0,skipTransforms:!0})},e[1]=o,e[2]=r,e[3]=b):b=e[3];let N=b,D;e[4]!==d?(D=()=>{d()},e[4]=d,e[5]=D):D=e[5];let k=D,_,g;e[6]!==a||e[7]!==f||e[8]!==N||e[9]!==l?(_=()=>{if(!l)return;let F=f[a];F&&!F?.isOpen&&(i(!1),setTimeout(()=>{N()},1))},g=[f,a,N,l],e[6]=a,e[7]=f,e[8]=N,e[9]=l,e[10]=_,e[11]=g):(_=e[10],g=e[11]),xf(_,g);let S;e[12]!==c?(S=F=>af(c,{...F,onClick:()=>{x()}}),e[12]=c,e[13]=S):S=e[13];let M;e[14]!==m?(M=()=>{x(),m(),i(!0)},e[14]=m,e[15]=M):M=e[15];let O;return e[16]!==s||e[17]!==k||e[18]!==p||e[19]!==a||e[20]!==S||e[21]!==M?(O={closeListDrawer:k,isListDrawerOpen:p,ListDrawer:s,listDrawerSlug:a,ListDrawerToggler:S,openListDrawer:M},e[16]=s,e[17]=k,e[18]=p,e[19]=a,e[20]=S,e[21]=M,e[22]=O):O=e[22],O};var wf=({editor:t,relationTo:e,replaceNodeKey:o,value:r})=>{o?t.update(()=>{let n=kf(o);n&&n.replace(je({relationTo:e,value:r}))}):t.dispatchCommand(cr,{relationTo:e,value:r})},Qi=t=>{let e=Cf(16),{enabledCollectionSlugs:o}=t,[r]=bf(),n;e[0]!==o?.[0]?(n=()=>o?.[0],e[0]=o?.[0],e[1]=n):n=e[1];let[l]=qi(n),[i,s]=qi(null),c=o||void 0,u;e[2]!==l||e[3]!==c?(u={collectionSlugs:c,selectedCollection:l},e[2]=l,e[3]=c,e[4]=u):u=e[4];let{closeListDrawer:d,ListDrawer:a,openListDrawer:p}=yt(u),m,f;e[5]!==r||e[6]!==p?(m=()=>r.registerCommand(at,N=>(s(N?.replace?N?.replace.nodeKey:null),p(),!0),_f),f=[r,p],e[5]=r,e[6]=p,e[7]=m,e[8]=f):(m=e[7],f=e[8]),Tf(m,f);let h;e[9]!==d||e[10]!==r||e[11]!==i?(h=N=>{let{collectionSlug:D,doc:k}=N;wf({editor:r,relationTo:D,replaceNodeKey:i,value:k.id}),d()},e[9]=d,e[10]=r,e[11]=i,e[12]=h):h=e[12];let x=h,b;return e[13]!==a||e[14]!==x?(b=ro(a,{onSelect:x}),e[13]=a,e[14]=x,e[15]=b):b=e[15],b},es=t=>(t?.enabledCollectionSlugs?.length??-1)>0?ro(Qi,{...t}):ro(At,{...t,children:ro(Qi,{...t})});var cr=Af("INSERT_RELATIONSHIP_COMMAND"),ts=t=>{let e=Ef(10),{clientProps:o}=t,[r]=Sf(),{config:n}=yf(),{collections:l}=n,i=null;if(o?.enabledCollections)i=o?.enabledCollections;else if(o?.disabledCollections){let d;if(e[0]!==o?.disabledCollections||e[1]!==l){let a;e[3]!==o?.disabledCollections?(a=p=>{let{slug:m}=p;return!o?.disabledCollections?.includes(m)},e[3]=o?.disabledCollections,e[4]=a):a=e[4],d=l.filter(a).map($f),e[0]=o?.disabledCollections,e[1]=l,e[2]=d}else d=e[2];i=d}let s,c;e[5]!==r?(s=()=>{if(!r.hasNodes([Ne]))throw new Error("RelationshipPlugin: RelationshipNode not registered on editor");return r.registerCommand(cr,Ff,Df)},c=[r],e[5]=r,e[6]=s,e[7]=c):(s=e[6],c=e[7]),Of(s,c);let u;return e[8]!==i?(u=Nf(es,{enabledCollectionSlugs:i}),e[8]=i,e[9]=u):u=e[9],u};function $f(t){let{slug:e}=t;return e}function Ff(t){let e=Rf()||If();if(Mf(e)){let o=je(t),{focus:r}=e,n=r.getNode();Lf(o),vf(n)&&!n.__first&&n.remove()}return!0}var Bf=y({nodes:[Ne],plugins:[{Component:ts,position:"normal"}],slashMenu:{groups:[ee([{Icon:sr,key:"relationship",keywords:["relationship","relation","rel"],label:({i18n:t})=>t.t("lexical:relationship:label"),onSelect:({editor:t})=>{t.dispatchCommand(at,{replace:!1})}}])]},toolbarFixed:{groups:[ke([{ChildComponent:sr,isActive:({selection:t})=>{if(!Pf(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return ar(e)},key:"relationship",label:({i18n:t})=>t.t("lexical:relationship:label"),onSelect:({editor:t})=>{t.dispatchCommand(at,{replace:!1})}}])]}});import{c as us}from"react/compiler-runtime";import{jsx as me,jsxs as m0}from"react/jsx-runtime";import{useLexicalComposerContext as p0}from"@lexical/react/LexicalComposerContext.js";import{useScrollInfo as f0,useThrottledEffect as h0,useTranslation as g0}from"@payloadcms/ui";import*as Se from"react";import{useMemo as x0}from"react";import{c as Hf}from"react/compiler-runtime";import{jsx as jf}from"react/jsx-runtime";import{mergeRegister as Uf}from"@lexical/utils";import{$addUpdateTag as Gf,$getSelection as Wf}from"lexical";import{useDeferredValue as Vf,useEffect as Kf,useState as Jf}from"react";var os="toolbar-popup__button",It=t=>{let e=Hf(22),{children:o,editor:r,item:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={active:!1,enabled:!0},e[0]=l):l=e[0];let[i,s]=Jf(l),c=Vf(i),u=j(),d,a=c.enabled?"":"disabled",p=c.active?"active":"",m=n.key?`${os}-${n.key}`:"",f;e[1]!==a||e[2]!==p||e[3]!==m?(f=[os,a,p,m].filter(Boolean),e[1]=a,e[2]=p,e[3]=m,e[4]=f):f=e[4],d=f.join(" ");let h=d,x;e[5]!==r||e[6]!==u||e[7]!==n?(x=()=>{r.getEditorState().read(()=>{let O=Wf();if(!O)return;let F=n.isActive?n.isActive({editor:r,editorConfigContext:u,selection:O}):!1,I=n.isEnabled?n.isEnabled({editor:r,editorConfigContext:u,selection:O}):!0;s(T=>T.active===F&&T.enabled===I?T:{active:F,enabled:I})})},e[5]=r,e[6]=u,e[7]=n,e[8]=x):x=e[8];let b=x,N=Ot(),D,k;e[9]!==r||e[10]!==N||e[11]!==b?(D=()=>{let O=()=>N(b),F=Uf(r.registerUpdateListener(O));return document.addEventListener("mouseup",O),()=>{F(),document.removeEventListener("mouseup",O)}},k=[r,N,b],e[9]=r,e[10]=N,e[11]=b,e[12]=D,e[13]=k):(D=e[12],k=e[13]),Kf(D,k);let _;e[14]!==i||e[15]!==r||e[16]!==n?(_=()=>{i.enabled&&r.focus(()=>{r.update(Xf),n.onSelect?.({editor:r,isActive:i.active})})},e[14]=i,e[15]=r,e[16]=n,e[17]=_):_=e[17];let g=_,S=zf,M;return e[18]!==o||e[19]!==h||e[20]!==g?(M=jf("button",{className:h,onClick:g,onMouseDown:S,type:"button",children:o}),e[18]=o,e[19]=h,e[20]=g,e[21]=M):M=e[21],M};function Xf(){Gf("toolbar")}function zf(t){t.preventDefault()}import{c as o0}from"react/compiler-runtime";import{jsx as ot}from"react/jsx-runtime";import cs,{useCallback as r0,useDeferredValue as n0,useEffect as l0,useMemo as i0}from"react";import{mergeRegister as s0}from"@lexical/utils";import{useTranslation as a0}from"@payloadcms/ui";import{$getSelection as c0}from"lexical";import{jsx as Me,jsxs as rs}from"react/jsx-runtime";import{Button as Zf}from"@payloadcms/ui";import{$addUpdateTag as Yf,isDOMNode as qf}from"lexical";import no,{useCallback as Qf,useEffect as lo,useMemo as ls,useRef as ur,useState as dr}from"react";import{createPortal as e0}from"react-dom";var ns="toolbar-popup__dropdown-item",is=no.createContext(null);function ss({active:t,children:e,editor:o,enabled:r,Icon:n,item:l,tooltip:i}){let s=ls(()=>[ns,r===!1?"disabled":"",t?"active":"",l?.key?`${ns}-${l.key}`:""].filter(Boolean).join(" "),[r,t,l.key]),c=ur(null),u=no.use(is);if(u===null)throw new Error("DropDownItem must be used within a DropDown");let{registerItem:d}=u;return lo(()=>{c?.current!=null&&d(c)},[c,d]),Me(Zf,{"aria-label":i,buttonStyle:"none",className:s,disabled:r===!1,icon:n,iconPosition:"left",iconStyle:"none",onClick:()=>{r!==!1&&o.focus(()=>{o.update(()=>{Yf("toolbar")}),l.onSelect?.({editor:o,isActive:t})})},onMouseDown:a=>{a.preventDefault()},ref:c,tooltip:i,type:"button",children:e})}function t0({children:t,dropDownRef:e,itemsContainerClassNames:o,onClose:r}){let[n,l]=dr(),[i,s]=dr(),c=Qf(a=>{l(p=>p!=null?[...p,a]:[a])},[l]),u=a=>{if(n==null)return;let{key:p}=a;["ArrowDown","ArrowUp","Escape","Tab"].includes(p)&&a.preventDefault(),p==="Escape"||p==="Tab"?r():p==="ArrowUp"?s(m=>{if(m==null)return n[0];let f=n.indexOf(m)-1;return n[f===-1?n.length-1:f]}):p==="ArrowDown"&&s(m=>m==null?n[0]:n[n.indexOf(m)+1])},d=ls(()=>({registerItem:c}),[c]);return lo(()=>{n!=null&&i==null&&s(n[0]),i!=null&&i?.current!=null&&i.current.focus()},[n,i]),Me(is,{value:d,children:Me("div",{className:(o??["toolbar-popup__dropdown-items"]).join(" "),onKeyDown:u,ref:e,children:t})})}function as({buttonAriaLabel:t,buttonClassName:e,children:o,disabled:r=!1,Icon:n,itemsContainerClassNames:l,label:i,stopCloseOnClickSelf:s}){let c=ur(null),u=ur(null),[d,a]=dr(!1),p=()=>{a(!1),u?.current!=null&&u.current.focus()};lo(()=>{let f=u.current,h=c.current;if(d&&f!==null&&h!==null){let{left:x,top:b}=f.getBoundingClientRect(),N=window.scrollY||document.documentElement.scrollTop;h.style.top=`${b+N+f.offsetHeight+5}px`,h.style.left=`${Math.min(x-5,window.innerWidth-h.offsetWidth-20)}px`}},[c,u,d]),lo(()=>{let f=u.current;if(f!==null&&d){let h=x=>{let b=x.target;qf(b)&&(s&&c.current&&c.current.contains(b)||f.contains(b)||a(!1))};return document.addEventListener("click",h),()=>{document.removeEventListener("click",h)}}},[c,u,d,s]);let m=e0(Me(t0,{dropDownRef:c,itemsContainerClassNames:l,onClose:p,children:o}),document.body);return rs(no.Fragment,{children:[rs("button",{"aria-label":t,className:e+(d?" active":""),disabled:r,onClick:f=>{f.preventDefault(),a(!d)},onMouseDown:f=>{f.preventDefault()},ref:u,type:"button",children:[n&&Me(n,{}),i&&Me("span",{className:"toolbar-popup__dropdown-label",children:i}),Me("i",{className:"toolbar-popup__dropdown-caret"})]}),d&&Me(no.Fragment,{children:m})]})}var mr="toolbar-popup__dropdown",u0=t=>{let e=o0(18),{active:o,anchorElem:r,editor:n,enabled:l,item:i}=t,{i18n:s}=a0(),{fieldProps:c}=j(),{featureClientSchemaMap:u,schemaPath:d}=c;if(i.Component){let f;return e[0]!==o||e[1]!==r||e[2]!==n||e[3]!==l||e[4]!==i?(f=i?.Component&&ot(i.Component,{active:o,anchorElem:r,editor:n,enabled:l,item:i},i.key),e[0]=o,e[1]=r,e[2]=n,e[3]=l,e[4]=i,e[5]=f):f=e[5],f}let a=i.key,p;if(i.label){let f;e[6]!==u||e[7]!==s||e[8]!==i||e[9]!==d?(f=typeof i.label=="function"?i.label({featureClientSchemaMap:u,i18n:s,schemaPath:d}):i.label,e[6]=u,e[7]=s,e[8]=i,e[9]=d,e[10]=f):f=e[10],a=f}a.length>25?p=a.substring(0,25)+"...":p=a;let m;return e[11]!==o||e[12]!==p||e[13]!==n||e[14]!==l||e[15]!==i||e[16]!==a?(m=ot(ss,{active:o,editor:n,enabled:l,Icon:i?.ChildComponent?ot(i.ChildComponent,{}):void 0,item:i,tooltip:a,children:ot("span",{className:"text",children:p})},i.key),e[11]=o,e[12]=p,e[13]=n,e[14]=l,e[15]=i,e[16]=a,e[17]=m):m=e[17],m},d0=cs.memo(u0),Ue=({anchorElem:t,classNames:e,editor:o,group:r,Icon:n,itemsContainerClassNames:l,label:i,maxActiveItems:s,onActiveChange:c})=>{let[u,d]=cs.useState({activeItemKeys:[],enabledGroup:!0,enabledItemKeys:[]}),a=n0(u),p=j(),{items:m,key:f}=r,h=Ot(),x=r0(()=>{o.getEditorState().read(()=>{let N=c0();if(!N)return;let D=[],k=[],_=[];for(let g of m)g.isActive&&(!s||D.length<s)&&g.isActive({editor:o,editorConfigContext:p,selection:N})&&(D.push(g.key),k.push(g)),g.isEnabled?g.isEnabled({editor:o,editorConfigContext:p,selection:N})&&_.push(g.key):_.push(g.key);d({activeItemKeys:D,enabledGroup:r.isEnabled?r.isEnabled({editor:o,editorConfigContext:p,selection:N}):!0,enabledItemKeys:_}),c&&c({activeItems:k})})},[o,p,r,m,s,c]);l0(()=>s0(o.registerUpdateListener(async()=>{await h(x)})),[o,h,x]);let b=i0(()=>m?.length?m.map(N=>ot(d0,{active:a.activeItemKeys.includes(N.key),anchorElem:t,editor:o,enabled:a.enabledItemKeys.includes(N.key),item:N},N.key)):null,[m,a,t,o]);return ot(as,{buttonAriaLabel:`${f} dropdown`,buttonClassName:[mr,`${mr}-${f}`,...e||[]].filter(Boolean).join(" "),disabled:!a.enabledGroup,Icon:n,itemsContainerClassNames:[`${mr}-items`,...l||[]],label:i,children:b},f)};function C0({anchorElem:t,editor:e,item:o}){return o.Component?o?.Component&&me(o.Component,{anchorElem:t,editor:e,item:o},o.key):o.ChildComponent?me(It,{editor:e,item:o,children:me(o.ChildComponent,{})},o.key):null}function b0(t){let e=us(23),{anchorElem:o,editor:r,editorConfig:n,group:l,index:i}=t,{i18n:s}=g0(),{fieldProps:c}=j(),{featureClientSchemaMap:u,schemaPath:d}=c,[a,p]=Se.useState(void 0),[m,f]=Se.useState(void 0),h;e[0]!==l.ChildComponent||e[1]!==l.items||e[2]!==l.type?(h=()=>{l?.type==="dropdown"&&l.items.length&&l.ChildComponent?f(()=>l.ChildComponent):f(void 0)},e[0]=l.ChildComponent,e[1]=l.items,e[2]=l.type,e[3]=h):h=e[3];let x;e[4]!==l?(x=[l],e[4]=l,e[5]=x):x=e[5],Se.useEffect(h,x);let b;e[6]!==u||e[7]!==l.ChildComponent||e[8]!==l.items||e[9]!==l.type||e[10]!==s||e[11]!==d?(b=_=>{let{activeItems:g}=_;if(!g.length){l?.type==="dropdown"&&l.items.length&&l.ChildComponent?(f(()=>l.ChildComponent),p(void 0)):(f(void 0),p(void 0));return}let S=g[0],M=S.key;S.label&&(M=typeof S.label=="function"?S.label({featureClientSchemaMap:u,i18n:s,schemaPath:d}):S.label),M.length>25&&(M=M.substring(0,25)+"..."),g.length===1?(p(M),f(()=>S.ChildComponent)):(p(s.t("lexical:general:toolbarItemsActive",{count:g.length})),l?.type==="dropdown"&&l.items.length&&l.ChildComponent?f(()=>l.ChildComponent):f(void 0))},e[6]=u,e[7]=l.ChildComponent,e[8]=l.items,e[9]=l.type,e[10]=s,e[11]=d,e[12]=b):b=e[12];let N=b,D=`fixed-toolbar__group fixed-toolbar__group-${l.key}`,k;return e[13]!==m||e[14]!==o||e[15]!==a||e[16]!==r||e[17]!==n.features.toolbarFixed?.groups.length||e[18]!==l||e[19]!==i||e[20]!==N||e[21]!==D?(k=m0("div",{className:D,children:[l.type==="dropdown"&&l.items.length?m?me(Ue,{anchorElem:o,editor:r,group:l,Icon:m,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:l.maxActiveItems??1,onActiveChange:N}):me(Ue,{anchorElem:o,editor:r,group:l,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:l.maxActiveItems??1,onActiveChange:N}):null,l.type==="buttons"&&l.items.length?l.items.map(_=>me(C0,{anchorElem:o,editor:r,item:_},_.key)):null,i<n.features.toolbarFixed?.groups.length-1&&me("div",{className:"divider"})]},l.key),e[13]=m,e[14]=o,e[15]=a,e[16]=r,e[17]=n.features.toolbarFixed?.groups.length,e[18]=l,e[19]=i,e[20]=N,e[21]=D,e[22]=k):k=e[22],k}function k0({anchorElem:t,clientProps:e,editor:o,editorConfig:r,parentWithFixedToolbar:n}){let l=Se.useRef(null),{y:i}=f0(),s=x0(()=>{if(!n||e?.disableIfParentHasFixedToolbar)return null;let u=n.editorContainerRef.current.previousElementSibling;for(;u;){if(u.classList.contains("fixed-toolbar"))return u;u=u.previousElementSibling}return null},[e?.disableIfParentHasFixedToolbar,n]);return h0(()=>{if(!s)return;let c=l.current;if(!c)return;let u=c.getBoundingClientRect(),d=s.getBoundingClientRect();if(!(u.bottom<d.top||u.top>d.bottom))c.classList.remove("fixed-toolbar"),c.classList.add("fixed-toolbar","fixed-toolbar--overlapping"),s.classList.remove("fixed-toolbar"),s.classList.add("fixed-toolbar","fixed-toolbar--hide");else{if(!c.classList.contains("fixed-toolbar--overlapping"))return;c.classList.remove("fixed-toolbar--overlapping"),c.classList.add("fixed-toolbar"),s.classList.remove("fixed-toolbar--hide"),s.classList.add("fixed-toolbar")}},50,[l,s,i]),me("div",{className:"fixed-toolbar",onFocus:c=>{c.stopPropagation()},ref:l,children:o.isEditable()&&me(Se.Fragment,{children:r?.features&&r.features?.toolbarFixed?.groups.map((c,u)=>me(b0,{anchorElem:t,editor:o,editorConfig:r,group:c,index:u},c.key))})})}var ds=t=>{if(t.parentEditor?.editorConfig){if(t.parentEditor?.editorConfig.resolvedFeatureMap.has("toolbarFixed"))return t.parentEditor;if(t.parentEditor)return ds(t.parentEditor)}return!1},ms=t=>{let e=us(6),{clientProps:o}=t,[r]=p0(),n=j(),{editorConfig:l}=n,i=o.applyToFocusedEditor&&n.focusedEditor?.editor||r,s=o.applyToFocusedEditor&&n.focusedEditor?.editorConfig||l,c,u;if(e[0]!==o.disableIfParentHasFixedToolbar||e[1]!==i||e[2]!==s||e[3]!==n){u=Symbol.for("react.early_return_sentinel");e:{let d=ds(n);if(o?.disableIfParentHasFixedToolbar&&d){u=null;break e}if(!s?.features?.toolbarFixed?.groups?.length){u=null;break e}c=me(k0,{anchorElem:document.body,editor:i,editorConfig:s,parentWithFixedToolbar:d})}e[0]=o.disableIfParentHasFixedToolbar,e[1]=i,e[2]=s,e[3]=n,e[4]=c,e[5]=u}else c=e[4],u=e[5];return u!==Symbol.for("react.early_return_sentinel")?u:c};var _0=y({plugins:[{Component:ms,position:"aboveContainer"}]});import{c as hs}from"react/compiler-runtime";import{jsx as ge,jsxs as gs}from"react/jsx-runtime";import{useLexicalComposerContext as T0}from"@lexical/react/LexicalComposerContext.js";import{mergeRegister as xs}from"@lexical/utils";import{$getSelection as Cs,$isRangeSelection as ps,$isTextNode as w0,COMMAND_PRIORITY_LOW as E0,getDOMSelection as bs,SELECTION_CHANGE_COMMAND as N0}from"lexical";import{useCallback as so,useEffect as Rt,useRef as fs,useState as S0}from"react";import*as ao from"react";import{createPortal as L0}from"react-dom";function pr(t,e){let o=t.getRangeAt(0),r;if(t.anchorNode===e){let n=e;for(;n.firstElementChild!=null;)n=n.firstElementChild;r=n.getBoundingClientRect()}else r=o.getBoundingClientRect();return r}function io(t){let{alwaysDisplayOnTop:e=!1,anchorElem:o,anchorFlippedOffset:r=0,floatingElem:n,horizontalOffset:l=32,horizontalPosition:i="left",specialHandlingForCaret:s=!1,targetRect:c,verticalGap:u=10}=t,d=o.parentElement;if(c===null||d==null){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}let a=n.getBoundingClientRect(),p=o.getBoundingClientRect(),m=d.getBoundingClientRect(),f=c.top-a.height-u,h=c.left-l;i==="center"&&(h=c.left+c.width/2-a.width/2);let x=0;return!e&&f<m.top&&!s&&(x=a.height+c.height+u*2,f+=x),i==="center"?h+a.width>m.right?h=m.right-a.width-l:h<m.left&&(h=m.left+l):h+a.width>m.right&&(h=m.right-a.width-l),h-=p.left,n.style.opacity="1",s&&r!==0?(f-=p.bottom-r+a.height-3,n.style.transform=`translate(${h}px, ${f}px) rotate(180deg)`):(f-=p.top,n.style.transform=`translate(${h}px, ${f}px)`),x}function y0({anchorElem:t,editor:e,item:o}){return o.Component?o?.Component&&ge(o.Component,{anchorElem:t,editor:e,item:o},o.key):o.ChildComponent?ge(It,{editor:e,item:o,children:ge(o.ChildComponent,{})},o.key):null}function I0(t){let e=hs(19),{anchorElem:o,editor:r,group:n,index:l}=t,{editorConfig:i}=j(),[s,c]=ao.useState(),u;e[0]!==n.ChildComponent||e[1]!==n.items||e[2]!==n.type?(u=()=>{n?.type==="dropdown"&&n.items.length&&n.ChildComponent?c(()=>n.ChildComponent):c(void 0)},e[0]=n.ChildComponent,e[1]=n.items,e[2]=n.type,e[3]=u):u=e[3];let d;e[4]!==n?(d=[n],e[4]=n,e[5]=d):d=e[5],ao.useEffect(u,d);let a;e[6]!==n.ChildComponent||e[7]!==n.items||e[8]!==n.type?(a=h=>{let{activeItems:x}=h;if(!x.length){n?.type==="dropdown"&&n.items.length&&n.ChildComponent?c(()=>n.ChildComponent):c(void 0);return}let b=x[0];c(()=>b?.ChildComponent)},e[6]=n.ChildComponent,e[7]=n.items,e[8]=n.type,e[9]=a):a=e[9];let p=a,m=`inline-toolbar-popup__group inline-toolbar-popup__group-${n.key}`,f;return e[10]!==s||e[11]!==o||e[12]!==r||e[13]!==i.features.toolbarInline?.groups.length||e[14]!==n||e[15]!==l||e[16]!==p||e[17]!==m?(f=gs("div",{className:m,children:[n.type==="dropdown"&&n.items.length?s?ge(Ue,{anchorElem:o,editor:r,group:n,Icon:s,maxActiveItems:n.maxActiveItems??1,onActiveChange:p}):ge(Ue,{anchorElem:o,editor:r,group:n,maxActiveItems:n.maxActiveItems??1,onActiveChange:p}):null,n.type==="buttons"&&n.items.length?n.items.map(h=>ge(y0,{anchorElem:o,editor:r,item:h},h.key)):null,l<i.features.toolbarInline?.groups.length-1&&ge("div",{className:"divider"})]},n.key),e[10]=s,e[11]=o,e[12]=r,e[13]=i.features.toolbarInline?.groups.length,e[14]=n,e[15]=l,e[16]=p,e[17]=m,e[18]=f):f=e[18],f}function R0({anchorElem:t,editor:e}){let o=fs(null),r=fs(null),{editorConfig:n}=j(),l=so(()=>{if(o?.current){let u=o.current.style.opacity==="0",d=o.current.style.pointerEvents==="none";u||(o.current.style.opacity="0"),d||(o.current.style.pointerEvents="none")}},[o]),i=so(u=>{if(o?.current&&(u.buttons===1||u.buttons===3)){let d=o.current.style.opacity==="0",a=o.current.style.pointerEvents==="none";if(!d||!a){let p=u.clientX,m=u.clientY,f=document.elementFromPoint(p,m);o.current.contains(f)||l()}}},[l]),s=so(()=>{o?.current&&(o.current.style.opacity!=="1"&&(o.current.style.opacity="1"),o.current.style.pointerEvents!=="auto"&&(o.current.style.pointerEvents="auto"))},[]);Rt(()=>(document.addEventListener("mousemove",i),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)}),[o,i,s]);let c=so(()=>{let u=Cs(),d=bs(e._window);if(o.current===null)return;let a=t.querySelector(":scope > .link-editor"),p=a!==null&&"style"in a&&a?.style?.opacity==="1",m=e.getRootElement();if(u!==null&&d!==null&&!d.isCollapsed&&m!==null&&m.contains(d.anchorNode)){let f=pr(d,m),h=io({alwaysDisplayOnTop:p,anchorElem:t,floatingElem:o.current,horizontalPosition:"center",targetRect:f});r.current&&io({anchorElem:o.current,anchorFlippedOffset:h,floatingElem:r.current,horizontalOffset:5,horizontalPosition:"center",specialHandlingForCaret:!0,targetRect:f,verticalGap:8})}else l()},[e,l,t]);return Rt(()=>{let u=t.parentElement,d=()=>{e.getEditorState().read(()=>{c()})};return window.addEventListener("resize",d),u&&u.addEventListener("scroll",d),()=>{window.removeEventListener("resize",d),u&&u.removeEventListener("scroll",d)}},[e,c,t]),Rt(()=>(e.getEditorState().read(()=>{c()}),xs(e.registerUpdateListener(({editorState:u})=>{u.read(()=>{c()})}),e.registerCommand(N0,()=>(c(),!1),E0))),[e,c]),gs("div",{className:"inline-toolbar-popup",ref:o,children:[ge("div",{className:"caret",ref:r}),n?.features&&n.features?.toolbarInline?.groups.map((u,d)=>ge(I0,{anchorElem:t,editor:e,group:u,index:d},u.key))]})}function v0(t,e){let o=hs(12),[r,n]=S0(!1),l;o[0]!==t?(l=()=>{t.getEditorState().read(()=>{if(t.isComposing())return;let p=Cs(),m=bs(t._window),f=t.getRootElement();if(m!==null&&(!ps(p)||f===null||!f.contains(m.anchorNode))){n(!1);return}if(!ps(p))return;if(p.getTextContent()!==""){let x=p.getNodes(),b=!1;for(let N of x)if(w0(N)){n(!0),b=!0;break}b||n(!1)}else n(!1);let h=p.getTextContent().replace(/\n/g,"");if(!p.isCollapsed()&&h===""){n(!1);return}})},o[0]=t,o[1]=l):l=o[1];let i=l,s,c;o[2]!==i?(s=()=>(document.addEventListener("selectionchange",i),document.addEventListener("mouseup",i),()=>{document.removeEventListener("selectionchange",i),document.removeEventListener("mouseup",i)}),c=[i],o[2]=i,o[3]=s,o[4]=c):(s=o[3],c=o[4]),Rt(s,c);let u,d;if(o[5]!==t||o[6]!==i?(u=()=>xs(t.registerUpdateListener(()=>{i()}),t.registerRootListener(()=>{t.getRootElement()===null&&n(!1)})),d=[t,i],o[5]=t,o[6]=i,o[7]=u,o[8]=d):(u=o[7],d=o[8]),Rt(u,d),!r||!t.isEditable())return null;let a;return o[9]!==e||o[10]!==t?(a=L0(ge(R0,{anchorElem:e,editor:t}),e),o[9]=e,o[10]=t,o[11]=a):a=o[11],a}var ks=t=>{let{anchorElem:e}=t,[o]=T0();return v0(o,e)};var M0=y({plugins:[{Component:ks,position:"floatingAnchorElem"}]});import{TableCellNode as Th,TableNode as wh,TableRowNode as Eh}from"@lexical/table";import{jsx as _s}from"react/jsx-runtime";import"react";var fr=()=>_s("svg",{className:"icon",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:_s("path",{clipRule:"evenodd",d:"M5.33333 4.5C4.8731 4.5 4.5 4.8731 4.5 5.33333V7.5H9.5V4.5H5.33333ZM5.33333 3.5C4.32081 3.5 3.5 4.32081 3.5 5.33333V14.6667C3.5 15.6792 4.32081 16.5 5.33333 16.5H14.6667C15.6792 16.5 16.5 15.6792 16.5 14.6667V5.33333C16.5 4.32081 15.6792 3.5 14.6667 3.5H5.33333ZM10.5 4.5V7.5H15.5V5.33333C15.5 4.8731 15.1269 4.5 14.6667 4.5H10.5ZM15.5 8.5H10.5V11.5H15.5V8.5ZM15.5 12.5H10.5V15.5H14.6667C15.1269 15.5 15.5 15.1269 15.5 14.6667V12.5ZM9.5 15.5V12.5H4.5V14.6667C4.5 15.1269 4.8731 15.5 5.33333 15.5H9.5ZM4.5 11.5H9.5V8.5H4.5V11.5Z",fill:"currentColor",fillRule:"evenodd"})});import{$createTableCellNode as D0,$createTableNode as A0,$createTableRowNode as O0,$isTableCellNode as Ts,$isTableNode as hr,$isTableRowNode as gr,TableCellHeaderStates as co,TableCellNode as $0,TableNode as F0,TableRowNode as P0}from"@lexical/table";import{$isParagraphNode as B0,$isTextNode as H0}from"lexical";var Es=/^\|(.+)\|\s?$/,j0=/^(\| ?:?-*:? ?)+\|\s?$/,Ns=({allTransformers:t})=>({type:"element",dependencies:[F0,P0,$0],export:e=>{if(!hr(e))return null;let o=[];for(let r of e.getChildren()){let n=[];if(!gr(r))continue;let l=!1;for(let i of r.getChildren())Ts(i)&&(n.push(Br(t,i).replace(/\n/g,"\\n").trim()),i.__headerState===co.ROW&&(l=!0));o.push(`| ${n.join(" | ")} |`),l&&o.push(`| ${n.map(i=>"---").join(" | ")} |`)}return o.join(`
`)},regExp:Es,replace:(e,o,r)=>{let n=r[0];if(!n)return;if(j0.test(n)){let a=e.getPreviousSibling();if(!a||!hr(a))return;let p=a.getChildren(),m=p[p.length-1];if(!m||!gr(m))return;m.getChildren().forEach(f=>{Ts(f)&&f.setHeaderStyles(co.ROW,co.ROW)}),e.remove();return}let l=ws(n,t);if(l==null)return;let i=[l],s=e.getPreviousSibling(),c=l.length;for(;s&&!(!B0(s)||s.getChildrenSize()!==1);){let a=s.getFirstChild();if(!H0(a))break;let p=ws(a.getTextContent(),t);if(p==null)break;c=Math.max(c,p.length),i.unshift(p);let m=s.getPreviousSibling();s.remove(),s=m}let u=A0();for(let a of i){let p=O0();u.append(p);for(let m=0;m<c;m++)p.append(m<a.length?a[m]:Ss("",t))}let d=e.getPreviousSibling();hr(d)&&U0(d)===c?(d.append(...u.getChildren()),e.remove()):e.replace(u),u.selectEnd()}});function U0(t){let e=t.getFirstChild();return gr(e)?e.getChildrenSize():0}var Ss=(t,e)=>{t=t.replace(/\\n/g,`
`);let o=D0(co.NO_STATUS);return Pr(t,e,o),o},ws=(t,e)=>{let o=t.match(Es);return!o||!o[1]?null:o[1].split("|").map(r=>Ss(r,e))};import{c as W0}from"react/compiler-runtime";import{jsx as P,jsxs as Le}from"react/jsx-runtime";import{useLexicalComposerContext as Rs}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as V0}from"@lexical/react/useLexicalEditable";import{$computeTableMapSkipCellCheck as Cr,$deleteTableColumn__EXPERIMENTAL as K0,$deleteTableRow__EXPERIMENTAL as J0,$getNodeTriplet as X0,$getTableCellNodeFromLexicalNode as ys,$getTableColumnIndexFromTableCellNode as z0,$getTableNodeFromLexicalNodeOrThrow as ye,$getTableRowIndexFromTableCellNode as Z0,$insertTableColumn__EXPERIMENTAL as Y0,$insertTableRow__EXPERIMENTAL as q0,$isTableCellNode as vs,$isTableSelection as vt,$unmergeCell as Q0,getTableElement as br,getTableObserverFromTableElement as kr,TableCellHeaderStates as De,TableCellNode as e1}from"@lexical/table";import{mergeRegister as t1}from"@lexical/utils";import{useScrollInfo as o1}from"@payloadcms/ui";import{$createParagraphNode as r1,$getSelection as mo,$isElementNode as n1,$isParagraphNode as l1,$isRangeSelection as _r,$isTextNode as i1,$setSelection as s1,COMMAND_PRIORITY_CRITICAL as a1,getDOMSelection as c1,isDOMNode as u1,SELECTION_CHANGE_COMMAND as d1}from"lexical";import*as Tr from"react";import{useCallback as pe,useEffect as rt,useRef as uo,useState as nt}from"react";import{createPortal as Ms}from"react-dom";import{jsx as xr,jsxs as G0}from"react/jsx-runtime";import"react";var Ls=()=>G0("svg",{fill:"none",height:"18",viewBox:"0 0 20 20",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[xr("path",{d:"M5 11C5.55228 11 6 10.5523 6 10C6 9.44772 5.55228 9 5 9C4.44772 9 4 9.44772 4 10C4 10.5523 4.44772 11 5 11Z",fill:"currentColor"}),xr("path",{d:"M10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}),xr("path",{d:"M15 11C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9C14.4477 9 14 9.44772 14 10C14 10.5523 14.4477 11 15 11Z",fill:"currentColor"})]});function Is(t){let e=t.getShape();return{columns:e.toX-e.fromX+1,rows:e.toY-e.fromY+1}}function m1(){let t=mo();if(_r(t)&&!t.isCollapsed()||vt(t)&&!t.anchor.is(t.focus)||!_r(t)&&!vt(t))return!1;let[e]=X0(t.anchor);return e.__colSpan>1||e.__rowSpan>1}function p1(t){if(t.getChildrenSize()!==1)return!1;let e=t.getFirstChildOrThrow();return!(!l1(e)||!e.isEmpty())}function f1(t){let e=t.getLastDescendant();i1(e)?e.select():n1(e)?e.selectEnd():e!==null&&e.selectNext()}function h1({cellMerge:t,contextRef:e,onClose:o,setIsMenuOpen:r,tableCellNode:n}){let[l]=Rs(),i=uo(null),[s,c]=nt(n),[u,d]=nt({columns:1,rows:1}),[a,p]=nt(!1),[m,f]=nt(!1),{y:h}=o1();rt(()=>l.registerMutationListener(e1,C=>{C.get(s.getKey())==="updated"&&l.getEditorState().read(()=>{c(s.getLatest())})},{skipInitialization:!0}),[l,s]),rt(()=>{l.getEditorState().read(()=>{let C=mo();if(vt(C)){let E=Is(C);d(Is(C)),p(E.columns>1||E.rows>1)}f(m1())})},[l]),rt(()=>{let C=e.current,E=i.current,R=l.getRootElement();if(C!=null&&E!=null&&R!=null){let L=R.getBoundingClientRect(),v=C.getBoundingClientRect();E.style.opacity="1";let w=E.getBoundingClientRect(),$=5,H=v.right+$;if(H+w.width>window.innerWidth||H+w.width>L.right){let Y=v.left-w.width-$;H=(Y<0?$:Y)+window.pageXOffset}E.style.left=`${H+window.pageXOffset}px`;let W=v.top;if(W+w.height>window.innerHeight){let Y=v.bottom-w.height;W=Y<0?$:Y}E.style.top=`${W}px`}},[e,i,l,h]),rt(()=>{function C(E){i.current!=null&&e.current!=null&&u1(E.target)&&!i.current.contains(E.target)&&!e.current.contains(E.target)&&r(!1)}return window.addEventListener("click",C),()=>window.removeEventListener("click",C)},[r,e]);let x=pe(()=>{l.update(()=>{if(s.isAttached()){let C=ye(s),E=br(C,l.getElementByKey(C.getKey()));if(E===null)throw new Error("Expected to find tableElement in DOM");let R=kr(E);R!==null&&R.$clearHighlight(),C.markDirty(),c(s.getLatest())}s1(null)})},[l,s]),b=()=>{l.update(()=>{let C=mo();if(vt(C)){let R=C.getNodes().filter(vs);if(R.length===0)return;let L=ye(R[0]),[v]=Cr(L,null,null),w=1/0,$=-1/0,H=1/0,W=-1/0,Y=new Set;for(let q of v)for(let K of q){if(!K||!K.cell)continue;let re=K.cell.getKey();if(!Y.has(re)&&R.some(ne=>ne.is(K.cell))){Y.add(re);let ne=K.startRow,se=K.startColumn,Ae=K.cell.__rowSpan||1,it=K.cell.__colSpan||1;w=Math.min(w,ne),$=Math.max($,ne+Ae-1),H=Math.min(H,se),W=Math.max(W,se+it-1)}}if(w===1/0||H===1/0)return;let We=$-w+1,V=W-H+1,U=v?.[w]?.[H];if(!U?.cell)return;let oe=U.cell;oe.setColSpan(V),oe.setRowSpan(We);let ue=new Set([oe.getKey()]);for(let q=w;q<=$;q++)for(let K=H;K<=W;K++){let re=v?.[q]?.[K];if(!re?.cell)continue;let ne=re.cell,se=ne.getKey();ue.has(se)||(ue.add(se),p1(ne)||oe.append(...ne.getChildren()),ne.remove())}oe.getChildrenSize()===0&&oe.append(r1()),f1(oe),o()}})},N=()=>{l.update(()=>{Q0()})},D=pe(C=>{l.update(()=>{for(let E=0;E<u.rows;E++)q0(C);o()})},[l,o,u.rows]),k=pe(C=>{l.update(()=>{for(let E=0;E<u.columns;E++)Y0(C);o()})},[l,o,u.columns]),_=pe(()=>{l.update(()=>{J0(),o()})},[l,o]),g=pe(()=>{l.update(()=>{ye(s).remove(),x(),o()})},[l,s,x,o]),S=pe(()=>{l.update(()=>{K0(),o()})},[l,o]),M=pe(()=>{l.update(()=>{let C=ye(s),E=Z0(s),[R]=Cr(C,null,null),L=new Set,v=s.getHeaderStyles()^De.ROW;if(R[E])for(let w=0;w<R[E].length;w++){let $=R[E][w];$?.cell&&(L.has($.cell)||(L.add($.cell),$.cell.setHeaderStyles(v,De.ROW)))}x(),o()})},[l,s,x,o]),O=pe(()=>{l.update(()=>{let C=ye(s),E=z0(s),[R]=Cr(C,null,null),L=new Set,v=s.getHeaderStyles()^De.COLUMN;if(R)for(let w=0;w<R.length;w++){let $=R?.[w]?.[E];$?.cell&&(L.has($.cell)||(L.add($.cell),$.cell.setHeaderStyles(v,De.COLUMN)))}x(),o()})},[l,s,x,o]),F=pe(()=>{l.update(()=>{if(s.isAttached()){let C=ye(s);C&&C.setRowStriping(!C.getRowStriping())}x(),o()})},[l,s,x,o]),I=pe(()=>{l.update(()=>{if(s.isAttached()){let C=ye(s);C&&C.setFrozenColumns(C.getFrozenColumns()===0?1:0)}x(),o()})},[l,s,x,o]),T=null;return t&&(a?T=P("button",{className:"item","data-test-id":"table-merge-cells",onClick:()=>b(),type:"button",children:P("span",{className:"text",children:"Merge cells"})}):m&&(T=P("button",{className:"item","data-test-id":"table-unmerge-cells",onClick:()=>N(),type:"button",children:P("span",{className:"text",children:"Unmerge cells"})}))),Ms(Le("div",{className:"table-action-menu-dropdown",onClick:C=>{C.stopPropagation()},ref:i,children:[T?Le(Tr.Fragment,{children:[T,P("hr",{})]}):null,P("button",{className:"item","data-test-id":"table-row-striping",onClick:()=>F(),type:"button",children:P("span",{className:"text",children:"Toggle Row Striping"})}),P("button",{className:"item","data-test-id":"table-freeze-first-column",onClick:()=>I(),type:"button",children:P("span",{className:"text",children:"Toggle First Column Freeze"})}),P("button",{className:"item","data-test-id":"table-insert-row-above",onClick:()=>D(!1),type:"button",children:Le("span",{className:"text",children:["Insert ",u.rows===1?"row":`${u.rows} rows`," above"]})}),P("button",{className:"item","data-test-id":"table-insert-row-below",onClick:()=>D(!0),type:"button",children:Le("span",{className:"text",children:["Insert ",u.rows===1?"row":`${u.rows} rows`," below"]})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-insert-column-before",onClick:()=>k(!1),type:"button",children:Le("span",{className:"text",children:["Insert ",u.columns===1?"column":`${u.columns} columns`," ","left"]})}),P("button",{className:"item","data-test-id":"table-insert-column-after",onClick:()=>k(!0),type:"button",children:Le("span",{className:"text",children:["Insert ",u.columns===1?"column":`${u.columns} columns`," ","right"]})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-delete-columns",onClick:()=>S(),type:"button",children:P("span",{className:"text",children:"Delete column"})}),P("button",{className:"item","data-test-id":"table-delete-rows",onClick:()=>_(),type:"button",children:P("span",{className:"text",children:"Delete row"})}),P("button",{className:"item","data-test-id":"table-delete",onClick:()=>g(),type:"button",children:P("span",{className:"text",children:"Delete table"})}),P("hr",{}),P("button",{className:"item","data-test-id":"table-row-header",onClick:()=>M(),type:"button",children:Le("span",{className:"text",children:[(s.__headerState&De.ROW)===De.ROW?"Remove":"Add"," ","row header"]})}),P("button",{className:"item","data-test-id":"table-column-header",onClick:()=>O(),type:"button",children:Le("span",{className:"text",children:[(s.__headerState&De.COLUMN)===De.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function g1({anchorElem:t,cellMerge:e}){let[o]=Rs(),r=uo(null),n=uo(null),[l,i]=nt(!1),[s,c]=nt(null),u=pe(()=>{let a=r.current,p=mo(),m=c1(o._window),f=document.activeElement;function h(){a&&(a.classList.remove("table-cell-action-button-container--active"),a.classList.add("table-cell-action-button-container--inactive")),c(null)}if(p==null||a==null)return h();let x=o.getRootElement(),b=null,N=null;if(_r(p)&&x!==null&&m!==null&&x.contains(m.anchorNode)){let k=ys(p.anchor.getNode());if(k==null||(N=o.getElementByKey(k.getKey()),N==null||!k.isAttached()))return h();let _=ye(k),g=br(_,o.getElementByKey(_.getKey()));if(g===null)throw new Error("TableActionMenu: Expected to find tableElement in DOM");b=kr(g),c(k)}else if(vt(p)){let k=ys(p.anchor.getNode());if(!vs(k))throw new Error("TableSelection anchorNode must be a TableCellNode");let _=ye(k),g=br(_,o.getElementByKey(_.getKey()));if(g===null)throw new Error("TableActionMenu: Expected to find tableElement in DOM");b=kr(g),N=o.getElementByKey(k.getKey())}else if(!f)return h();if(b===null||N===null)return h();let D=!b||!b.isSelecting;if(a.classList.toggle("table-cell-action-button-container--active",D),a.classList.toggle("table-cell-action-button-container--inactive",!D),D){let k=N.getBoundingClientRect(),_=t.getBoundingClientRect(),g=k.top-_.top,S=k.right-_.left;a.style.transform=`translate(${S}px, ${g}px)`}},[o,t]);rt(()=>{let a,p=()=>{a=void 0,o.getEditorState().read(u)},m=()=>(a===void 0&&(a=setTimeout(p,0)),!1);return t1(o.registerUpdateListener(m),o.registerCommand(d1,m,a1),o.registerRootListener((f,h)=>{h&&h.removeEventListener("pointerup",m),f&&(f.addEventListener("pointerup",m),m())}),()=>clearTimeout(a))});let d=uo(s);return rt(()=>{d.current!==s&&i(!1),d.current=s},[d,s]),P("div",{className:"table-cell-action-button-container",ref:r,children:s!=null&&Le(Tr.Fragment,{children:[P("button",{className:"table-cell-action-button",onClick:a=>{a.stopPropagation(),i(!l)},ref:n,type:"button",children:P(Ls,{})}),l&&P(h1,{cellMerge:e,contextRef:n,onClose:()=>i(!1),setIsMenuOpen:i,tableCellNode:s})]})})}var Ds=t=>{let e=W0(3),{anchorElem:o}=t,r=V0(),n;return e[0]!==o||e[1]!==r?(n=Ms(r?P(g1,{anchorElem:o??document.body,cellMerge:!0}):null,o??document.body),e[0]=o,e[1]=r,e[2]=n):n=e[2],n};import{c as x1}from"react/compiler-runtime";import{jsx as fo,jsxs as C1}from"react/jsx-runtime";import{useLexicalComposerContext as b1}from"@lexical/react/LexicalComposerContext";import{useLexicalEditable as k1}from"@lexical/react/useLexicalEditable";import{$computeTableMapSkipCellCheck as _1,$getTableNodeFromLexicalNodeOrThrow as wr,$getTableRowIndexFromTableCellNode as T1,$isTableCellNode as As,$isTableRowNode as w1,getDOMCellFromTarget as E1,getTableElement as N1,TableNode as Os}from"@lexical/table";import{calculateZoomLevel as $s,mergeRegister as S1}from"@lexical/utils";import{$getNearestNodeFromDOMNode as Er,isHTMLElement as L1}from"lexical";import*as Ps from"react";import{useCallback as Mt,useEffect as Nr,useRef as po,useState as lt}from"react";import{createPortal as y1}from"react-dom";var I1=33,Fs=92;function R1({editor:t}){let e=po(null),o=po(null),r=po(null),[n,l]=lt(!1),i=j(),s=po(null),[c,u]=lt(null),[d,a]=lt(null),[p,m]=lt(!1),[f,h]=lt(null),x=Mt(()=>{a(null),e.current=null,h(null),s.current=null,r.current=null},[]),b=I=>(I.buttons&1)===1;Nr(()=>{let I=new Set;return S1(t.registerMutationListener(Os,T=>{for(let[C,E]of T)E==="destroyed"?I.delete(C):I.add(C);l(I.size>0)}),t.registerNodeTransform(Os,T=>{if(T.getColWidths())return T;let C=T.getColumnCount(),E=Fs;return T.setColWidths(Array(C).fill(E)),T}))},[t]),Nr(()=>{if(!n)return;let I=R=>{let L=R.target;if(L1(L)){if(f){u({x:R.clientX,y:R.clientY});return}if(m(b(R)),!(o.current&&o.current.contains(L))&&e.current!==L){e.current=L;let v=E1(L);v&&d!==v?t.getEditorState().read(()=>{let w=Er(v.elem);if(!w)throw new Error("TableCellResizer: Table cell node not found.");let $=wr(w),H=N1($,t.getElementByKey($.getKey()));if(!H)throw new Error("TableCellResizer: Table element not found.");e.current=L,r.current=H.getBoundingClientRect(),a(v)},{editor:t}):v==null&&x()}}},T=R=>{m(!0)},C=R=>{m(!1)},E=t.registerRootListener((R,L)=>{L?.removeEventListener("mousemove",I),L?.removeEventListener("mousedown",T),L?.removeEventListener("mouseup",C),R?.addEventListener("mousemove",I),R?.addEventListener("mousedown",T),R?.addEventListener("mouseup",C)});return()=>{E()}},[d,f,t,n,x]);let N=I=>I==="bottom",D=Mt(I=>{if(!d)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{let T=Er(d.elem);if(!As(T))throw new Error("TableCellResizer: Table cell node not found.");let C=wr(T),E=T1(T),R=C.getChildren(),v=T.getColSpan()===C.getColumnCount()?E:E+T.getRowSpan()-1;if(v>=R.length||v<0)throw new Error("Expected table cell to be inside of table row.");let w=R[v];if(!w1(w))throw new Error("Expected table row");let $=w.getHeight();if($===void 0){let W=w.getChildren();$=Math.min(...W.map(Y=>k(Y,t)??1/0))}let H=Math.max($+I,I1);w.setHeight(H)},{tag:"skip-scroll-into-view"})},[d,t]),k=(I,T)=>T.getElementByKey(I.getKey())?.clientHeight,_=(I,T)=>{let C;return T.forEach(E=>{E.forEach((R,L)=>{R.cell===I&&(C=L)})}),C},g=Mt(I=>{if(!d)throw new Error("TableCellResizer: Expected active cell.");t.update(()=>{let T=Er(d.elem);if(!As(T))throw new Error("TableCellResizer: Table cell node not found.");let C=wr(T),[E]=_1(C,null,null),R=_(T,E);if(R===void 0)throw new Error("TableCellResizer: Table column not found.");let L=C.getColWidths();if(!L)return;let v=L[R];if(v===void 0)return;let w=[...L],$=Math.max(v+I,Fs);w[R]=$,C.setColWidths(w)},{tag:"skip-scroll-into-view"})},[d,t]),S=Mt(I=>{let T=C=>{if(C.preventDefault(),C.stopPropagation(),!d)throw new Error("TableCellResizer: Expected active cell.");if(s.current){let{x:E,y:R}=s.current;if(d===null)return;let L=$s(C.target);if(N(I)){let v=(C.clientY-R)/L;D(v)}else{let v=(C.clientX-E)/L;g(v)}x(),document.removeEventListener("mouseup",T)}};return T},[d,x,g,D]),M=Mt(I=>T=>{if(T.preventDefault(),T.stopPropagation(),!d)throw new Error("TableCellResizer: Expected active cell.");s.current={x:T.clientX,y:T.clientY},u(s.current),h(I),document.addEventListener("mouseup",S(I))},[d,S]),[O,F]=lt({bottom:null,left:null,right:null,top:null});return Nr(()=>{if(d){let{height:I,left:T,top:C,width:E}=d.elem.getBoundingClientRect(),R=$s(d.elem),L=10,v={bottom:{backgroundColor:"none",cursor:"row-resize",height:`${L}px`,left:`${window.scrollX+T}px`,top:`${window.scrollY+C+I-L/2}px`,width:`${E}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${I}px`,left:`${window.scrollX+T+E-L/2}px`,top:`${window.scrollY+C}px`,width:`${L}px`}},w=r.current;f&&c&&w&&(N(f)?(v[f].left=`${window.scrollX+w.left}px`,v[f].top=`${window.scrollY+c.y/R}px`,v[f].height="3px",v[f].width=`${w.width}px`):(v[f].top=`${window.scrollY+w.top}px`,v[f].left=`${window.scrollX+c.x/R}px`,v[f].width="3px",v[f].height=`${w.height}px`),v[f].backgroundColor="#adf"),F(v)}else F({bottom:null,left:null,right:null,top:null})},[d,f,c]),fo("div",{ref:o,children:d!=null&&!p&&C1(Ps.Fragment,{children:[fo("div",{className:`${i.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`,onMouseDown:M("right"),style:O.right||void 0}),fo("div",{className:`${i.editorConfig.lexical.theme.tableCellResizer} TableCellResizer__ui`,onMouseDown:M("bottom"),style:O.bottom||void 0})]})})}var Bs=()=>{let t=x1(3),[e]=b1(),o=k1(),r,n;return t[0]!==e||t[1]!==o?(n=o?y1(fo(R1,{editor:e}),document.body):null,t[0]=e,t[1]=o,t[2]=n):n=t[2],r=n,r};import{c as P1}from"react/compiler-runtime";import{jsx as Sr,jsxs as B1,Fragment as H1}from"react/jsx-runtime";import{useLexicalComposerContext as Js}from"@lexical/react/LexicalComposerContext";import{$getTableAndElementByKey as j1,$getTableColumnIndexFromTableCellNode as U1,$getTableRowIndexFromTableCellNode as G1,$insertTableColumn__EXPERIMENTAL as W1,$insertTableRow__EXPERIMENTAL as V1,$isTableCellNode as K1,$isTableNode as Us,getTableElement as J1,TableNode as X1}from"@lexical/table";import{$findMatchingParent as z1,mergeRegister as Z1}from"@lexical/utils";import{$getNearestNodeFromDOMNode as Gs,isHTMLElement as Y1}from"lexical";import{useEffect as Ws,useMemo as q1,useRef as Vs,useState as ho}from"react";import"react";import{createPortal as Q1}from"react-dom";import{c as O1}from"react/compiler-runtime";import{useEffect as $1,useRef as F1}from"react";var v1="Expected a function",M1=Math.max,D1=Math.min;function A1(t,e,o){let r,n,l=0,i,s=!1,c=!1,u,d,a,p=!0;if(typeof t!="function")throw new TypeError(v1);e=e||0,typeof o=="object"&&(s=!!o.leading,c="maxWait"in o,u=c?M1(o.maxWait||0,e):u,p="trailing"in o?!!o.trailing:p);function m(g){let S=r,M=i;return r=i=void 0,l=g,d=t.apply(M,S),d}function f(g){return l=g,a=setTimeout(b,e),s?m(g):d}function h(g){let S=g-n,M=g-l,O=e-S;return c?D1(O,u-M):O}function x(g){let S=g-n,M=g-l;return n===void 0||S>=e||S<0||c&&M>=u}function b(){let g=Date.now();if(x(g))return N(g);a=setTimeout(b,h(g))}function N(g){return a=void 0,p&&r?m(g):(r=i=void 0,d)}function D(){a!==void 0&&clearTimeout(a),l=0,r=n=i=a=void 0}function k(){return a===void 0?d:N(Date.now())}function _(){let g=Date.now(),S=x(g);if(r=arguments,i=this,n=g,S){if(a===void 0)return f(n);if(c)return clearTimeout(a),a=setTimeout(b,e),m(n)}return a===void 0&&(a=setTimeout(b,e)),d}return _.cancel=D,_.flush=k,_}var Hs=A1;function js(t,e,o){let r=O1(6),n=F1(null),l,i;r[0]!==t||r[1]!==o||r[2]!==e?(l=()=>(n.current=Hs(t,e,{maxWait:o}),()=>{n.current?.cancel()}),i=[t,e,o],r[0]=t,r[1]=o,r[2]=e,r[3]=l,r[4]=i):(l=r[3],i=r[4]),$1(l,i);let s;return r[5]===Symbol.for("react.memo_cache_sentinel")?(s=(...u)=>{let d=u;n.current&&n.current(...d)},r[5]=s):s=r[5],s}var Ks=20;function eh({anchorElem:t}){let[e]=Js(),o=j(),[r,n]=ho(!1),[l,i]=ho(!1),[s,c]=ho(!1),[u,d]=ho({}),a=Vs(new Set),p=Vs(null),m=js(x=>{let{isOutside:b,tableDOMNode:N}=th(x,o.editorConfig?.lexical);if(b){n(!1),i(!1);return}if(!N)return;p.current=N;let D=null,k=null,_=null;if(e.getEditorState().read(()=>{let L=Gs(N);if(K1(L)){let v=z1(L,w=>Us(w));if(!Us(v))return;if(_=J1(v,e.getElementByKey(v.getKey())),_){let w=v.getChildrenSize(),$=v.getChildAtIndex(0)?.getChildrenSize(),H=G1(L),W=U1(L);H===w-1?D=L:W===$-1&&(k=L)}}},{editor:e}),!_)return;let g=_.parentElement;if(!g)return;let{bottom:S,height:M,left:O,right:F,width:I,y:T}=_.getBoundingClientRect(),C=!1;g&&g.classList.contains("LexicalEditorTheme__tableScrollableWrapper")&&(C=g.scrollWidth>g.clientWidth);let{left:E,y:R}=t.getBoundingClientRect();D?(i(!1),n(!0),d({height:Ks,left:C&&g?g.offsetLeft:O-E,top:S-R+5,width:C&&g?g.offsetWidth:I})):k&&(i(!0),n(!1),d({height:M,left:F-E+5,top:T-R,width:Ks}))},50,250),f=q1(()=>new ResizeObserver(()=>{n(!1),i(!1)}),[]);Ws(()=>{if(s)return document.addEventListener("mousemove",m),()=>{n(!1),i(!1),document.removeEventListener("mousemove",m)}},[s,m]),Ws(()=>Z1(e.registerMutationListener(X1,x=>{e.getEditorState().read(()=>{let b=!1;for(let[N,D]of x)switch(D){case"created":{a.current.add(N),b=!0;break}case"destroyed":{a.current.delete(N),b=!0;break}default:break}if(b){f.disconnect();for(let N of a.current){let{tableElement:D}=j1(N);f.observe(D)}c(a.current.size>0)}},{editor:e})},{skipInitialization:!1})),[e,f]);let h=x=>{e.update(()=>{p.current&&(Gs(p.current)?.selectEnd(),x?(V1(),n(!1)):(W1(),i(!1)))})};return e?.isEditable()?B1(H1,{children:[r&&Sr("button",{"aria-label":"Add Row",className:o.editorConfig.lexical.theme.tableAddRows,onClick:()=>h(!0),style:{...u},type:"button"}),l&&Sr("button",{"aria-label":"Add Column",className:o.editorConfig.lexical.theme.tableAddColumns,onClick:()=>h(!1),style:{...u},type:"button"})]}):null}function th(t,e){let o=t.target;if(Y1(o)){let r=o.closest(`td.${e.theme.tableCell}, th.${e.theme.tableCell}`);return{isOutside:!(r||o.closest(`button.${e.theme.tableAddRows}`)||o.closest(`button.${e.theme.tableAddColumns}`)||o.closest(`div.${e.theme.tableCellResizer}`)),tableDOMNode:r}}else return{isOutside:!0,tableDOMNode:null}}function Xs(t){let e=P1(2),{anchorElem:o}=t,r=o===void 0?document.body:o,[n]=Js();if(!n?.isEditable())return null;let l;return e[0]!==r?(l=Q1(Sr(eh,{anchorElem:r}),r),e[0]=r,e[1]=l):l=e[1],l}import{c as oh}from"react/compiler-runtime";import{jsx as Lr,jsxs as rh}from"react/jsx-runtime";import{useLexicalComposerContext as nh}from"@lexical/react/LexicalComposerContext";import{TablePlugin as lh}from"@lexical/react/LexicalTablePlugin";import{INSERT_TABLE_COMMAND as ih,TableCellNode as sh,TableNode as ah,TableRowNode as ch}from"@lexical/table";import{mergeRegister as uh}from"@lexical/utils";import{formatDrawerSlug as dh,useEditDepth as mh}from"@payloadcms/ui";import{$getSelection as ph,$isRangeSelection as fh,COMMAND_PRIORITY_EDITOR as hh,createCommand as gh}from"lexical";import{createContext as xh,use as Ch,useEffect as bh,useMemo as kh,useState as _h}from"react";import*as zs from"react";var go=gh("OPEN_EMBED_DRAWER_COMMAND"),Zs=xh({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}});function Ys({children:t}){let[e,o]=_h({cellEditorConfig:null,cellEditorPlugins:null});return Lr(Zs,{value:kh(()=>({cellEditorConfig:e.cellEditorConfig,cellEditorPlugins:e.cellEditorPlugins,set:(r,n)=>{o({cellEditorConfig:r,cellEditorPlugins:n})}}),[e.cellEditorConfig,e.cellEditorPlugins]),children:t})}var qs=()=>{let t=oh(16),[e]=nh(),o=Ch(Zs),r=mh(),{fieldProps:n,uuid:l}=j(),{schemaPath:i}=n,s="lexical-table-create-"+l,c;t[0]!==r||t[1]!==s?(c=dh({slug:s,depth:r}),t[0]=r,t[1]=s,t[2]=c):c=t[2];let u=c,{toggleDrawer:d}=xe(u,!0),a;t[3]!==e||t[4]!==d?(a=()=>{if(!e.hasNodes([ah,ch,sh]))throw new Error("TablePlugin: TableNode, TableRowNode, or TableCellNode is not registered on editor");return uh(e.registerCommand(go,()=>{let h=null;return e.getEditorState().read(()=>{let x=ph();fh(x)&&(h=x)}),h&&d(),!0},hh))},t[3]=e,t[4]=d,t[5]=a):a=t[5];let p;t[6]!==o||t[7]!==e||t[8]!==d?(p=[o,e,d],t[6]=o,t[7]=e,t[8]=d,t[9]=p):p=t[9],bh(a,p);let m;t[10]!==e?(m=(h,x)=>{!x.columns||!x.rows||e.dispatchCommand(ih,{columns:String(x.columns),rows:String(x.rows)})},t[10]=e,t[11]=m):m=t[11];let f;return t[12]!==u||t[13]!==i||t[14]!==m?(f=rh(zs.Fragment,{children:[Lr(st,{drawerSlug:u,drawerTitle:"Create Table",featureKey:"experimental_table",handleDrawerSubmit:m,schemaPath:i,schemaPathSuffix:"fields"}),Lr(lh,{hasCellBackgroundColor:!1,hasCellMerge:!0,hasHorizontalScroll:!0})]}),t[12]=u,t[13]=i,t[14]=m,t[15]=f):f=t[15],f};var Nh=y({markdownTransformers:[Ns],nodes:[wh,Th,Eh],plugins:[{Component:qs,position:"normal"},{Component:Bs,position:"normal"},{Component:Ds,position:"floatingAnchorElem"},{Component:Xs,position:"floatingAnchorElem"}],providers:[Ys],slashMenu:{groups:[ee([{Icon:fr,key:"table",keywords:["table"],label:"Table",onSelect:({editor:t})=>{t.dispatchCommand(go,{})}}])]},toolbarFixed:{groups:[ke([{ChildComponent:fr,key:"table",label:"Table",onSelect:({editor:t})=>{t.dispatchCommand(go,{})}}])]}});import{$isNodeSelection as og}from"lexical";import{jsx as yr,jsxs as Sh}from"react/jsx-runtime";import"react";var Ir=()=>Sh("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[yr("path",{d:"M14.6667 4H5.33333C4.59695 4 4 4.59695 4 5.33333V14.6667C4 15.403 4.59695 16 5.33333 16H14.6667C15.403 16 16 15.403 16 14.6667V5.33333C16 4.59695 15.403 4 14.6667 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),yr("path",{d:"M7.99984 9.33366C8.73622 9.33366 9.33317 8.73671 9.33317 8.00033C9.33317 7.26395 8.73622 6.66699 7.99984 6.66699C7.26346 6.66699 6.6665 7.26395 6.6665 8.00033C6.6665 8.73671 7.26346 9.33366 7.99984 9.33366Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),yr("path",{d:"M16 11.9995L13.9427 9.94214C13.6926 9.69218 13.3536 9.55176 13 9.55176C12.6464 9.55176 12.3074 9.69218 12.0573 9.94214L6 15.9995",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});import{jsx as vh}from"react/jsx-runtime";import ta from"bson-objectid";import{$applyNodeReplacement as Mh}from"lexical";import*as oa from"react";import{jsx as Lh}from"react/jsx-runtime";import{DecoratorBlockNode as yh}from"@lexical/react/LexicalDecoratorBlockNode.js";import Qs from"bson-objectid";import{$applyNodeReplacement as Ih}from"lexical";import"react";function Rr(t){return t.parentElement!=null&&t.parentElement.tagName==="LI"&&t.previousSibling===null&&t.getAttribute("aria-roledescription")==="checkbox"}function Rh(t){if(t.hasAttribute("data-lexical-upload-relation-to")&&t.hasAttribute("data-lexical-upload-id")){let o=t.getAttribute("data-lexical-upload-id"),r=t.getAttribute("data-lexical-upload-relation-to");if(o!=null&&r!=null)return{node:ea({data:{fields:{},relationTo:r,value:o}})}}let e=t;return e.src.startsWith("file:///")||Rr(e),null}var Dt=class extends yh{__data;constructor({data:e,format:o,key:r}){super(o,r),this.__data=e}static clone(e){return new this({data:e.__data,format:e.__format,key:e.__key})}static getType(){return"upload"}static importDOM(){return{img:e=>({conversion:Rh,priority:0})}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id),e.version===2&&!e?.id&&(e.id=new Qs.default().toHexString(),e.version=3);let o={id:e.id,fields:e.fields,relationTo:e.relationTo,value:e.value},r=ea({data:o});return r.setFormat(e.format),r}static isInline(){return!1}decorate(){return Lh(RawUploadComponent,{data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportDOM(){let e=document.createElement("img");return e.setAttribute("data-lexical-upload-id",String(this.__data?.value)),e.setAttribute("data-lexical-upload-relation-to",this.__data?.relationTo),{element:e}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"upload",version:3}}getData(){return this.getLatest().__data}setData(e){let o=this.getWritable();o.__data=e}updateDOM(){return!1}};function ea({data:t}){return t?.id||(t.id=new Qs.default().toHexString()),Ih(new Dt({data:t}))}var Dh=oa.lazy(()=>import("./component-NNKG7K3O.js").then(t=>({default:t.UploadComponent})));function Ah(t){if(t.hasAttribute("data-lexical-upload-relation-to")&&t.hasAttribute("data-lexical-upload-id")){let o=t.getAttribute("data-lexical-upload-id"),r=t.getAttribute("data-lexical-upload-relation-to");if(o!=null&&r!=null)return{node:Ge({data:{fields:{},relationTo:r,value:o}})}}let e=t;return e.src.startsWith("file:///")||Rr(e),null}var Ie=class extends Dt{static clone(e){return super.clone(e)}static getType(){return super.getType()}static importDOM(){return{img:e=>({conversion:Ah,priority:0})}}static importJSON(e){e.version===1&&e?.value?.id&&(e.value=e.value.id),e.version===2&&!e?.id&&(e.id=new ta.default().toHexString(),e.version=3);let o={id:e.id,fields:e.fields,relationTo:e.relationTo,value:e.value},r=Ge({data:o});return r.setFormat(e.format),r}decorate(){return vh(Dh,{data:this.__data,nodeKey:this.getKey()})}exportJSON(){return super.exportJSON()}};function Ge({data:t}){return t?.id||(t.id=new ta.default().toHexString()),Mh(new Ie({data:t}))}function vr(t){return t instanceof Ie}import{c as Uh}from"react/compiler-runtime";import{jsx as Gh}from"react/jsx-runtime";import{useLexicalComposerContext as Wh}from"@lexical/react/LexicalComposerContext.js";import{$insertNodeToNearestRoot as Vh,mergeRegister as Kh}from"@lexical/utils";import{useConfig as Jh}from"@payloadcms/ui";import{$getPreviousSelection as Xh,$getSelection as zh,$isParagraphNode as Zh,$isRangeSelection as Yh,COMMAND_PRIORITY_EDITOR as qh,createCommand as Qh}from"lexical";import{useEffect as eg}from"react";import{c as ra}from"react/compiler-runtime";import{jsx as Mr}from"react/jsx-runtime";import{useLexicalComposerContext as na}from"@lexical/react/LexicalComposerContext.js";import{toast as Oh}from"@payloadcms/ui";import{$getNodeByKey as $h,COMMAND_PRIORITY_EDITOR as la}from"lexical";import{useEffect as ia,useState as Fh}from"react";var Ph=({editor:t,relationTo:e,replaceNodeKey:o,value:r})=>{o?t.update(()=>{let n=$h(o);n&&n.replace(Ge({data:{fields:null,relationTo:e,value:r}}))}):t.dispatchCommand(Dr,{fields:null,relationTo:e,value:r})},Bh=t=>{let e=ra(13),{enabledCollectionSlugs:o}=t,[r]=na(),[n,l]=Fh(null),i;e[0]!==o?(i={collectionSlugs:o,uploads:!0},e[0]=o,e[1]=i):i=e[1];let{closeListDrawer:s,ListDrawer:c,openListDrawer:u}=yt(i),d,a;e[2]!==r||e[3]!==u?(d=()=>r.registerCommand(Ke,h=>(l(h?.replace?h?.replace.nodeKey:null),u(),!0),la),a=[r,u],e[2]=r,e[3]=u,e[4]=d,e[5]=a):(d=e[4],a=e[5]),ia(d,a);let p;e[6]!==s||e[7]!==r||e[8]!==n?(p=h=>{let{collectionSlug:x,doc:b}=h;s(),Ph({editor:r,relationTo:x,replaceNodeKey:n,value:b.id})},e[6]=s,e[7]=r,e[8]=n,e[9]=p):p=e[9];let m=p,f;return e[10]!==c||e[11]!==m?(f=Mr(c,{onSelect:m}),e[10]=c,e[11]=m,e[12]=f):f=e[12],f},Hh=()=>{let t=ra(3),[e]=na(),o,r;return t[0]!==e?(o=()=>e.registerCommand(Ke,jh,la),r=[e],t[0]=e,t[1]=o,t[2]=r):(o=t[1],r=t[2]),ia(o,r),null},sa=t=>Mr(At,{...t,FallbackComponent:Hh,uploads:!0,children:Mr(Bh,{...t})});function jh(){return Oh.error("No upload collections enabled"),!0}var Dr=Qh("INSERT_UPLOAD_COMMAND"),aa=t=>{let e=Uh(5),[o]=Wh(),{config:r}=Jh(),{collections:n}=r,l,i;e[0]!==o?(l=()=>{if(!o.hasNodes([Ie]))throw new Error("UploadPlugin: UploadNode not registered on editor");return Kh(o.registerCommand(Dr,c=>(o.update(()=>{let u=zh()||Xh();if(Yh(u)){let d=Ge({data:{id:c.id,fields:c.fields,relationTo:c.relationTo,value:c.value}}),{focus:a}=u,p=a.getNode();Vh(d),Zh(p)&&!p.__first&&p.remove()}}),!0),qh))},i=[o],e[0]=o,e[1]=l,e[2]=i):(l=e[1],i=e[2]),eg(l,i);let s;return e[3]!==n?(s=Gh(sa,{enabledCollectionSlugs:n.map(tg)}),e[3]=n,e[4]=s):s=e[4],s};function tg(t){let{slug:e}=t;return e}var rg=y({nodes:[Ie],plugins:[{Component:aa,position:"normal"}],slashMenu:{groups:[ee([{Icon:Ir,key:"upload",keywords:["upload","image","file","img","picture","photo","media"],label:({i18n:t})=>t.t("lexical:upload:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ke,{replace:!1})}}])]},toolbarFixed:{groups:[ke([{ChildComponent:Ir,isActive:({selection:t})=>{if(!og(t)||!t.getNodes().length)return!1;let e=t.getNodes()[0];return vr(e)},key:"upload",label:({i18n:t})=>t.t("lexical:upload:label"),onSelect:({editor:t})=>{t.dispatchCommand(Ke,{replace:!1})}}])]}});import{c as lg}from"react/compiler-runtime";import{jsx as Or}from"react/jsx-runtime";import{ShimmerEffect as ig,useConfig as sg}from"@payloadcms/ui";import{lazy as ag,Suspense as cg,useEffect as ug,useState as dg}from"react";var ca={block:"LexicalEditorTheme__block",blockCursor:"LexicalEditorTheme__blockCursor",characterLimit:"LexicalEditorTheme__characterLimit",code:"LexicalEditorTheme__code",codeHighlight:{atrule:"LexicalEditorTheme__tokenAttr",attr:"LexicalEditorTheme__tokenAttr",boolean:"LexicalEditorTheme__tokenProperty",builtin:"LexicalEditorTheme__tokenSelector",cdata:"LexicalEditorTheme__tokenComment",char:"LexicalEditorTheme__tokenSelector",class:"LexicalEditorTheme__tokenFunction","class-name":"LexicalEditorTheme__tokenFunction",comment:"LexicalEditorTheme__tokenComment",constant:"LexicalEditorTheme__tokenProperty",deleted:"LexicalEditorTheme__tokenProperty",doctype:"LexicalEditorTheme__tokenComment",entity:"LexicalEditorTheme__tokenOperator",function:"LexicalEditorTheme__tokenFunction",important:"LexicalEditorTheme__tokenVariable",inserted:"LexicalEditorTheme__tokenSelector",keyword:"LexicalEditorTheme__tokenAttr",namespace:"LexicalEditorTheme__tokenVariable",number:"LexicalEditorTheme__tokenProperty",operator:"LexicalEditorTheme__tokenOperator",prolog:"LexicalEditorTheme__tokenComment",property:"LexicalEditorTheme__tokenProperty",punctuation:"LexicalEditorTheme__tokenPunctuation",regex:"LexicalEditorTheme__tokenVariable",selector:"LexicalEditorTheme__tokenSelector",string:"LexicalEditorTheme__tokenSelector",symbol:"LexicalEditorTheme__tokenProperty",tag:"LexicalEditorTheme__tokenProperty",url:"LexicalEditorTheme__tokenOperator",variable:"LexicalEditorTheme__tokenVariable"},embedBlock:{base:"LexicalEditorTheme__embedBlock",focus:"LexicalEditorTheme__embedBlockFocus"},hashtag:"LexicalEditorTheme__hashtag",heading:{h1:"LexicalEditorTheme__h1",h2:"LexicalEditorTheme__h2",h3:"LexicalEditorTheme__h3",h4:"LexicalEditorTheme__h4",h5:"LexicalEditorTheme__h5",h6:"LexicalEditorTheme__h6"},hr:"LexicalEditorTheme__hr",hrSelected:"LexicalEditorTheme__hrSelected",indent:"LexicalEditorTheme__indent",inlineImage:"LexicalEditor__inline-image",link:"LexicalEditorTheme__link",list:{checklist:"LexicalEditorTheme__checklist",listitem:"LexicalEditorTheme__listItem",listitemChecked:"LexicalEditorTheme__listItemChecked",listitemUnchecked:"LexicalEditorTheme__listItemUnchecked",nested:{listitem:"LexicalEditorTheme__nestedListItem"},olDepth:["LexicalEditorTheme__ol1","LexicalEditorTheme__ol2","LexicalEditorTheme__ol3","LexicalEditorTheme__ol4","LexicalEditorTheme__ol5"],ul:"LexicalEditorTheme__ul"},ltr:"LexicalEditorTheme__ltr",mark:"LexicalEditorTheme__mark",markOverlap:"LexicalEditorTheme__markOverlap",paragraph:"LexicalEditorTheme__paragraph",quote:"LexicalEditorTheme__quote",relationship:"LexicalEditorTheme__relationship",rtl:"LexicalEditorTheme__rtl",tab:"LexicalEditorTheme__tabNode",table:"LexicalEditorTheme__table",tableAddColumns:"LexicalEditorTheme__tableAddColumns",tableAddRows:"LexicalEditorTheme__tableAddRows",tableAlignment:{center:"LexicalEditorTheme__tableAlignmentCenter",right:"LexicalEditorTheme__tableAlignmentRight"},tableCell:"LexicalEditorTheme__tableCell",tableCellActionButton:"LexicalEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"LexicalEditorTheme__tableCellActionButtonContainer",tableCellHeader:"LexicalEditorTheme__tableCellHeader",tableCellResizer:"LexicalEditorTheme__tableCellResizer",tableCellSelected:"LexicalEditorTheme__tableCellSelected",tableFrozenColumn:"LexicalEditorTheme__tableFrozenColumn",tableRowStriping:"LexicalEditorTheme__tableRowStriping",tableScrollableWrapper:"LexicalEditorTheme__tableScrollableWrapper",tableSelected:"LexicalEditorTheme__tableSelected",tableSelection:"LexicalEditorTheme__tableSelection",text:{bold:"LexicalEditorTheme__textBold",code:"LexicalEditorTheme__textCode",italic:"LexicalEditorTheme__textItalic",strikethrough:"LexicalEditorTheme__textStrikethrough",subscript:"LexicalEditorTheme__textSubscript",superscript:"LexicalEditorTheme__textSuperscript",underline:"LexicalEditorTheme__textUnderline",underlineStrikethrough:"LexicalEditorTheme__textUnderlineStrikethrough"},upload:"editor-upload"};var xo={namespace:"lexical",theme:ca};function ua({config:t,featureClientImportMap:e,featureClientSchemaMap:o,field:r,schemaPath:n,unSanitizedEditorConfig:l}){for(let u of l.features)if(!u?.clientFeatureProps?.featureKey||u?.clientFeatureProps?.order===void 0||u?.clientFeatureProps?.order===null)throw new Error("A Feature you have installed does not return the client props as clientFeatureProps. Please make sure to always return those props, even if they are null, as other important props like order and featureKey are later on injected.");l.features=l.features.sort((u,d)=>u.clientFeatureProps.order-d.clientFeatureProps.order);let i=new Map;for(let u of l.features)i.set(u.clientFeatureProps.featureKey,u);let s=new Map,c=0;for(let u of l.features){let d=typeof u.feature=="function"?u.feature({config:t,featureClientImportMap:e,featureClientSchemaMap:o,featureProviderMap:i,field:r,resolvedFeatures:s,schemaPath:n,unSanitizedEditorConfig:l}):u.feature;d.key=u.clientFeatureProps.featureKey,d.order=c,s.set(u.clientFeatureProps.featureKey,d),c++}return s}import{deepMerge as ng}from"payload/shared";var da=t=>{let e={enabledFeatures:[],enabledFormats:[],markdownTransformers:[],nodes:[],plugins:[],providers:[],slashMenu:{dynamicGroups:[],groups:[]},toolbarFixed:{groups:[]},toolbarInline:{groups:[]}},o={};if(t.forEach(r=>{r.key==="toolbarFixed"&&r.sanitizedClientFeatureProps?.customGroups&&(o={...o,...r.sanitizedClientFeatureProps.customGroups})}),!t?.size)return e;t.forEach(r=>{if(r.providers?.length&&(e.providers=e.providers.concat(r.providers)),r.enableFormats?.length&&e.enabledFormats.push(...r.enableFormats),r.nodes?.length)for(let n of r.nodes)e.nodes.push(n);if(r.plugins?.length&&r.plugins.forEach((n,l)=>{e.plugins?.push({clientProps:r.sanitizedClientFeatureProps,Component:n.Component,key:r.key+l,position:n.position})}),r.toolbarInline?.groups?.length)for(let n of r.toolbarInline.groups){let l=e.toolbarInline.groups.find(i=>i.key===n.key);l?e.toolbarInline.groups=e.toolbarInline.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.toolbarInline?.groups.push(l)}if(r.toolbarFixed?.groups?.length)for(let n of r.toolbarFixed.groups){let l=e.toolbarFixed.groups.find(i=>i.key===n.key);l?e.toolbarFixed.groups=e.toolbarFixed.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.toolbarFixed?.groups.push(l)}if(r.slashMenu?.groups){r.slashMenu.dynamicGroups?.length&&(e.slashMenu.dynamicGroups=e.slashMenu.dynamicGroups.concat(r.slashMenu.dynamicGroups));for(let n of r.slashMenu.groups){let l=e.slashMenu.groups.find(i=>i.key===n.key);l?e.slashMenu.groups=e.slashMenu.groups.filter(i=>i.key!==n.key):l={...n,items:[]},n?.items?.length&&(l.items=l.items.concat(n.items)),e.slashMenu.groups.push(l)}}if(r.markdownTransformers?.length)for(let n of r.markdownTransformers)typeof n=="function"?e.markdownTransformers.push(n({allNodes:e.nodes,allTransformers:e.markdownTransformers})):e.markdownTransformers.push(n);e.enabledFeatures.push(r.key)}),Object.keys(o).length>0&&(e.toolbarFixed.groups=e.toolbarFixed.groups.map(r=>{let n=o[r.key];return n?ng(r,n):r})),e.toolbarInline.groups.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0),e.toolbarFixed.groups.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0);for(let r of e.toolbarInline.groups)r.items.sort((n,l)=>n.order&&l.order?n.order-l.order:n.order?-1:l.order?1:0);for(let r of e.toolbarFixed.groups)r.items.sort((n,l)=>n.order&&l.order?n.order-l.order:n.order?-1:l.order?1:0);return e};function Ar(t,e,o){return{admin:o,features:da(t),lexical:e,resolvedFeatureMap:t}}var mg=ag(()=>import("./Field-6OZARKAL.js").then(t=>({default:t.RichText}))),pg=t=>{let e=lg(16),{admin:o,clientFeatures:r,featureClientImportMap:n,featureClientSchemaMap:l,field:i,lexicalEditorConfig:s,schemaPath:c}=t,u;e[0]!==o?(u=o===void 0?{}:o,e[0]=o,e[1]=u):u=e[1];let d=u,a=s===void 0?xo:s,{config:p}=sg(),[m,f]=dg(null),h,x;e[2]!==d||e[3]!==r||e[4]!==p||e[5]!==n||e[6]!==l||e[7]!==i||e[8]!==m||e[9]!==a||e[10]!==c?(h=()=>{if(m)return;let N=[];for(let[_,g]of Object.entries(r))g.clientFeatureProvider&&N.push(g.clientFeatureProvider(g.clientFeatureProps));let D=a||xo,k=ua({config:p,featureClientImportMap:n,featureClientSchemaMap:l,field:i,schemaPath:c??i.name,unSanitizedEditorConfig:{features:N,lexical:D}});f(Ar(k,D,d))},x=[a,d,m,r,n,l,i,p,c],e[2]=d,e[3]=r,e[4]=p,e[5]=n,e[6]=l,e[7]=i,e[8]=m,e[9]=a,e[10]=c,e[11]=h,e[12]=x):(h=e[11],x=e[12]),ug(h,x);let b;return e[13]!==m||e[14]!==t?(b=Or(cg,{fallback:Or(ig,{height:"35vh"}),children:m&&Or(mg,{...t,editorConfig:m})}),e[13]=m,e[14]=t,e[15]=b):b=e[15],b};function fg(t){return t instanceof HTMLElement}function hg(...t){return t.filter(Boolean).join(" ")}var Co=new WeakMap;function ma(t){let e=t.changedTouches[0];return e===void 0?null:[e.clientX,e.clientY]}function bo(t,e){let o=Co.get(t);if(o===void 0){let r=new Set,n=i=>{o!==void 0&&(o.start=ma(i))},l=i=>{if(o===void 0)return;let{start:s}=o;if(s===null)return;let c=ma(i);for(let u of r)c!==null&&u([c[0]-s[0],c[1]-s[1]],i)};t.addEventListener("touchstart",n),t.addEventListener("touchend",l),o={handleTouchend:l,handleTouchstart:n,listeners:r,start:null},Co.set(t,o)}return o.listeners.add(e),()=>{gg(t,e)}}function gg(t,e){let o=Co.get(t);if(o===void 0)return;let{listeners:r}=o;r.delete(e),r.size===0&&(Co.delete(t),t.removeEventListener("touchstart",o.handleTouchstart),t.removeEventListener("touchend",o.handleTouchend))}function xg(t,e){return bo(t,(o,r)=>{let[n,l]=o;n<0&&-n>Math.abs(l)&&e(n,r)})}function Cg(t,e){return bo(t,(o,r)=>{let[n,l]=o;n>0&&n>Math.abs(l)&&e(n,r)})}function bg(t,e){return bo(t,(o,r)=>{let[n,l]=o;l<0&&-l>Math.abs(n)&&e(n,r)})}function kg(t,e){return bo(t,(o,r)=>{let[n,l]=o;l>0&&l>Math.abs(n)&&e(n,r)})}import{c as _g}from"react/compiler-runtime";import{jsx as Tg}from"react/jsx-runtime";import"react";var wg=()=>{let t=_g(2),{EditButton:e}=Ce(),o;return t[0]!==e?(o=e?Tg(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as Eg}from"react/compiler-runtime";import{jsx as Ng}from"react/jsx-runtime";import"react";var Sg=()=>{let t=Eg(2),{RemoveButton:e}=Ce(),o;return t[0]!==e?(o=e?Ng(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as Lg}from"react/compiler-runtime";import{jsx as yg}from"react/jsx-runtime";import"react";var Ig=()=>{let t=Lg(2),{Label:e}=Ce(),o;return t[0]!==e?(o=e?yg(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as Rg}from"react/compiler-runtime";import{jsx as vg}from"react/jsx-runtime";import"react";var Mg=t=>{let e=Rg(3),{children:o}=t,{InlineBlockContainer:r}=Ce(),n;return e[0]!==r||e[1]!==o?(n=r?vg(r,{children:o}):null,e[0]=r,e[1]=o,e[2]=n):n=e[2],n};import{c as Dg}from"react/compiler-runtime";import{jsx as Ag}from"react/jsx-runtime";import"react";var Og=t=>{let e=Dg(6),{children:o,editButton:r,Label:n,removeButton:l}=t,{BlockCollapsible:i}=Oe(),s;return e[0]!==i||e[1]!==n||e[2]!==o||e[3]!==r||e[4]!==l?(s=i?Ag(i,{editButton:r,Label:n,removeButton:l,children:o}):null,e[0]=i,e[1]=n,e[2]=o,e[3]=r,e[4]=l,e[5]=s):s=e[5],s};import{c as $g}from"react/compiler-runtime";import{jsx as Fg}from"react/jsx-runtime";import"react";var Pg=()=>{let t=$g(2),{EditButton:e}=Oe(),o;return t[0]!==e?(o=e?Fg(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{c as Bg}from"react/compiler-runtime";import{jsx as Hg}from"react/jsx-runtime";import"react";var jg=()=>{let t=Bg(2),{RemoveButton:e}=Oe(),o;return t[0]!==e?(o=e?Hg(e,{}):null,t[0]=e,t[1]=o):o=t[1],o};import{stringify as Ug}from"qs-esm";var Gg=({apiURL:t,depth:e,draft:o,locale:r})=>async({id:l,collectionSlug:i,select:s})=>{let c=Ug({depth:e??0,draft:o??!1,locale:r,select:s},{addQueryPrefix:!0});return await fetch(`${t}/${i}/${l}${c}`,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then(d=>d.json())};export{Ct as $createAutoLinkNode,Vt as $createBlockNode,_o as $createInlineBlockNode,_e as $createLinkNode,je as $createRelationshipNode,Ge as $createUploadNode,we as $isAutoLinkNode,ft as $isBlockNode,To as $isInlineBlockNode,Z as $isLinkNode,ar as $isRelationshipNode,vr as $isUploadNode,Na as AlignFeatureClient,Te as AutoLinkNode,Og as BlockCollapsible,Pg as BlockEditButton,be as BlockNode,jg as BlockRemoveButton,Ra as BlockquoteFeatureClient,Lc as BlocksFeatureClient,Zc as BoldFeatureClient,ce as CAN_USE_DOM,Zm as ChecklistFeatureClient,Hp as DETAIL_TYPE_TO_DETAIL,$p as DOUBLE_LINE_BREAK,qp as DebugJsxConverterFeatureClient,Up as ELEMENT_FORMAT_TO_TYPE,jp as ELEMENT_TYPE_TO_FORMAT,Ca as ENABLE_SLASH_MENU_COMMAND,fa as EditorConfigProvider,st as FieldsDrawer,_0 as FixedToolbarFeatureClient,Gu as HeadingFeatureClient,id as HorizontalRuleFeatureClient,Je as INSERT_BLOCK_COMMAND,Xe as INSERT_INLINE_BLOCK_COMMAND,Ap as IS_ALL_FORMATTING,Td as IndentFeatureClient,Mg as InlineBlockContainer,wg as InlineBlockEditButton,Ig as InlineBlockLabel,ko as InlineBlockNode,Sg as InlineBlockRemoveButton,tu as InlineCodeFeatureClient,M0 as InlineToolbarFeatureClient,lu as ItalicFeatureClient,Pp as LTR_REGEX,Cp as LexicalPluginToLexicalFeatureClient,Om as LinkFeatureClient,ie as LinkNode,Op as NON_BREAKING_SPACE,A as NodeFormat,np as OrderedListFeatureClient,Sp as ParagraphFeatureClient,ga as Point,Fp as RTL_REGEX,ba as Rect,Bf as RelationshipFeatureClient,Ne as RelationshipNode,pg as RichTextField,Ep as SlateToLexicalFeatureClient,uu as StrikethroughFeatureClient,fu as SubscriptFeatureClient,Cu as SuperscriptFeatureClient,Gp as TEXT_MODE_TO_TYPE,Bp as TEXT_TYPE_TO_FORMAT,Wp as TEXT_TYPE_TO_MODE,he as TOGGLE_LINK_COMMAND,Nh as TableFeatureClient,jc as TestRecorderFeatureClient,Au as TextStateFeatureClient,It as ToolbarButton,Ue as ToolbarDropdown,Kc as TreeViewFeatureClient,wu as UnderlineFeatureClient,mp as UnorderedListFeatureClient,rg as UploadFeatureClient,Ie as UploadNode,kg as addSwipeDownListener,xg as addSwipeLeftListener,Cg as addSwipeRightListener,bg as addSwipeUpListener,Ho as createBlockNode,y as createClientFeature,Qp as defaultColors,xo as defaultEditorLexicalConfig,pr as getDOMRangeRect,ka as getEnabledNodes,Gg as getRestPopulateFn,ze as getSelectedNode,fg as isHTMLElement,xa as isPoint,hg as joinClasses,Ar as sanitizeClientEditorConfig,da as sanitizeClientFeatures,io as setFloatingElemPosition,eo as setFloatingElemPositionForLinkEditor,ee as slashMenuBasicGroupWithItems,ke as toolbarAddDropdownGroupWithItems,Uo as toolbarFeatureButtonsGroupWithItems,te as toolbarFormatGroupWithItems,le as toolbarTextDropdownGroupWithItems,Oe as useBlockComponentContext,j as useEditorConfigContext,Ce as useInlineBlockComponentContext,ha as useLexicalDocumentDrawer,xe as useLexicalDrawer,yt as useLexicalListDrawer};
//# sourceMappingURL=index.js.map
