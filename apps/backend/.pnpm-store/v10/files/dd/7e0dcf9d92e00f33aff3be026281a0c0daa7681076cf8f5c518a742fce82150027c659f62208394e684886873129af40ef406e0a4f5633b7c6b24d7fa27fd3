{"version":3,"file":"SetStepNav.js","names":["c","_c","getTranslation","useConfig","useLocale","useStepNav","useTranslation","fieldAffectsData","formatAdminURL","useEffect","SetStepNav","t0","$","id","collectionConfig","globalConfig","versionToCreatedAtFormatted","versionToID","versionToUseAsTitle","config","setStepNav","i18n","t","locale","t1","t2","routes","t3","admin","adminRoute","collectionSlug","slug","useAsTitle","pluralLabel","labels","plural","docLabel","fields","titleField","find","f","name","localized","code","label","url","path","globalSlug"],"sources":["../../../../src/views/Version/Default/SetStepNav.tsx"],"sourcesContent":["'use client'\n\nimport type { ClientCollectionConfig, ClientGlobalConfig } from 'payload'\nimport type React from 'react'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport { useConfig, useLocale, useStepNav, useTranslation } from '@payloadcms/ui'\nimport { fieldAffectsData, formatAdminURL } from 'payload/shared'\nimport { useEffect } from 'react'\n\nexport const SetStepNav: React.FC<{\n  readonly collectionConfig?: ClientCollectionConfig\n  readonly globalConfig?: ClientGlobalConfig\n  readonly id?: number | string\n  versionToCreatedAtFormatted?: string\n  versionToID?: string\n  versionToUseAsTitle?: string\n}> = ({\n  id,\n  collectionConfig,\n  globalConfig,\n  versionToCreatedAtFormatted,\n  versionToID,\n  versionToUseAsTitle,\n}) => {\n  const { config } = useConfig()\n  const { setStepNav } = useStepNav()\n  const { i18n, t } = useTranslation()\n  const locale = useLocale()\n\n  useEffect(() => {\n    const {\n      routes: { admin: adminRoute },\n    } = config\n\n    if (collectionConfig) {\n      const collectionSlug = collectionConfig.slug\n\n      const useAsTitle = collectionConfig.admin?.useAsTitle || 'id'\n      const pluralLabel = collectionConfig.labels?.plural\n      let docLabel = `[${t('general:untitled')}]`\n\n      const fields = collectionConfig.fields\n\n      const titleField = fields.find(\n        (f) => fieldAffectsData(f) && 'name' in f && f.name === useAsTitle,\n      )\n\n      if (titleField && versionToUseAsTitle) {\n        docLabel =\n          'localized' in titleField && titleField.localized\n            ? versionToUseAsTitle?.[locale.code] || docLabel\n            : versionToUseAsTitle\n      } else if (useAsTitle === 'id') {\n        docLabel = versionToID\n      }\n\n      setStepNav([\n        {\n          label: getTranslation(pluralLabel, i18n),\n          url: formatAdminURL({\n            adminRoute,\n            path: `/collections/${collectionSlug}`,\n          }),\n        },\n        {\n          label: docLabel,\n          url: formatAdminURL({\n            adminRoute,\n            path: `/collections/${collectionSlug}/${id}`,\n          }),\n        },\n        {\n          label: 'Versions',\n          url: formatAdminURL({\n            adminRoute,\n            path: `/collections/${collectionSlug}/${id}/versions`,\n          }),\n        },\n        {\n          label: versionToCreatedAtFormatted,\n        },\n      ])\n      return\n    }\n\n    if (globalConfig) {\n      const globalSlug = globalConfig.slug\n\n      setStepNav([\n        {\n          label: globalConfig.label,\n          url: formatAdminURL({\n            adminRoute,\n            path: `/globals/${globalSlug}`,\n          }),\n        },\n        {\n          label: 'Versions',\n          url: formatAdminURL({\n            adminRoute,\n            path: `/globals/${globalSlug}/versions`,\n          }),\n        },\n        {\n          label: versionToCreatedAtFormatted,\n        },\n      ])\n    }\n  }, [\n    config,\n    setStepNav,\n    id,\n    locale,\n    t,\n    i18n,\n    collectionConfig,\n    globalConfig,\n    versionToUseAsTitle,\n    versionToCreatedAtFormatted,\n    versionToID,\n  ])\n\n  return null\n}\n"],"mappings":"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","ignoreList":[]}