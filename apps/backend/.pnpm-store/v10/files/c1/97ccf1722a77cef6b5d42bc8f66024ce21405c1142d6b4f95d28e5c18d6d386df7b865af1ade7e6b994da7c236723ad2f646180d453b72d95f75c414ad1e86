{"version":3,"file":"getClientConfig.js","names":["createClientConfig","cache","cachedClientConfigs","global","_payload_clientConfigs","getClientConfig","args","config","i18n","importMap","currentLanguage","language","_payload_doNotCacheClientConfig","cachedClientConfig"],"sources":["../../src/utilities/getClientConfig.ts"],"sourcesContent":["import type { I18nClient, SupportedLanguages } from '@payloadcms/translations'\nimport type { ClientConfig, ImportMap, SanitizedConfig } from 'payload'\n\nimport { createClientConfig } from 'payload'\nimport { cache } from 'react'\n\nlet cachedClientConfigs = global._payload_clientConfigs as Record<\n  keyof SupportedLanguages,\n  ClientConfig\n>\n\nif (!cachedClientConfigs) {\n  cachedClientConfigs = global._payload_clientConfigs = {} as Record<\n    keyof SupportedLanguages,\n    ClientConfig\n  >\n}\n\nexport const getClientConfig = cache(\n  (args: { config: SanitizedConfig; i18n: I18nClient; importMap: ImportMap }): ClientConfig => {\n    const { config, i18n, importMap } = args\n    const currentLanguage = i18n.language\n\n    if (cachedClientConfigs[currentLanguage] && !global._payload_doNotCacheClientConfig) {\n      return cachedClientConfigs[currentLanguage]\n    }\n\n    const cachedClientConfig = createClientConfig({\n      config,\n      i18n,\n      importMap,\n    })\n\n    cachedClientConfigs[currentLanguage] = cachedClientConfig\n    global._payload_clientConfigs = cachedClientConfigs\n    global._payload_doNotCacheClientConfig = false\n\n    return cachedClientConfig\n  },\n)\n"],"mappings":"AAGA,SAASA,kBAAkB,QAAQ;AACnC,SAASC,KAAK,QAAQ;AAEtB,IAAIC,mBAAA,GAAsBC,MAAA,CAAOC,sBAAsB;AAKvD,IAAI,CAACF,mBAAA,EAAqB;EACxBA,mBAAA,GAAsBC,MAAA,CAAOC,sBAAsB,GAAG,CAAC;AAIzD;AAEA,OAAO,MAAMC,eAAA,GAAkBJ,KAAA,CAC5BK,IAAA;EACC,MAAM;IAAEC,MAAM;IAAEC,IAAI;IAAEC;EAAS,CAAE,GAAGH,IAAA;EACpC,MAAMI,eAAA,GAAkBF,IAAA,CAAKG,QAAQ;EAErC,IAAIT,mBAAmB,CAACQ,eAAA,CAAgB,IAAI,CAACP,MAAA,CAAOS,+BAA+B,EAAE;IACnF,OAAOV,mBAAmB,CAACQ,eAAA,CAAgB;EAC7C;EAEA,MAAMG,kBAAA,GAAqBb,kBAAA,CAAmB;IAC5CO,MAAA;IACAC,IAAA;IACAC;EACF;EAEAP,mBAAmB,CAACQ,eAAA,CAAgB,GAAGG,kBAAA;EACvCV,MAAA,CAAOC,sBAAsB,GAAGF,mBAAA;EAChCC,MAAA,CAAOS,+BAA+B,GAAG;EAEzC,OAAOC,kBAAA;AACT","ignoreList":[]}