{"version":3,"file":"index.js","names":["c","_c","useModal","React","useState","useAuth","EditDepthProvider","SelectAllStatus","useSelection","useTranslation","Drawer","ListSelectionButton","EditManyDrawerContent","baseClass","EditMany","props","$","count","selectAll","selected","toggleAll","t0","t1","_jsx","EditMany_v4","ids","Array","from","keys","onSuccess","AllAvailable","collection","permissions","openModal","t","Symbol","for","selectedFields","setSelectedFields","collectionPermissions","collections","slug","drawerSlug","update","t2","filter","Boolean","t3","t4","_jsxs","className","join","children","onClick","Header"],"sources":["../../../src/elements/EditMany/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig } from 'payload'\n\nimport { useModal } from '@faceless-ui/modal'\nimport React, { useState } from 'react'\n\nimport type { FieldOption } from '../FieldSelect/reduceFieldOptions.js'\n\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { EditDepthProvider } from '../../providers/EditDepth/index.js'\nimport { SelectAllStatus, useSelection } from '../../providers/Selection/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { Drawer } from '../Drawer/index.js'\nimport './index.scss'\nimport { ListSelectionButton } from '../ListSelection/index.js'\nimport { EditManyDrawerContent } from './DrawerContent.js'\n\nexport const baseClass = 'edit-many'\n\nexport type EditManyProps = {\n  readonly collection: ClientCollectionConfig\n}\n\nexport const EditMany: React.FC<EditManyProps> = (props) => {\n  const { count, selectAll, selected, toggleAll } = useSelection()\n  return (\n    <EditMany_v4\n      {...props}\n      count={count}\n      ids={Array.from(selected.keys())}\n      onSuccess={() => toggleAll(false)}\n      selectAll={selectAll === SelectAllStatus.AllAvailable}\n    />\n  )\n}\n\nexport const EditMany_v4: React.FC<\n  {\n    count: number\n    ids: (number | string)[]\n    onSuccess?: () => void\n    selectAll: boolean\n  } & EditManyProps\n> = ({ collection, count, ids, onSuccess, selectAll }) => {\n  const { permissions } = useAuth()\n  const { openModal } = useModal()\n\n  const { t } = useTranslation()\n\n  const [selectedFields, setSelectedFields] = useState<FieldOption[]>([])\n\n  const collectionPermissions = permissions?.collections?.[collection.slug]\n\n  const drawerSlug = `edit-${collection.slug}`\n\n  if (count === 0 || !collectionPermissions?.update) {\n    return null\n  }\n\n  return (\n    <div className={[baseClass, `${baseClass}__toggle`].filter(Boolean).join(' ')}>\n      <ListSelectionButton\n        aria-label={t('general:edit')}\n        onClick={() => {\n          openModal(drawerSlug)\n          setSelectedFields([])\n        }}\n      >\n        {t('general:edit')}\n      </ListSelectionButton>\n      <EditDepthProvider>\n        <Drawer Header={null} slug={drawerSlug}>\n          <EditManyDrawerContent\n            collection={collection}\n            count={count}\n            drawerSlug={drawerSlug}\n            ids={ids}\n            onSuccess={onSuccess}\n            selectAll={selectAll}\n            selectedFields={selectedFields}\n            setSelectedFields={setSelectedFields}\n          />\n        </Drawer>\n      </EditDepthProvider>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]}