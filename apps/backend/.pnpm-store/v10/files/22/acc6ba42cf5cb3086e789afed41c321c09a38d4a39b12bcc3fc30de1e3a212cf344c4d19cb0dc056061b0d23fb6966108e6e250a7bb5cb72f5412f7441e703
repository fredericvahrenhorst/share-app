{"version":3,"file":"index.js","names":["React","useEffect","useRef","useState","usePathname","useDebounce","baseClass","SearchFilter","props","handleChange","initialParams","label","searchQueryParam","searchParam","search","pathname","setSearch","undefined","shouldUpdateState","previousSearch","debouncedSearch","current","_jsx","className","id","onChange","e","target","value","placeholder","type"],"sources":["../../../src/elements/SearchFilter/index.tsx"],"sourcesContent":["'use client'\nimport React, { useEffect, useRef, useState } from 'react'\n\nexport type SearchFilterProps = {\n  /**\n   * This prop is deprecated and will be removed in the next major version.\n   *\n   * @deprecated\n   */\n  fieldName?: string\n  handleChange?: (search: string) => void\n  /**\n   * This prop is deprecated and will be removed in the next major version.\n   *\n   * Prefer passing in `searchString` instead.\n   *\n   * @deprecated\n   */\n  initialParams?: ParsedQs\n  label: string\n  searchQueryParam?: string\n  /**\n   * This prop is deprecated and will be removed in the next major version.\n   *\n   * @deprecated\n   */\n  setValue?: (arg: string) => void\n  /**\n   * This prop is deprecated and will be removed in the next major version.\n   *\n   * @deprecated\n   */\n  value?: string\n}\n\nimport type { ParsedQs } from 'qs-esm'\n\nimport { usePathname } from 'next/navigation.js'\n\nimport { useDebounce } from '../../hooks/useDebounce.js'\nimport './index.scss'\n\nconst baseClass = 'search-filter'\n\nexport const SearchFilter: React.FC<SearchFilterProps> = (props) => {\n  const { handleChange, initialParams, label, searchQueryParam } = props\n  const searchParam = initialParams?.search || searchQueryParam\n  const pathname = usePathname()\n  const [search, setSearch] = useState(typeof searchParam === 'string' ? searchParam : undefined)\n\n  /**\n   * Tracks whether the state should be updated based on the search value.\n   * If the value is updated from the URL, we don't want to update the state as it causes additional renders.\n   */\n  const shouldUpdateState = useRef(true)\n\n  /**\n   * Tracks the previous search value to compare with the current debounced search value.\n   */\n  const previousSearch = useRef(typeof searchParam === 'string' ? searchParam : undefined)\n\n  const debouncedSearch = useDebounce(search, 300)\n\n  useEffect(() => {\n    if (searchParam !== previousSearch.current) {\n      shouldUpdateState.current = false\n      setSearch(searchParam as string)\n      previousSearch.current = searchParam as string\n    }\n  }, [searchParam, pathname])\n\n  useEffect(() => {\n    if (debouncedSearch !== previousSearch.current && shouldUpdateState.current) {\n      if (handleChange) {\n        handleChange(debouncedSearch)\n      }\n\n      previousSearch.current = debouncedSearch\n    }\n  }, [debouncedSearch, handleChange])\n\n  return (\n    <div className={baseClass}>\n      <input\n        aria-label={label}\n        className={`${baseClass}__input`}\n        id=\"search-filter-input\"\n        onChange={(e) => {\n          shouldUpdateState.current = true\n          setSearch(e.target.value)\n        }}\n        placeholder={label}\n        type=\"text\"\n        value={search || ''}\n      />\n    </div>\n  )\n}\n"],"mappings":"AAAA;;;AACA,OAAOA,KAAA,IAASC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ;AAoCnD,SAASC,WAAW,QAAQ;AAE5B,SAASC,WAAW,QAAQ;AAC5B,OAAO;AAEP,MAAMC,SAAA,GAAY;AAElB,OAAO,MAAMC,YAAA,GAA6CC,KAAA;EACxD,MAAM;IAAEC,YAAY;IAAEC,aAAa;IAAEC,KAAK;IAAEC;EAAgB,CAAE,GAAGJ,KAAA;EACjE,MAAMK,WAAA,GAAcH,aAAA,EAAeI,MAAA,IAAUF,gBAAA;EAC7C,MAAMG,QAAA,GAAWX,WAAA;EACjB,MAAM,CAACU,MAAA,EAAQE,SAAA,CAAU,GAAGb,QAAA,CAAS,OAAOU,WAAA,KAAgB,WAAWA,WAAA,GAAcI,SAAA;EAErF;;;;EAIA,MAAMC,iBAAA,GAAoBhB,MAAA,CAAO;EAEjC;;;EAGA,MAAMiB,cAAA,GAAiBjB,MAAA,CAAO,OAAOW,WAAA,KAAgB,WAAWA,WAAA,GAAcI,SAAA;EAE9E,MAAMG,eAAA,GAAkBf,WAAA,CAAYS,MAAA,EAAQ;EAE5Cb,SAAA,CAAU;IACR,IAAIY,WAAA,KAAgBM,cAAA,CAAeE,OAAO,EAAE;MAC1CH,iBAAA,CAAkBG,OAAO,GAAG;MAC5BL,SAAA,CAAUH,WAAA;MACVM,cAAA,CAAeE,OAAO,GAAGR,WAAA;IAC3B;EACF,GAAG,CAACA,WAAA,EAAaE,QAAA,CAAS;EAE1Bd,SAAA,CAAU;IACR,IAAImB,eAAA,KAAoBD,cAAA,CAAeE,OAAO,IAAIH,iBAAA,CAAkBG,OAAO,EAAE;MAC3E,IAAIZ,YAAA,EAAc;QAChBA,YAAA,CAAaW,eAAA;MACf;MAEAD,cAAA,CAAeE,OAAO,GAAGD,eAAA;IAC3B;EACF,GAAG,CAACA,eAAA,EAAiBX,YAAA,CAAa;EAElC,oBACEa,IAAA,CAAC;IAAIC,SAAA,EAAWjB,SAAA;cACd,aAAAgB,IAAA,CAAC;MACC,cAAYX,KAAA;MACZY,SAAA,EAAW,GAAGjB,SAAA,SAAkB;MAChCkB,EAAA,EAAG;MACHC,QAAA,EAAWC,CAAA;QACTR,iBAAA,CAAkBG,OAAO,GAAG;QAC5BL,SAAA,CAAUU,CAAA,CAAEC,MAAM,CAACC,KAAK;MAC1B;MACAC,WAAA,EAAalB,KAAA;MACbmB,IAAA,EAAK;MACLF,KAAA,EAAOd,MAAA,IAAU;;;AAIzB","ignoreList":[]}