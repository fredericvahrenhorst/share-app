{"version":3,"file":"index.js","names":["createContext","use","useEffect","useState","formatDocTitle","useConfig","useDocumentInfo","useTranslation","DocumentTitleContext","useDocumentTitle","DocumentTitleProvider","children","id","collectionSlug","docConfig","globalSlug","initialData","savedDocumentData","config","admin","dateFormat","i18n","title","setDocumentTitle","collectionConfig","undefined","data","fallback","toString","globalConfig","_jsx","value"],"sources":["../../../src/providers/DocumentTitle/index.tsx"],"sourcesContent":["import type { ClientCollectionConfig, ClientGlobalConfig } from 'payload'\n\nimport { createContext, use, useEffect, useState } from 'react'\n\nimport { formatDocTitle } from '../../utilities/formatDocTitle/index.js'\nimport { useConfig } from '../Config/index.js'\nimport { useDocumentInfo } from '../DocumentInfo/index.js'\nimport { useTranslation } from '../Translation/index.js'\n\ntype IDocumentTitleContext = {\n  setDocumentTitle: (title: string) => void\n  title: string\n}\n\nconst DocumentTitleContext = createContext({} as IDocumentTitleContext)\n\nexport const useDocumentTitle = (): IDocumentTitleContext => use(DocumentTitleContext)\n\nexport const DocumentTitleProvider: React.FC<{\n  children: React.ReactNode\n}> = ({ children }) => {\n  const { id, collectionSlug, docConfig, globalSlug, initialData, savedDocumentData } =\n    useDocumentInfo()\n\n  const {\n    config: {\n      admin: { dateFormat },\n    },\n  } = useConfig()\n\n  const { i18n } = useTranslation()\n\n  const [title, setDocumentTitle] = useState(() =>\n    formatDocTitle({\n      collectionConfig: collectionSlug ? (docConfig as ClientCollectionConfig) : undefined,\n      data: { ...(initialData || {}), id },\n      dateFormat,\n      fallback: id?.toString(),\n      globalConfig: globalSlug ? (docConfig as ClientGlobalConfig) : undefined,\n      i18n,\n    }),\n  )\n\n  useEffect(() => {\n    setDocumentTitle(\n      formatDocTitle({\n        collectionConfig: collectionSlug ? (docConfig as ClientCollectionConfig) : undefined,\n        data: { ...savedDocumentData, id },\n        dateFormat,\n        fallback: id?.toString(),\n        globalConfig: globalSlug ? (docConfig as ClientGlobalConfig) : undefined,\n        i18n,\n      }),\n    )\n  }, [savedDocumentData, dateFormat, i18n, id, collectionSlug, docConfig, globalSlug])\n\n  return <DocumentTitleContext value={{ setDocumentTitle, title }}>{children}</DocumentTitleContext>\n}\n"],"mappings":";AAEA,SAASA,aAAa,EAAEC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ;AAExD,SAASC,cAAc,QAAQ;AAC/B,SAASC,SAAS,QAAQ;AAC1B,SAASC,eAAe,QAAQ;AAChC,SAASC,cAAc,QAAQ;AAO/B,MAAMC,oBAAA,gBAAuBR,aAAA,CAAc,CAAC;AAE5C,OAAO,MAAMS,gBAAA,GAAmBA,CAAA,KAA6BR,GAAA,CAAIO,oBAAA;AAEjE,OAAO,MAAME,qBAAA,GAERA,CAAC;EAAEC;AAAQ,CAAE;EAChB,MAAM;IAAEC,EAAE;IAAEC,cAAc;IAAEC,SAAS;IAAEC,UAAU;IAAEC,WAAW;IAAEC;EAAiB,CAAE,GACjFX,eAAA;EAEF,MAAM;IACJY,MAAA,EAAQ;MACNC,KAAA,EAAO;QAAEC;MAAU;IAAE;EACtB,CACF,GAAGf,SAAA;EAEJ,MAAM;IAAEgB;EAAI,CAAE,GAAGd,cAAA;EAEjB,MAAM,CAACe,KAAA,EAAOC,gBAAA,CAAiB,GAAGpB,QAAA,CAAS,MACzCC,cAAA,CAAe;IACboB,gBAAA,EAAkBX,cAAA,GAAkBC,SAAA,GAAuCW,SAAA;IAC3EC,IAAA,EAAM;MAAE,IAAIV,WAAA,IAAe,CAAC,CAAC;MAAGJ;IAAG;IACnCQ,UAAA;IACAO,QAAA,EAAUf,EAAA,EAAIgB,QAAA;IACdC,YAAA,EAAcd,UAAA,GAAcD,SAAA,GAAmCW,SAAA;IAC/DJ;EACF;EAGFnB,SAAA,CAAU;IACRqB,gBAAA,CACEnB,cAAA,CAAe;MACboB,gBAAA,EAAkBX,cAAA,GAAkBC,SAAA,GAAuCW,SAAA;MAC3EC,IAAA,EAAM;QAAE,GAAGT,iBAAiB;QAAEL;MAAG;MACjCQ,UAAA;MACAO,QAAA,EAAUf,EAAA,EAAIgB,QAAA;MACdC,YAAA,EAAcd,UAAA,GAAcD,SAAA,GAAmCW,SAAA;MAC/DJ;IACF;EAEJ,GAAG,CAACJ,iBAAA,EAAmBG,UAAA,EAAYC,IAAA,EAAMT,EAAA,EAAIC,cAAA,EAAgBC,SAAA,EAAWC,UAAA,CAAW;EAEnF,oBAAOe,IAAA,CAACtB,oBAAA;IAAqBuB,KAAA,EAAO;MAAER,gBAAA;MAAkBD;IAAM;cAAIX;;AACpE","ignoreList":[]}