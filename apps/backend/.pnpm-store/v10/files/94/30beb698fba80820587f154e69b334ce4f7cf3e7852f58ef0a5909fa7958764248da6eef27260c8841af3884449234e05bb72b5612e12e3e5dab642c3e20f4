{"version":3,"file":"index.js","names":["DragOverlay","getEventCoordinates","FolderFileCard","baseClass","DragOverlaySelection","allItems","lastSelected","selectedCount","visibleItem","_jsx","dropAnimation","modifiers","snapTopLeftToCursor","style","height","maxWidth","_jsxs","className","Array","from","length","map","_","index","right","top","id","isSelected","itemKey","title","value","_folderOrDocumentTitle","type","activatorEvent","draggingNodeRect","transform","activatorCoordinates","offsetX","x","left","offsetY","y"],"sources":["../../../../src/elements/FolderView/DragOverlaySelection/index.tsx"],"sourcesContent":["import type { Modifier } from '@dnd-kit/core'\nimport type { FolderOrDocument } from 'payload/shared'\n\nimport { DragOverlay } from '@dnd-kit/core'\nimport { getEventCoordinates } from '@dnd-kit/utilities'\n\nimport { FolderFileCard } from '../FolderFileCard/index.js'\nimport './index.scss'\n\nconst baseClass = 'drag-overlay-selection'\n\ntype DragCardsProps = {\n  readonly allItems: FolderOrDocument[]\n  readonly lastSelected?: number\n  readonly selectedCount: number\n}\nexport function DragOverlaySelection({ allItems, lastSelected, selectedCount }: DragCardsProps) {\n  const visibleItem = allItems?.[lastSelected || 0]\n  if (!selectedCount || !visibleItem) {\n    return null\n  }\n\n  return (\n    <DragOverlay\n      dropAnimation={null}\n      modifiers={[snapTopLeftToCursor]}\n      style={{\n        height: 'unset',\n        maxWidth: '220px',\n      }}\n    >\n      <div className={`${baseClass}__cards`}>\n        {Array.from({ length: selectedCount > 1 ? 2 : 1 }).map((_, index) => (\n          <div\n            className={`${baseClass}__card`}\n            key={index}\n            style={{\n              right: `${index * 3}px`,\n              top: `-${index * 3}px`,\n            }}\n          >\n            <FolderFileCard\n              id={null}\n              isSelected\n              itemKey=\"overlay-card\"\n              title={visibleItem.value._folderOrDocumentTitle}\n              type=\"folder\"\n            />\n          </div>\n        ))}\n        {selectedCount > 1 ? (\n          <span className={`${baseClass}__card-count`}>{selectedCount}</span>\n        ) : null}\n      </div>\n    </DragOverlay>\n  )\n}\n\nexport const snapTopLeftToCursor: Modifier = ({ activatorEvent, draggingNodeRect, transform }) => {\n  if (draggingNodeRect && activatorEvent) {\n    const activatorCoordinates = getEventCoordinates(activatorEvent)\n\n    if (!activatorCoordinates) {\n      return transform\n    }\n\n    const offsetX = activatorCoordinates.x - draggingNodeRect.left\n    const offsetY = activatorCoordinates.y - draggingNodeRect.top\n\n    return {\n      ...transform,\n      x: transform.x + offsetX + 5,\n      y: transform.y + offsetY + 5,\n    }\n  }\n\n  return transform\n}\n"],"mappings":";AAGA,SAASA,WAAW,QAAQ;AAC5B,SAASC,mBAAmB,QAAQ;AAEpC,SAASC,cAAc,QAAQ;AAC/B,OAAO;AAEP,MAAMC,SAAA,GAAY;AAOlB,OAAO,SAASC,qBAAqB;EAAEC,QAAQ;EAAEC,YAAY;EAAEC;AAAa,CAAkB;EAC5F,MAAMC,WAAA,GAAcH,QAAA,GAAWC,YAAA,IAAgB,EAAE;EACjD,IAAI,CAACC,aAAA,IAAiB,CAACC,WAAA,EAAa;IAClC,OAAO;EACT;EAEA,oBACEC,IAAA,CAACT,WAAA;IACCU,aAAA,EAAe;IACfC,SAAA,EAAW,CAACC,mBAAA,CAAoB;IAChCC,KAAA,EAAO;MACLC,MAAA,EAAQ;MACRC,QAAA,EAAU;IACZ;cAEA,aAAAC,KAAA,CAAC;MAAIC,SAAA,EAAW,GAAGd,SAAA,SAAkB;iBAClCe,KAAA,CAAMC,IAAI,CAAC;QAAEC,MAAA,EAAQb,aAAA,GAAgB,IAAI,IAAI;MAAE,GAAGc,GAAG,CAAC,CAACC,CAAA,EAAGC,KAAA,kBACzDd,IAAA,CAAC;QACCQ,SAAA,EAAW,GAAGd,SAAA,QAAiB;QAE/BU,KAAA,EAAO;UACLW,KAAA,EAAO,GAAGD,KAAA,GAAQ,KAAK;UACvBE,GAAA,EAAK,IAAIF,KAAA,GAAQ;QACnB;kBAEA,aAAAd,IAAA,CAACP,cAAA;UACCwB,EAAA,EAAI;UACJC,UAAU;UACVC,OAAA,EAAQ;UACRC,KAAA,EAAOrB,WAAA,CAAYsB,KAAK,CAACC,sBAAsB;UAC/CC,IAAA,EAAK;;SAXFT,KAAA,IAeRhB,aAAA,GAAgB,iBACfE,IAAA,CAAC;QAAKQ,SAAA,EAAW,GAAGd,SAAA,cAAuB;kBAAGI;WAC5C;;;AAIZ;AAEA,OAAO,MAAMK,mBAAA,GAAgCA,CAAC;EAAEqB,cAAc;EAAEC,gBAAgB;EAAEC;AAAS,CAAE;EAC3F,IAAID,gBAAA,IAAoBD,cAAA,EAAgB;IACtC,MAAMG,oBAAA,GAAuBnC,mBAAA,CAAoBgC,cAAA;IAEjD,IAAI,CAACG,oBAAA,EAAsB;MACzB,OAAOD,SAAA;IACT;IAEA,MAAME,OAAA,GAAUD,oBAAA,CAAqBE,CAAC,GAAGJ,gBAAA,CAAiBK,IAAI;IAC9D,MAAMC,OAAA,GAAUJ,oBAAA,CAAqBK,CAAC,GAAGP,gBAAA,CAAiBT,GAAG;IAE7D,OAAO;MACL,GAAGU,SAAS;MACZG,CAAA,EAAGH,SAAA,CAAUG,CAAC,GAAGD,OAAA,GAAU;MAC3BI,CAAA,EAAGN,SAAA,CAAUM,CAAC,GAAGD,OAAA,GAAU;IAC7B;EACF;EAEA,OAAOL,SAAA;AACT","ignoreList":[]}