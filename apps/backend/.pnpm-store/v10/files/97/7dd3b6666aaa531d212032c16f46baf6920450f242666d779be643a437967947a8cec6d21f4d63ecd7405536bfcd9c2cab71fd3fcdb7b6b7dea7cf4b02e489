{"version":3,"file":"LogoutClient.js","names":["c","_c","Button","LoadingOverlay","toast","useAuth","useRouteTransition","useTranslation","useRouter","formatAdminURL","React","useEffect","baseClass","LogoutClient","props","$","adminRoute","inactivity","redirect","logOut","user","startRouteTransition","isLoggedOut","setIsLoggedOut","useState","logOutSuccessRef","useRef","t0","path","length","encodeURIComponent","loginRoute","t","router","t1","loggedOut","current","success","push","handleLogOut","t2","t3","t4","_jsxs","className","children","_jsx","buttonStyle","el","size","url","animationDuration","loadingText"],"sources":["../../../src/views/Logout/LogoutClient.tsx"],"sourcesContent":["'use client'\nimport {\n  Button,\n  LoadingOverlay,\n  toast,\n  useAuth,\n  useRouteTransition,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { useRouter } from 'next/navigation.js'\nimport { formatAdminURL } from 'payload/shared'\nimport React, { useEffect } from 'react'\n\nimport './index.scss'\n\nconst baseClass = 'logout'\n\nexport const LogoutClient: React.FC<{\n  adminRoute: string\n  inactivity?: boolean\n  redirect: string\n}> = (props) => {\n  const { adminRoute, inactivity, redirect } = props\n\n  const { logOut, user } = useAuth()\n\n  const { startRouteTransition } = useRouteTransition()\n\n  const [isLoggedOut, setIsLoggedOut] = React.useState<boolean>(!user)\n\n  const logOutSuccessRef = React.useRef(false)\n\n  const [loginRoute] = React.useState(() =>\n    formatAdminURL({\n      adminRoute,\n      path: `/login${\n        inactivity && redirect && redirect.length > 0\n          ? `?redirect=${encodeURIComponent(redirect)}`\n          : ''\n      }`,\n    }),\n  )\n\n  const { t } = useTranslation()\n  const router = useRouter()\n\n  const handleLogOut = React.useCallback(async () => {\n    const loggedOut = await logOut()\n    setIsLoggedOut(loggedOut)\n\n    if (!inactivity && loggedOut && !logOutSuccessRef.current) {\n      toast.success(t('authentication:loggedOutSuccessfully'))\n      logOutSuccessRef.current = true\n      startRouteTransition(() => router.push(loginRoute))\n      return\n    }\n  }, [inactivity, logOut, loginRoute, router, startRouteTransition, t])\n\n  useEffect(() => {\n    if (!isLoggedOut) {\n      void handleLogOut()\n    } else {\n      startRouteTransition(() => router.push(loginRoute))\n    }\n  }, [handleLogOut, isLoggedOut, loginRoute, router, startRouteTransition])\n\n  if (isLoggedOut && inactivity) {\n    return (\n      <div className={`${baseClass}__wrap`}>\n        <h2>{t('authentication:loggedOutInactivity')}</h2>\n        <Button buttonStyle=\"secondary\" el=\"link\" size=\"large\" url={loginRoute}>\n          {t('authentication:logBackIn')}\n        </Button>\n      </div>\n    )\n  }\n\n  return <LoadingOverlay animationDuration={'0ms'} loadingText={t('authentication:loggingOut')} />\n}\n"],"mappings":"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","ignoreList":[]}