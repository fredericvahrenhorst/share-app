{"version":3,"file":"getDocumentData.js","names":["sanitizeID","logError","getDocumentData","id","idArg","collectionSlug","globalSlug","locale","payload","req","user","resolvedData","transactionID","rest","findByID","collection","depth","draft","fallbackLocale","code","overrideAccess","findGlobal","slug","err"],"sources":["../../../src/views/Document/getDocumentData.ts"],"sourcesContent":["import { sanitizeID } from '@payloadcms/ui/shared'\nimport {\n  type Locale,\n  logError,\n  type Payload,\n  type PayloadRequest,\n  type TypedUser,\n  type TypeWithID,\n} from 'payload'\n\ntype Args = {\n  collectionSlug?: string\n  globalSlug?: string\n  id?: number | string\n  locale?: Locale\n  payload: Payload\n  req?: PayloadRequest\n  user?: TypedUser\n}\n\nexport const getDocumentData = async ({\n  id: idArg,\n  collectionSlug,\n  globalSlug,\n  locale,\n  payload,\n  req,\n  user,\n}: Args): Promise<null | Record<string, unknown> | TypeWithID> => {\n  const id = sanitizeID(idArg)\n  let resolvedData: Record<string, unknown> | TypeWithID = null\n  const { transactionID, ...rest } = req\n\n  try {\n    if (collectionSlug && id) {\n      resolvedData = await payload.findByID({\n        id,\n        collection: collectionSlug,\n        depth: 0,\n        draft: true,\n        fallbackLocale: false,\n        locale: locale?.code,\n        overrideAccess: false,\n        req: {\n          ...rest,\n        },\n        user,\n      })\n    }\n\n    if (globalSlug) {\n      resolvedData = await payload.findGlobal({\n        slug: globalSlug,\n        depth: 0,\n        draft: true,\n        fallbackLocale: false,\n        locale: locale?.code,\n        overrideAccess: false,\n        req: {\n          ...rest,\n        },\n        user,\n      })\n    }\n  } catch (err) {\n    logError({ err, payload })\n  }\n\n  return resolvedData\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ;AAC3B,SAEEC,QAAQ,QAKH;AAYP,OAAO,MAAMC,eAAA,GAAkB,MAAAA,CAAO;EACpCC,EAAA,EAAIC,KAAK;EACTC,cAAc;EACdC,UAAU;EACVC,MAAM;EACNC,OAAO;EACPC,GAAG;EACHC;AAAI,CACC;EACL,MAAMP,EAAA,GAAKH,UAAA,CAAWI,KAAA;EACtB,IAAIO,YAAA,GAAqD;EACzD,MAAM;IAAEC,aAAa;IAAE,GAAGC;EAAA,CAAM,GAAGJ,GAAA;EAEnC,IAAI;IACF,IAAIJ,cAAA,IAAkBF,EAAA,EAAI;MACxBQ,YAAA,GAAe,MAAMH,OAAA,CAAQM,QAAQ,CAAC;QACpCX,EAAA;QACAY,UAAA,EAAYV,cAAA;QACZW,KAAA,EAAO;QACPC,KAAA,EAAO;QACPC,cAAA,EAAgB;QAChBX,MAAA,EAAQA,MAAA,EAAQY,IAAA;QAChBC,cAAA,EAAgB;QAChBX,GAAA,EAAK;UACH,GAAGI;QACL;QACAH;MACF;IACF;IAEA,IAAIJ,UAAA,EAAY;MACdK,YAAA,GAAe,MAAMH,OAAA,CAAQa,UAAU,CAAC;QACtCC,IAAA,EAAMhB,UAAA;QACNU,KAAA,EAAO;QACPC,KAAA,EAAO;QACPC,cAAA,EAAgB;QAChBX,MAAA,EAAQA,MAAA,EAAQY,IAAA;QAChBC,cAAA,EAAgB;QAChBX,GAAA,EAAK;UACH,GAAGI;QACL;QACAH;MACF;IACF;EACF,EAAE,OAAOa,GAAA,EAAK;IACZtB,QAAA,CAAS;MAAEsB,GAAA;MAAKf;IAAQ;EAC1B;EAEA,OAAOG,YAAA;AACT","ignoreList":[]}